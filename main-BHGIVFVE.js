var qM=Object.defineProperty,zM=Object.defineProperties;var GM=Object.getOwnPropertyDescriptors;var Gw=Object.getOwnPropertySymbols;var WM=Object.prototype.hasOwnProperty,KM=Object.prototype.propertyIsEnumerable;var Ww=(n,e,t)=>e in n?qM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,k=(n,e)=>{for(var t in e||={})WM.call(e,t)&&Ww(n,t,e[t]);if(Gw)for(var t of Gw(e))KM.call(e,t)&&Ww(n,t,e[t]);return n},oe=(n,e)=>zM(n,GM(e));var T=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});var jp;function ul(){return jp}function Sn(n){let e=jp;return jp=n,e}var Kw=Symbol("NotFound");function Bo(n){return n===Kw||n?.name==="\u0275NotFound"}var pt=null,ll=!1,Up=1,QM=null,gt=Symbol("SIGNAL");function se(n){let e=pt;return pt=n,e}function pl(){return pt}var $o={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ho(n){if(ll)throw new Error("");if(pt===null)return;pt.consumerOnSignalRead(n);let e=pt.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=pt.recomputing;if(r&&(t=e!==void 0?e.nextProducer:pt.producers,t!==void 0&&t.producer===n)){pt.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===pt&&(!r||ZM(i,pt)))return;let o=zo(pt),s={producer:n,consumer:pt,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};pt.producersTail=s,e!==void 0?e.nextProducer=s:pt.producers=s,o&&Jw(n,s)}function Qw(){Up++}function gl(n){if(!(zo(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Up)){if(!n.producerMustRecompute(n)&&!Ya(n)){fl(n);return}n.producerRecomputeValue(n),fl(n)}}function Bp(n){if(n.consumers===void 0)return;let e=ll;ll=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||YM(r)}}finally{ll=e}}function $p(){return pt?.consumerAllowSignalWrites!==!1}function YM(n){n.dirty=!0,Bp(n),n.consumerMarkedDirty?.(n)}function fl(n){n.dirty=!1,n.lastCleanEpoch=Up}function qo(n){return n&&Yw(n),se(n)}function Yw(n){n.producersTail=void 0,n.recomputing=!0}function Qa(n,e){se(e),n&&Zw(n)}function Zw(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(zo(n))do t=Hp(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Ya(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(gl(t),r!==t.version))return!0}return!1}function Za(n){if(zo(n)){let e=n.producers;for(;e!==void 0;)e=Hp(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function Jw(n,e){let t=n.consumersTail,r=zo(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)Jw(i.producer,i)}function Hp(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!zo(e)){let o=e.producers;for(;o!==void 0;)o=Hp(o)}return t}function zo(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function ml(n){QM?.(n)}function ZM(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function yl(n,e){return Object.is(n,e)}function vl(n,e){let t=Object.create(JM);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(gl(t),Ho(t),t.value===Ka)throw t.error;return t.value};return r[gt]=t,ml(t),r}var dl=Symbol("UNSET"),hl=Symbol("COMPUTING"),Ka=Symbol("ERRORED"),JM=oe(k({},$o),{value:dl,dirty:!0,error:null,equal:yl,kind:"computed",producerMustRecompute(n){return n.value===dl||n.value===hl},producerRecomputeValue(n){if(n.value===hl)throw new Error("");let e=n.value;n.value=hl;let t=qo(n),r,i=!1;try{r=n.computation(),se(null),i=e!==dl&&e!==Ka&&r!==Ka&&n.equal(e,r)}catch(o){r=Ka,n.error=o}finally{Qa(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function XM(){throw new Error}var Xw=XM;function eD(n){Xw(n)}function qp(n){Xw=n}var eP=null;function zp(n,e){let t=Object.create(_l);t.value=n,e!==void 0&&(t.equal=e);let r=()=>tD(t);return r[gt]=t,ml(t),[r,s=>Go(t,s),s=>Gp(t,s)]}function tD(n){return Ho(n),n.value}function Go(n,e){$p()||eD(n),n.equal(n.value,e)||(n.value=e,tP(n))}function Gp(n,e){$p()||eD(n),Go(n,e(n.value))}var _l=oe(k({},$o),{equal:yl,value:void 0,kind:"signal"});function tP(n){n.version++,Qw(),Bp(n),eP?.(n)}function te(n){return typeof n=="function"}function Wo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var El=Wo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Mi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var xe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(o){e=o instanceof El?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{nD(o)}catch(s){e=e??[],s instanceof El?e=[...e,...s.errors]:e.push(s)}}if(e)throw new El(e)}}add(e){var t;if(e&&e!==this)if(this.closed)nD(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Mi(t,e)}remove(e){let{_finalizers:t}=this;t&&Mi(t,e),e instanceof n&&e._removeParent(this)}};xe.EMPTY=(()=>{let n=new xe;return n.closed=!0,n})();var Wp=xe.EMPTY;function Il(n){return n instanceof xe||n&&"closed"in n&&te(n.remove)&&te(n.add)&&te(n.unsubscribe)}function nD(n){te(n)?n():n.unsubscribe()}var an={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ko={setTimeout(n,e,...t){let{delegate:r}=Ko;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ko;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function wl(n){Ko.setTimeout(()=>{let{onUnhandledError:e}=an;if(e)e(n);else throw n})}function Ja(){}var rD=Kp("C",void 0,void 0);function iD(n){return Kp("E",void 0,n)}function oD(n){return Kp("N",n,void 0)}function Kp(n,e,t){return{kind:n,value:e,error:t}}var Pi=null;function Qo(n){if(an.useDeprecatedSynchronousErrorHandling){let e=!Pi;if(e&&(Pi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Pi;if(Pi=null,t)throw r}}else n()}function sD(n){an.useDeprecatedSynchronousErrorHandling&&Pi&&(Pi.errorThrown=!0,Pi.error=n)}var xi=class extends xe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Il(e)&&e.add(this)):this.destination=iP}static create(e,t,r){return new Yo(e,t,r)}next(e){this.isStopped?Yp(oD(e),this):this._next(e)}error(e){this.isStopped?Yp(iD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Yp(rD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},nP=Function.prototype.bind;function Qp(n,e){return nP.call(n,e)}var Zp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Dl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Dl(r)}else Dl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Dl(t)}}},Yo=class extends xi{constructor(e,t,r){super();let i;if(te(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&an.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Qp(e.next,o),error:e.error&&Qp(e.error,o),complete:e.complete&&Qp(e.complete,o)}):i=e}this.destination=new Zp(i)}};function Dl(n){an.useDeprecatedSynchronousErrorHandling?sD(n):wl(n)}function rP(n){throw n}function Yp(n,e){let{onStoppedNotification:t}=an;t&&Ko.setTimeout(()=>t(n,e))}var iP={closed:!0,next:Ja,error:rP,complete:Ja};var Zo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ot(n){return n}function bl(...n){return Jp(n)}function Jp(n){return n.length===0?Ot:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var re=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=sP(t)?t:new Yo(t,r,i);return Qo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=aD(r),new r((i,o)=>{let s=new Yo({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Zo](){return this}pipe(...t){return Jp(t)(this)}toPromise(t){return t=aD(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function aD(n){var e;return(e=n??an.Promise)!==null&&e!==void 0?e:Promise}function oP(n){return n&&te(n.next)&&te(n.error)&&te(n.complete)}function sP(n){return n&&n instanceof xi||oP(n)&&Il(n)}function Xp(n){return te(n?.lift)}function fe(n){return e=>{if(Xp(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function de(n,e,t,r,i){return new eg(n,e,t,r,i)}var eg=class extends xi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Jo(){return fe((n,e)=>{let t=null;n._refCount++;let r=de(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Xo=class extends re{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Xp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new xe;let t=this.getSubject();e.add(this.source.subscribe(de(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=xe.EMPTY)}return e}refCount(){return Jo()(this)}};var cD=Wo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Fe=(()=>{class n extends re{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Tl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new cD}next(t){Qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Wp:(this.currentObservers=null,o.push(t),new xe(()=>{this.currentObservers=null,Mi(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new re;return t.source=this,t}}return n.create=(e,t)=>new Tl(e,t),n})(),Tl=class extends Fe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Wp}};var rt=class extends Fe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var tg={now(){return(tg.delegate||Date).now()},delegate:void 0};var Cl=class extends xe{constructor(e,t){super()}schedule(e,t=0){return this}};var Xa={setInterval(n,e,...t){let{delegate:r}=Xa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Xa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var es=class extends Cl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Xa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Xa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Mi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ts=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ts.now=tg.now;var ns=class extends ts{constructor(e,t=ts.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var ng=new ns(es);var Sl=class extends es{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Al=class extends ns{};var rg=new Al(Sl);var Mt=new re(n=>n.complete());function uD(n){return n&&te(n.schedule)}function lD(n){return n[n.length-1]}function Rl(n){return te(lD(n))?n.pop():void 0}function kr(n){return uD(lD(n))?n.pop():void 0}function ig(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function hD(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function dD(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ki(n){return this instanceof ki?(this.v=n,this):new ki(n)}function fD(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(S){return Promise.resolve(S).then(y,p)}}function a(y,S){r[y]&&(i[y]=function(M){return new Promise(function(R,V){o.push([y,M,R,V])>1||u(y,M)})},S&&(i[y]=S(i[y])))}function u(y,S){try{l(r[y](S))}catch(M){m(o[0][3],M)}}function l(y){y.value instanceof ki?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,S){y(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function pD(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof dD=="function"?dD(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Nl=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ml(n){return te(n?.then)}function Pl(n){return te(n[Zo])}function xl(n){return Symbol.asyncIterator&&te(n?.[Symbol.asyncIterator])}function kl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function aP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ol=aP();function Fl(n){return te(n?.[Ol])}function Ll(n){return fD(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ki(t.read());if(i)return yield ki(void 0);yield yield ki(r)}}finally{t.releaseLock()}})}function Vl(n){return te(n?.getReader)}function Be(n){if(n instanceof re)return n;if(n!=null){if(Pl(n))return cP(n);if(Nl(n))return uP(n);if(Ml(n))return lP(n);if(xl(n))return gD(n);if(Fl(n))return dP(n);if(Vl(n))return hP(n)}throw kl(n)}function cP(n){return new re(e=>{let t=n[Zo]();if(te(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function uP(n){return new re(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function lP(n){return new re(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,wl)})}function dP(n){return new re(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function gD(n){return new re(e=>{fP(n,e).catch(t=>e.error(t))})}function hP(n){return gD(Ll(n))}function fP(n,e){var t,r,i,o;return hD(this,void 0,void 0,function*(){try{for(t=pD(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Pt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Or(n,e=0){return fe((t,r)=>{t.subscribe(de(r,i=>Pt(r,n,()=>r.next(i),e),()=>Pt(r,n,()=>r.complete(),e),i=>Pt(r,n,()=>r.error(i),e)))})}function Fr(n,e=0){return fe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function mD(n,e){return Be(n).pipe(Fr(e),Or(e))}function yD(n,e){return Be(n).pipe(Fr(e),Or(e))}function vD(n,e){return new re(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function _D(n,e){return new re(t=>{let r;return Pt(t,e,()=>{r=n[Ol](),Pt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function jl(n,e){if(!n)throw new Error("Iterable cannot be null");return new re(t=>{Pt(t,e,()=>{let r=n[Symbol.asyncIterator]();Pt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function ED(n,e){return jl(Ll(n),e)}function ID(n,e){if(n!=null){if(Pl(n))return mD(n,e);if(Nl(n))return vD(n,e);if(Ml(n))return yD(n,e);if(xl(n))return jl(n,e);if(Fl(n))return _D(n,e);if(Vl(n))return ED(n,e)}throw kl(n)}function Se(n,e){return e?ID(n,e):Be(n)}function z(...n){let e=kr(n);return Se(n,e)}function rs(n,e){let t=te(n)?n:()=>n,r=i=>i.error(t());return new re(e?i=>e.schedule(r,0,i):r)}function og(n){return!!n&&(n instanceof re||te(n.lift)&&te(n.subscribe))}var nr=Wo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ae(n,e){return fe((t,r)=>{let i=0;t.subscribe(de(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:pP}=Array;function gP(n,e){return pP(e)?n(...e):n(e)}function Ul(n){return ae(e=>gP(n,e))}var{isArray:mP}=Array,{getPrototypeOf:yP,prototype:vP,keys:_P}=Object;function Bl(n){if(n.length===1){let e=n[0];if(mP(e))return{args:e,keys:null};if(EP(e)){let t=_P(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function EP(n){return n&&typeof n=="object"&&yP(n)===vP}function $l(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ec(...n){let e=kr(n),t=Rl(n),{args:r,keys:i}=Bl(n);if(r.length===0)return Se([],e);let o=new re(IP(r,e,i?s=>$l(i,s):Ot));return t?o.pipe(Ul(t)):o}function IP(n,e,t=Ot){return r=>{wD(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)wD(e,()=>{let l=Se(n[u],e),h=!1;l.subscribe(de(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function wD(n,e,t){n?Pt(t,n,e):e()}function DD(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=M=>l<r?S(M):u.push(M),S=M=>{o&&e.next(M),l++;let R=!1;Be(t(M,h++)).subscribe(de(e,V=>{i?.(V),o?y(V):e.next(V)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let V=u.shift();s?Pt(e,s,()=>S(V)):S(V)}m()}catch(V){e.error(V)}}))};return n.subscribe(de(e,y,()=>{p=!0,m()})),()=>{a?.()}}function Le(n,e,t=1/0){return te(e)?Le((r,i)=>ae((o,s)=>e(r,o,i,s))(Be(n(r,i))),t):(typeof e=="number"&&(t=e),fe((r,i)=>DD(r,i,n,t)))}function Lr(n=1/0){return Le(Ot,n)}function bD(){return Lr(1)}function is(...n){return bD()(Se(n,kr(n)))}function tc(n){return new re(e=>{Be(n()).subscribe(e)})}function sg(...n){let e=Rl(n),{args:t,keys:r}=Bl(n),i=new re(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Be(t[h]).subscribe(de(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?$l(r,a):a),o.complete())}))}});return e?i.pipe(Ul(e)):i}function Tt(n,e){return fe((t,r)=>{let i=0;t.subscribe(de(r,o=>n.call(e,o,i++)&&r.next(o)))})}function rr(n){return fe((e,t)=>{let r=null,i=!1,o;r=e.subscribe(de(t,void 0,void 0,s=>{o=Be(n(s,rr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function TD(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(de(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Vr(n,e){return te(e)?Le(n,e,1):Le(n,1)}function jr(n){return fe((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ir(n){return n<=0?()=>Mt:fe((e,t)=>{let r=0;e.subscribe(de(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Hl(n=wP){return fe((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function wP(){return new nr}function nc(n){return fe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function or(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Tt((i,o)=>n(i,o,r)):Ot,ir(1),t?jr(e):Hl(()=>new nr))}function os(n){return n<=0?()=>Mt:fe((e,t)=>{let r=[];e.subscribe(de(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ag(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Tt((i,o)=>n(i,o,r)):Ot,os(1),t?jr(e):Hl(()=>new nr))}function ql(n,e){return fe(TD(n,e,arguments.length>=2,!0))}function zl(...n){let e=kr(n);return fe((t,r)=>{(e?is(n,t,e):is(n,t)).subscribe(r)})}function Ct(n,e){return fe((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(de(r,u=>{i?.unsubscribe();let l=0,h=o++;Be(n(u,h)).subscribe(i=de(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Gl(n){return fe((e,t)=>{Be(n).subscribe(de(t,()=>t.complete(),Ja)),!t.closed&&e.subscribe(t)})}function Je(n,e,t){let r=te(n)||e||t?{next:n,error:e,complete:t}:n;return r?fe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(de(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Ot}function CD(n){let e=se(null);try{return n()}finally{se(e)}}var Ur=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Eg=new Ur("20.3.15");var Yl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",U=class extends Error{code;constructor(e,t){super(Ui(e,t)),this.code=e}};function DP(n){return`NG0${Math.abs(n)}`}function Ui(n,e){return`${DP(n)}${e?": "+e:""}`}var sc=globalThis;function _e(n){for(let e in n)if(n[e]===_e)return e;throw Error("")}function RD(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ar(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(ar).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Ig(n,e){return n?e?`${n} ${e}`:n:e||""}var bP=_e({__forward_ref__:_e});function An(n){return n.__forward_ref__=An,n.toString=function(){return ar(this())},n}function it(n){return wg(n)?n():n}function wg(n){return typeof n=="function"&&n.hasOwnProperty(bP)&&n.__forward_ref__===An}function q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function un(n){return{providers:n.providers||[],imports:n.imports||[]}}function ac(n){return TP(n,Zl)}function Dg(n){return ac(n)!==null}function TP(n,e){return n.hasOwnProperty(e)&&n[e]||null}function CP(n){let e=n?.[Zl]??null;return e||null}function ug(n){return n&&n.hasOwnProperty(Kl)?n[Kl]:null}var Zl=_e({\u0275prov:_e}),Kl=_e({\u0275inj:_e}),$=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function bg(n){return n&&!!n.\u0275providers}var Tg=_e({\u0275cmp:_e}),Cg=_e({\u0275dir:_e}),Sg=_e({\u0275pipe:_e}),Ag=_e({\u0275mod:_e}),ic=_e({\u0275fac:_e}),Bi=_e({__NG_ELEMENT_ID__:_e}),SD=_e({__NG_ENV_ID__:_e});function cc(n){return typeof n=="string"?n:n==null?"":String(n)}function ND(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():cc(n)}var MD=_e({ngErrorCode:_e}),SP=_e({ngErrorMessage:_e}),AP=_e({ngTokenPath:_e});function Rg(n,e){return PD("",-200,e)}function Jl(n,e){throw new U(-201,!1)}function PD(n,e,t){let r=new U(e,n);return r[MD]=e,r[SP]=n,t&&(r[AP]=t),r}function RP(n){return n[MD]}var lg;function xD(){return lg}function Ft(n){let e=lg;return lg=n,e}function Ng(n,e,t){let r=ac(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Jl(n,"Injector")}var NP={},Oi=NP,dg="__NG_DI_FLAG__",hg=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Fi(t)||0;try{return this.injector.get(e,r&8?null:Oi,r)}catch(i){if(Bo(i))return i;throw i}}};function MP(n,e=0){let t=ul();if(t===void 0)throw new U(-203,!1);if(t===null)return Ng(n,void 0,e);{let r=PP(e),i=t.retrieve(n,r);if(Bo(i)){if(r.optional)return null;throw i}return i}}function K(n,e=0){return(xD()||MP)(it(n),e)}function N(n,e){return K(n,Fi(e))}function Fi(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function PP(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function fg(n){let e=[];for(let t=0;t<n.length;t++){let r=it(n[t]);if(Array.isArray(r)){if(r.length===0)throw new U(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=xP(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(K(i,o))}else e.push(K(r))}return e}function kD(n,e){return n[dg]=e,n.prototype[dg]=e,n}function xP(n){return n[dg]}function Li(n,e){let t=n.hasOwnProperty(ic);return t?n[ic]:null}function OD(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function FD(n){return n.flat(Number.POSITIVE_INFINITY)}function Xl(n,e){n.forEach(t=>Array.isArray(t)?Xl(t,e):e(t))}function Mg(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function uc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function LD(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function VD(n,e,t){let r=as(n,e);return r>=0?n[r|1]=t:(r=~r,LD(n,r,e,t)),r}function ed(n,e){let t=as(n,e);if(t>=0)return n[t|1]}function as(n,e){return kP(n,e,1)}function kP(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var $r={},Lt=[],Hr=new $(""),Pg=new $("",-1),xg=new $(""),oc=class{get(e,t=Oi){if(t===Oi){let i=PD("",-201);throw i.name="\u0275NotFound",i}return t}};function kg(n){return n[Ag]||null}function ur(n){return n[Tg]||null}function Og(n){return n[Cg]||null}function jD(n){return n[Sg]||null}function lr(n){return{\u0275providers:n}}function UD(...n){return{\u0275providers:Fg(!0,n),\u0275fromNgModule:!0}}function Fg(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Xl(e,s=>{let a=s;Ql(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&BD(i,o),t}function BD(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Lg(i,o=>{e(o,r)})}}function Ql(n,e,t,r){if(n=it(n),!n)return!1;let i=null,o=ug(n),s=!o&&ur(n);if(!o&&!s){let u=n.ngModule;if(o=ug(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Ql(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Xl(o.imports,h=>{Ql(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&BD(l,e)}if(!a){let l=Li(i)||(()=>new i);e({provide:i,useFactory:l,deps:Lt},i),e({provide:xg,useValue:i,multi:!0},i),e({provide:Hr,useValue:()=>K(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;Lg(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Lg(n,e){for(let t of n)bg(t)&&(t=t.\u0275providers),Array.isArray(t)?Lg(t,e):e(t)}var OP=_e({provide:String,useValue:_e});function $D(n){return n!==null&&typeof n=="object"&&OP in n}function FP(n){return!!(n&&n.useExisting)}function LP(n){return!!(n&&n.useFactory)}function Vi(n){return typeof n=="function"}function HD(n){return!!n.useClass}var lc=new $(""),Wl={},AD={},cg;function dc(){return cg===void 0&&(cg=new oc),cg}var Ve=class{},ji=class extends Ve{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,gg(e,s=>this.processProvider(s)),this.records.set(Pg,ss(void 0,this)),i.has("environment")&&this.records.set(Ve,ss(void 0,this));let o=this.records.get(lc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(xg,Lt,{self:!0}))}retrieve(e,t){let r=Fi(t)||0;try{return this.get(e,Oi,r)}catch(i){if(Bo(i))return i;throw i}}destroy(){rc(this),this._destroyed=!0;let e=se(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),se(e)}}onDestroy(e){return rc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){rc(this);let t=Sn(this),r=Ft(void 0),i;try{return e()}finally{Sn(t),Ft(r)}}get(e,t=Oi,r){if(rc(this),e.hasOwnProperty(SD))return e[SD](this);let i=Fi(r),o,s=Sn(this),a=Ft(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=$P(e)&&ac(e);h&&this.injectableDefInScope(h)?l=ss(pg(e),Wl):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?dc():this.parent;return t=i&8&&t===Oi?null:t,u.get(e,t)}catch(u){let l=RP(u);throw l===-200||l===-201?new U(l,null):u}finally{Ft(a),Sn(s)}}resolveInjectorInitializers(){let e=se(null),t=Sn(this),r=Ft(void 0),i;try{let o=this.get(Hr,Lt,{self:!0});for(let s of o)s()}finally{Sn(t),Ft(r),se(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(ar(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=it(e);let t=Vi(e)?e:it(e&&e.provide),r=jP(e);if(!Vi(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ss(void 0,Wl,!0),i.factory=()=>fg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=se(null);try{if(t.value===AD)throw Rg(ar(e));return t.value===Wl&&(t.value=AD,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&BP(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{se(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=it(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function pg(n){let e=ac(n),t=e!==null?e.factory:Li(n);if(t!==null)return t;if(n instanceof $)throw new U(204,!1);if(n instanceof Function)return VP(n);throw new U(204,!1)}function VP(n){if(n.length>0)throw new U(204,!1);let t=CP(n);return t!==null?()=>t.factory(n):()=>new n}function jP(n){if($D(n))return ss(void 0,n.useValue);{let e=Vg(n);return ss(e,Wl)}}function Vg(n,e,t){let r;if(Vi(n)){let i=it(n);return Li(i)||pg(i)}else if($D(n))r=()=>it(n.useValue);else if(LP(n))r=()=>n.useFactory(...fg(n.deps||[]));else if(FP(n))r=(i,o)=>K(it(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=it(n&&(n.useClass||n.provide));if(UP(n))r=()=>new i(...fg(n.deps));else return Li(i)||pg(i)}return r}function rc(n){if(n.destroyed)throw new U(205,!1)}function ss(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function UP(n){return!!n.deps}function BP(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function $P(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function gg(n,e){for(let t of n)Array.isArray(t)?gg(t,e):t&&bg(t)?gg(t.\u0275providers,e):e(t)}function He(n,e){let t;n instanceof ji?(rc(n),t=n):t=new hg(n);let r,i=Sn(t),o=Ft(void 0);try{return e()}finally{Sn(i),Ft(o)}}function qD(){return xD()!==void 0||ul()!=null}var ln=0,J=1,Z=2,Xe=3,Qt=4,Yt=5,hc=6,cs=7,mt=8,qr=9,Rn=10,ke=11,us=12,jg=13,$i=14,Zt=15,zr=16,Hi=17,Nn=18,fc=19,Ug=20,sr=21,td=22,pc=23,Vt=24,qi=25,gc=26,jt=27,zD=1;var Gr=7,mc=8,zi=9,St=10;function Mn(n){return Array.isArray(n)&&typeof n[zD]=="object"}function dn(n){return Array.isArray(n)&&n[zD]===!0}function Bg(n){return(n.flags&4)!==0}function Wr(n){return n.componentOffset>-1}function yc(n){return(n.flags&1)===1}function Pn(n){return!!n.template}function ls(n){return(n[Z]&512)!==0}function Gi(n){return(n[Z]&256)===256}var GD="svg",WD="math";function Jt(n){for(;Array.isArray(n);)n=n[ln];return n}function $g(n,e){return Jt(e[n])}function hn(n,e){return Jt(e[n.index])}function nd(n,e){return n.data[e]}function Xt(n,e){let t=e[n];return Mn(t)?t:t[ln]}function KD(n){return(n[Z]&4)===4}function rd(n){return(n[Z]&128)===128}function QD(n){return dn(n[Xe])}function vc(n,e){return e==null?null:n[e]}function Hg(n){n[Hi]=0}function qg(n){n[Z]&1024||(n[Z]|=1024,rd(n)&&ds(n))}function YD(n,e){for(;n>0;)e=e[$i],n--;return e}function _c(n){return!!(n[Z]&9216||n[Vt]?.dirty)}function id(n){n[Rn].changeDetectionScheduler?.notify(8),n[Z]&64&&(n[Z]|=1024),_c(n)&&ds(n)}function ds(n){n[Rn].changeDetectionScheduler?.notify(0);let e=Br(n);for(;e!==null&&!(e[Z]&8192||(e[Z]|=8192,!rd(e)));)e=Br(e)}function zg(n,e){if(Gi(n))throw new U(911,!1);n[sr]===null&&(n[sr]=[]),n[sr].push(e)}function ZD(n,e){if(n[sr]===null)return;let t=n[sr].indexOf(e);t!==-1&&n[sr].splice(t,1)}function Br(n){let e=n[Xe];return dn(e)?e[Xe]:e}function Gg(n){return n[cs]??=[]}function Wg(n){return n.cleanup??=[]}function JD(n,e,t,r){let i=Gg(e);i.push(t),n.firstCreatePass&&Wg(n).push(r,i.length-1)}var ue={lFrame:pb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var mg=!1;function XD(){return ue.lFrame.elementDepthCount}function eb(){ue.lFrame.elementDepthCount++}function tb(){ue.lFrame.elementDepthCount--}function Kg(){return ue.bindingsEnabled}function nb(){return ue.skipHydrationRootTNode!==null}function rb(n){return ue.skipHydrationRootTNode===n}function ib(){ue.skipHydrationRootTNode=null}function Ee(){return ue.lFrame.lView}function At(){return ue.lFrame.tView}function fn(n){return ue.lFrame.contextLView=n,n[mt]}function pn(n){return ue.lFrame.contextLView=null,n}function ot(){let n=Qg();for(;n!==null&&n.type===64;)n=n.parent;return n}function Qg(){return ue.lFrame.currentTNode}function ob(){let n=ue.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function hs(n,e){let t=ue.lFrame;t.currentTNode=n,t.isParent=e}function Yg(){return ue.lFrame.isParent}function sb(){ue.lFrame.isParent=!1}function Zg(){return mg}function Jg(n){let e=mg;return mg=n,e}function ab(n){return ue.lFrame.bindingIndex=n}function Ec(){return ue.lFrame.bindingIndex++}function cb(n){let e=ue.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function ub(){return ue.lFrame.inI18n}function lb(n,e){let t=ue.lFrame;t.bindingIndex=t.bindingRootIndex=n,od(e)}function db(){return ue.lFrame.currentDirectiveIndex}function od(n){ue.lFrame.currentDirectiveIndex=n}function hb(n){let e=ue.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Xg(){return ue.lFrame.currentQueryIndex}function sd(n){ue.lFrame.currentQueryIndex=n}function HP(n){let e=n[J];return e.type===2?e.declTNode:e.type===1?n[Yt]:null}function em(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=HP(o),i===null||(o=o[$i],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ue.lFrame=fb();return r.currentTNode=e,r.lView=n,!0}function ad(n){let e=fb(),t=n[J];ue.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function fb(){let n=ue.lFrame,e=n===null?null:n.child;return e===null?pb(n):e}function pb(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function gb(){let n=ue.lFrame;return ue.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var tm=gb;function cd(){let n=gb();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function mb(n){return(ue.lFrame.contextLView=YD(n,ue.lFrame.contextLView))[mt]}function Wi(){return ue.lFrame.selectedIndex}function Kr(n){ue.lFrame.selectedIndex=n}function ud(){let n=ue.lFrame;return nd(n.tView,n.selectedIndex)}function yb(){return ue.lFrame.currentNamespace}var vb=!0;function ld(){return vb}function dd(n){vb=n}function yg(n,e=null,t=null,r){let i=nm(n,e,t,r);return i.resolveInjectorInitializers(),i}function nm(n,e=null,t=null,r,i=new Set){let o=[t||Lt,UD(n)];return r=r||(typeof n=="object"?void 0:ar(n)),new ji(o,e||dc(),r||null,i)}var $e=class n{static THROW_IF_NOT_FOUND=Oi;static NULL=new oc;static create(e,t){if(Array.isArray(e))return yg({name:""},t,e,"");{let r=e.name??"";return yg({name:r},e.parent,e.providers,r)}}static \u0275prov=q({token:n,providedIn:"any",factory:()=>K(Pg)});static __NG_ELEMENT_ID__=-1},qe=new $(""),xn=(()=>{class n{static __NG_ELEMENT_ID__=qP;static __NG_ENV_ID__=t=>t}return n})(),vg=class extends xn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Gi(this._lView)}onDestroy(e){let t=this._lView;return zg(t,e),()=>ZD(t,e)}};function qP(){return new vg(Ee())}var cn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Ut=new $("",{providedIn:"root",factory:()=>{let n=N(Ve),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(cn),e.handleError(t))}}}),_b={provide:Hr,useValue:()=>void N(cn),multi:!0};function rm(n){return typeof n=="function"&&n[gt]!==void 0}function xt(n,e){let[t,r,i]=zp(n,e?.equal),o=t,s=o[gt];return o.set=r,o.update=i,o.asReadonly=Eb.bind(o),o}function Eb(){let n=this[gt];if(n.readonlyFn===void 0){let e=()=>this();e[gt]=n,n.readonlyFn=e}return n.readonlyFn}function im(n){return rm(n)&&typeof n.set=="function"}var hd=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=zP}return n})();function zP(){return new hd(Ee(),ot())}var cr=class{},fd=new $("",{providedIn:"root",factory:()=>!1});var om=new $(""),sm=new $(""),kn=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new rt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new re(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})(),fs=(()=>{class n{internalPendingTasks=N(kn);scheduler=N(cr);errorHandler=N(Ut);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})();function Ic(...n){}var am=(()=>{class n{static \u0275prov=q({token:n,providedIn:"root",factory:()=>new _g})}return n})(),_g=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function Es(n){return{toString:n}.toString()}var pd="__parameters__";function ex(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function tx(n,e,t){return Es(()=>{let r=ex(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(pd)?u[pd]:Object.defineProperty(u,pd,{value:[]})[pd];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var fr=kD(tx("Optional"),8);function nx(n){return typeof n=="function"}var Id=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Xb(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Fn=(()=>{let n=()=>eT;return n.ngInherit=!0,n})();function eT(n){return n.type.prototype.ngOnChanges&&(n.setInput=ix),rx}function rx(){let n=nT(this),e=n?.current;if(e){let t=n.previous;if(t===$r)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function ix(n,e,t,r,i){let o=this.declaredInputs[r],s=nT(n)||ox(n,{previous:$r,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Id(l&&l.currentValue,t,u===$r),Xb(n,e,i,t)}var tT="__ngSimpleChanges__";function nT(n){return n[tT]||null}function ox(n,e){return n[tT]=e}var Ib=[];var De=function(n,e=null,t){for(let r=0;r<Ib.length;r++){let i=Ib[r];i(n,e,t)}};function sx(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=eT(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function rT(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function yd(n,e,t){iT(n,e,3,t)}function vd(n,e,t,r){(n[Z]&3)===t&&iT(n,e,t,r)}function cm(n,e){let t=n[Z];(t&3)===e&&(t&=16383,t+=1,n[Z]=t)}function iT(n,e,t,r){let i=r!==void 0?n[Hi]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Hi]+=65536),(a<o||o==-1)&&(ax(n,t,e,u),n[Hi]=(n[Hi]&4294901760)+u+2),u++}function wb(n,e){De(4,n,e);let t=se(null);try{e.call(n)}finally{se(t),De(5,n,e)}}function ax(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[Z]>>14<n[Hi]>>16&&(n[Z]&3)===e&&(n[Z]+=16384,wb(a,o)):wb(a,o)}var gs=-1,Qi=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function cx(n){return(n.flags&8)!==0}function ux(n){return(n.flags&16)!==0}function lx(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];dx(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function oT(n){return n===3||n===4||n===6}function dx(n){return n.charCodeAt(0)===64}function bc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Db(n,t,i,null,e[++r]):Db(n,t,i,null,null))}}return n}function Db(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function sT(n){return n!==gs}function wd(n){return n&32767}function hx(n){return n>>16}function Dd(n,e){let t=hx(n),r=e;for(;t>0;)r=r[$i],t--;return r}var vm=!0;function bb(n){let e=vm;return vm=n,e}var fx=256,aT=fx-1,cT=5,px=0,On={};function gx(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Bi)&&(r=t[Bi]),r==null&&(r=t[Bi]=px++);let i=r&aT,o=1<<i;e.data[n+(i>>cT)]|=o}function bd(n,e){let t=uT(n,e);if(t!==-1)return t;let r=e[J];r.firstCreatePass&&(n.injectorIndex=e.length,um(r.data,n),um(e,null),um(r.blueprint,null));let i=Hm(n,e),o=n.injectorIndex;if(sT(i)){let s=wd(i),a=Dd(i,e),u=a[J].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function um(n,e){n.push(0,0,0,0,0,0,0,0,e)}function uT(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Hm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=pT(i),r===null)return gs;if(t++,i=i[$i],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return gs}function _m(n,e,t){gx(n,e,t)}function mx(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(oT(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function lT(n,e,t){if(t&8||n!==void 0)return n;Jl(e,"NodeInjector")}function dT(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[qr],o=Ft(void 0);try{return i?i.get(e,r,t&8):Ng(e,r,t&8)}finally{Ft(o)}}return lT(r,e,t)}function hT(n,e,t,r=0,i){if(n!==null){if(e[Z]&2048&&!(r&2)){let s=Ex(n,e,t,r,On);if(s!==On)return s}let o=fT(n,e,t,r,On);if(o!==On)return o}return dT(e,t,r,i)}function fT(n,e,t,r,i){let o=vx(t);if(typeof o=="function"){if(!em(e,n,r))return r&1?lT(i,t,r):dT(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Jl(t);else return s}finally{tm()}}else if(typeof o=="number"){let s=null,a=uT(n,e),u=gs,l=r&1?e[Zt][Yt]:null;for((a===-1||r&4)&&(u=a===-1?Hm(n,e):e[a+8],u===gs||!Cb(r,!1)?a=-1:(s=e[J],a=wd(u),e=Dd(u,e)));a!==-1;){let h=e[J];if(Tb(o,a,h.data)){let p=yx(a,e,t,s,r,l);if(p!==On)return p}u=e[a+8],u!==gs&&Cb(r,e[J].data[a+8]===l)&&Tb(o,a,e)?(s=h,a=wd(u),e=Dd(u,e)):a=-1}}return i}function yx(n,e,t,r,i,o){let s=e[J],a=s.data[n+8],u=r==null?Wr(a)&&vm:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=_d(a,s,t,u,l);return h!==null?Tc(e,s,h,a,i):On}function _d(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let S=s[y];if(y<u&&t===S||y>=u&&S.type===t)return y}if(i){let y=s[u];if(y&&Pn(y)&&y.type===t)return u}return null}function Tc(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Qi){let a=o;if(a.resolving){let y=ND(s[t]);throw Rg(y)}let u=bb(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],h,p=a.injectImpl?Ft(a.injectImpl):null,m=em(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&sx(t,s[t],e)}finally{p!==null&&Ft(p),bb(u),a.resolving=!1,tm()}}return o}function vx(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Bi)?n[Bi]:void 0;return typeof e=="number"?e>=0?e&aT:_x:e}function Tb(n,e,t){let r=1<<n;return!!(t[e+(n>>cT)]&r)}function Cb(n,e){return!(n&2)&&!(n&1&&e)}var Ki=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return hT(this._tNode,this._lView,e,Fi(r),t)}};function _x(){return new Ki(ot(),Ee())}function Yr(n){return Es(()=>{let e=n.prototype.constructor,t=e[ic]||Em(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[ic]||Em(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Em(n){return wg(n)?()=>{let e=Em(it(n));return e&&e()}:Li(n)}function Ex(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[Z]&2048&&!ls(s);){let a=fT(o,s,t,r|2,On);if(a!==On)return a;let u=o.parent;if(!u){let l=s[Ug];if(l){let h=l.get(t,On,r);if(h!==On)return h}u=pT(s),s=s[$i]}o=u}return i}function pT(n){let e=n[J],t=e.type;return t===2?e.declTNode:t===1?n[Yt]:null}function Rc(n){return mx(ot(),n)}function Ix(){return Is(ot(),Ee())}function Is(n,e){return new Bt(hn(n,e))}var Bt=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=Ix}return n})();function wx(n){return n instanceof Bt?n.nativeElement:n}function Dx(){return this._results[Symbol.iterator]()}var Td=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Fe}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=FD(e);(this._changesDetected=!OD(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Dx};function gT(n){return(n.flags&128)===128}var qm=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(qm||{}),mT=new Map,bx=0;function Tx(){return bx++}function Cx(n){mT.set(n[fc],n)}function Im(n){mT.delete(n[fc])}var Sb="__ngContext__";function ms(n,e){Mn(e)?(n[Sb]=e[fc],Cx(e)):n[Sb]=e}function yT(n){return _T(n[us])}function vT(n){return _T(n[Qt])}function _T(n){for(;n!==null&&!dn(n);)n=n[Qt];return n}var wm;function zm(n){wm=n}function ET(){if(wm!==void 0)return wm;if(typeof document<"u")return document;throw new U(210,!1)}var Ld=new $("",{providedIn:"root",factory:()=>Sx}),Sx="ng",Vd=new $(""),eo=new $("",{providedIn:"platform",factory:()=>"unknown"});var jd=new $("",{providedIn:"root",factory:()=>ET().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Ax="h",Rx="b";var IT=!1,wT=new $("",{providedIn:"root",factory:()=>IT});var Gm=new $("");var Nx=(n,e,t,r)=>{};function Mx(n,e,t,r){Nx(n,e,t,r)}function Wm(n){return(n.flags&32)===32}var Px=()=>null;function DT(n,e,t=!1){return Px(n,e,t)}function bT(n,e){let t=n.contentQueries;if(t!==null){let r=se(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];sd(o),a.contentQueries(2,e[s],s)}}}finally{se(r)}}}function Dm(n,e,t){sd(0);let r=se(null);try{e(n,t)}finally{se(r)}}function TT(n,e,t){if(Bg(e)){let r=se(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{se(r)}}}var dr=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(dr||{});var gd;function xx(){if(gd===void 0&&(gd=null,sc.trustedTypes))try{gd=sc.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return gd}function Ab(n){return xx()?.createScriptURL(n)||n}var Cd=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Yl})`}};function Nc(n){return n instanceof Cd?n.changingThisBreaksApplicationSecurity:n}function Km(n,e){let t=CT(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Yl})`)}return t===e}function CT(n){return n instanceof Cd&&n.getTypeName()||null}var kx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ST(n){return n=String(n),n.match(kx)?n:"unsafe:"+n}function Ox(n,e){return n.createText(e)}function Fx(n,e,t){n.setValue(e,t)}function AT(n,e,t){return n.createElement(e,t)}function Sd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function RT(n,e,t){n.appendChild(e,t)}function Rb(n,e,t,r,i){r!==null?Sd(n,e,t,r,i):RT(n,e,t)}function Lx(n,e,t,r){n.removeChild(null,e,t,r)}function Vx(n,e,t){n.setAttribute(e,"style",t)}function jx(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function NT(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&lx(n,e,r),i!==null&&jx(n,e,i),o!==null&&Vx(n,e,o)}var Ud=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Ud||{});function MT(n){let e=xT();return e?e.sanitize(Ud.URL,n)||"":Km(n,"URL")?Nc(n):ST(cc(n))}function PT(n){let e=xT();if(e)return Ab(e.sanitize(Ud.RESOURCE_URL,n)||"");if(Km(n,"ResourceURL"))return Ab(Nc(n));throw new U(904,!1)}function Ux(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?PT:MT}function Qm(n,e,t){return Ux(e,t)(n)}function xT(){let n=Ee();return n&&n[Rn].sanitizer}function kT(n){return n instanceof Function?n():n}function Bx(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var OT="ng-template";function $x(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Bx(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Ym(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Ym(n){return n.type===4&&n.value!==OT}function Hx(n,e,t){let r=n.type===4&&!t?OT:n.value;return e===r}function qx(n,e,t){let r=4,i=n.attrs,o=i!==null?Wx(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!gn(r)&&!gn(u))return!1;if(s&&gn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!Hx(n,u,t)||u===""&&e.length===1){if(gn(r))return!1;s=!0}}else if(r&8){if(i===null||!$x(n,i,u,t)){if(gn(r))return!1;s=!0}}else{let l=e[++a],h=zx(u,i,Ym(n),t);if(h===-1){if(gn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(gn(r))return!1;s=!0}}}}return gn(r)||s}function gn(n){return(n&1)===0}function zx(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Kx(e,n)}function Gx(n,e,t=!1){for(let r=0;r<e.length;r++)if(qx(n,e[r],t))return!0;return!1}function Wx(n){for(let e=0;e<n.length;e++){let t=n[e];if(oT(t))return e}return n.length}function Kx(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function Nb(n,e){return n?":not("+e.trim()+")":e}function Qx(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!gn(s)&&(e+=Nb(o,i),i=""),r=s,o=o||!gn(r);t++}return i!==""&&(e+=Nb(o,i)),e}function Yx(n){return n.map(Qx).join(",")}function Zx(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!gn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Zr={};function Zm(n,e,t,r,i,o,s,a,u,l,h){let p=jt+r,m=p+i,y=Jx(p,m),S=typeof l=="function"?l():l;return y[J]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function Jx(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Zr);return t}function Xx(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Zm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Jm(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[ln]=i,p[Z]=r|4|128|8|64|1024,(l!==null||n&&n[Z]&2048)&&(p[Z]|=2048),Hg(p),p[Xe]=p[$i]=n,p[mt]=t,p[Rn]=s||n&&n[Rn],p[ke]=a||n&&n[ke],p[qr]=u||n&&n[qr]||null,p[Yt]=o,p[fc]=Tx(),p[hc]=h,p[Ug]=l,p[Zt]=e.type==2?n[Zt]:p,p}function ek(n,e,t){let r=hn(e,n),i=Xx(t),o=n[Rn].rendererFactory,s=Xm(n,Jm(n,i,null,FT(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function FT(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function LT(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Xm(n,e){return n[us]?n[jg][Qt]=e:n[us]=e,n[jg]=e,e}function pe(n=1){VT(At(),Ee(),Wi()+n,!1)}function VT(n,e,t,r){if(!r)if((e[Z]&3)===3){let o=n.preOrderCheckHooks;o!==null&&yd(e,o,t)}else{let o=n.preOrderHooks;o!==null&&vd(e,o,0,t)}Kr(t)}var Bd=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Bd||{});function bm(n,e,t,r){let i=se(null);try{let[o,s,a]=n.inputs[t],u=null;(s&Bd.SignalBased)!==0&&(u=e[o][gt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):Xb(e,u,o,r)}finally{se(i)}}var hr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(hr||{}),tk;function ey(n,e){return tk(n,e)}var ys=new Set,$d=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})($d||{}),to=new $(""),Mb=new Set;function ws(n){Mb.has(n)||(Mb.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var jT=!1,Tm=class extends Fe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,qD()&&(this.destroyRef=N(xn,{optional:!0})??void 0,this.pendingTasks=N(kn,{optional:!0})??void 0)}emit(e){let t=se(null);try{super.next(e)}finally{se(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof xe&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},je=Tm;function UT(n){let e,t;function r(){n=Ic;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Pb(n){return queueMicrotask(()=>n()),()=>{n=Ic}}var ty="isAngularZone",Ad=ty+"_ID",nk=0,be=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new je(!1);onMicrotaskEmpty=new je(!1);onStable=new je(!1);onError=new je(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=jT}=e;if(typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,ok(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ty)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new U(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,rk,Ic,Ic);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},rk={};function ny(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function ik(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){UT(()=>{n.callbackScheduled=!1,Cm(n),n.isCheckStableRunning=!0,ny(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Cm(n)}function ok(n){let e=()=>{ik(n)},t=nk++;n._inner=n._inner.fork({name:"angular",properties:{[ty]:!0,[Ad]:t,[Ad+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(sk(u))return r.invokeTask(o,s,a,u);try{return xb(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),kb(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return xb(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!ak(u)&&e(),kb(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Cm(n),ny(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Cm(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function xb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function kb(n){n._nesting--,ny(n)}var Rd=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new je;onMicrotaskEmpty=new je;onStable=new je;onError=new je;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function sk(n){return BT(n,"__ignore_ng_zone__")}function ak(n){return BT(n,"__scheduler_tick__")}function BT(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var ry=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})(),$T=[0,1,2,3],HT=(()=>{class n{ngZone=N(be);scheduler=N(cr);errorHandler=N(cn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){N(to,{optional:!0})}execute(){let t=this.sequences.size>0;t&&De(16),this.executing=!0;for(let r of $T)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&De(17)}register(t){let{view:r}=t;r!==void 0?((r[qi]??=[]).push(t),ds(r),r[Z]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run($d.AFTER_NEXT_RENDER,t):t()}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})(),Nd=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[qi];e&&(this.view[qi]=e.filter(t=>t!==this))}};function Hd(n,e){let t=e?.injector??N($e);return ws("NgAfterNextRender"),uk(n,t,e,!0)}function ck(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function uk(n,e,t,r){let i=e.get(ry);i.impl??=e.get(HT);let o=e.get(to,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(xn):null,a=e.get(hd,null,{optional:!0}),u=new Nd(i.impl,ck(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var lk=new $("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function qT(n,e,t){let r=n.get(lk);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function dk(n,e){for(let[t,r]of e)qT(n,r.animateFns)}function Ob(n,e,t,r){let i=n?.[gc]?.enter;e!==null&&i&&i.has(t.index)&&dk(r,i)}function ps(n,e,t,r,i,o,s,a){if(i!=null){let u,l=!1;dn(i)?u=i:Mn(i)&&(l=!0,i=i[ln]);let h=Jt(i);n===0&&r!==null?(Ob(a,r,o,t),s==null?RT(e,r,h):Sd(e,r,h,s||null,!0)):n===1&&r!==null?(Ob(a,r,o,t),Sd(e,r,h,s||null,!0)):n===2?Fb(a,o,t,p=>{Lx(e,h,l,p)}):n===3&&Fb(a,o,t,()=>{e.destroyNode(h)}),u!=null&&bk(e,n,t,u,o,r,s)}}function hk(n,e){zT(n,e),e[ln]=null,e[Yt]=null}function fk(n,e,t,r,i,o){r[ln]=i,r[Yt]=e,qd(n,r,t,1,i,o)}function zT(n,e){e[Rn].changeDetectionScheduler?.notify(9),qd(n,e,e[ke],2,null,null)}function pk(n){let e=n[us];if(!e)return lm(n[J],n);for(;e;){let t=null;if(Mn(e))t=e[us];else{let r=e[St];r&&(t=r)}if(!t){for(;e&&!e[Qt]&&e!==n;)Mn(e)&&lm(e[J],e),e=e[Xe];e===null&&(e=n),Mn(e)&&lm(e[J],e),t=e&&e[Qt]}e=t}}function iy(n,e){let t=n[zi],r=t.indexOf(e);t.splice(r,1)}function GT(n,e){if(Gi(e))return;let t=e[ke];t.destroyNode&&qd(n,e,t,3,null,null),pk(e)}function lm(n,e){if(Gi(e))return;let t=se(null);try{e[Z]&=-129,e[Z]|=256,e[Vt]&&Za(e[Vt]),yk(n,e),mk(n,e),e[J].type===1&&e[ke].destroy();let r=e[zr];if(r!==null&&dn(e[Xe])){r!==e[Xe]&&iy(r,e);let i=e[Nn];i!==null&&i.detachView(n)}Im(e)}finally{se(t)}}function Fb(n,e,t,r){let i=n?.[gc];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&ys.add(n),qT(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),gk(n,r)}else n&&ys.delete(n),r(!1)},i)}function gk(n,e){let t=n[gc]?.running;if(t){t.then(()=>{n[gc].running=void 0,ys.delete(n),e(!0)});return}e(!1)}function mk(n,e){let t=n.cleanup,r=e[cs];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[cs]=null);let i=e[sr];if(i!==null){e[sr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[pc];if(o!==null){e[pc]=null;for(let s of o)s.destroy()}}function yk(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Qi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];De(4,a,u);try{u.call(a)}finally{De(5,a,u)}}else{De(4,i,o);try{o.call(i)}finally{De(5,i,o)}}}}}function vk(n,e,t){return _k(n,e.parent,t)}function _k(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[ln];if(Wr(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===dr.None||i===dr.Emulated)return null}return hn(r,t)}function Ek(n,e,t){return wk(n,e,t)}function Ik(n,e,t){return n.type&40?hn(n,t):null}var wk=Ik,Lb;function oy(n,e,t,r){let i=vk(n,r,e),o=e[ke],s=r.parent||e[Yt],a=Ek(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)Rb(o,i,t[u],a,!1);else Rb(o,i,t,a,!1);Lb!==void 0&&Lb(o,r,e,t,i)}function wc(n,e){if(e!==null){let t=e.type;if(t&3)return hn(e,n);if(t&4)return Sm(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return wc(n,r);{let i=n[e.index];return dn(i)?Sm(-1,i):Jt(i)}}else{if(t&128)return wc(n,e.next);if(t&32)return ey(e,n)()||Jt(n[e.index]);{let r=WT(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Br(n[Zt]);return wc(i,r)}else return wc(n,e.next)}}}return null}function WT(n,e){if(e!==null){let r=n[Zt][Yt],i=e.projection;return r.projection[i]}return null}function Sm(n,e){let t=St+n+1;if(t<e.length){let r=e[t],i=r[J].firstChild;if(i!==null)return wc(r,i)}return e[Gr]}function sy(n,e,t,r,i,o,s){for(;t!=null;){let a=r[qr];if(t.type===128){t=t.next;continue}let u=r[t.index],l=t.type;if(s&&e===0&&(u&&ms(Jt(u),r),t.flags|=2),!Wm(t))if(l&8)sy(n,e,t.child,r,i,o,!1),ps(e,n,a,i,u,t,o,r);else if(l&32){let h=ey(t,r),p;for(;p=h();)ps(e,n,a,i,p,t,o,r);ps(e,n,a,i,u,t,o,r)}else l&16?Dk(n,e,r,t,i,o):ps(e,n,a,i,u,t,o,r);t=s?t.projectionNext:t.next}}function qd(n,e,t,r,i,o){sy(t,r,n.firstChild,e,i,o,!1)}function Dk(n,e,t,r,i,o){let s=t[Zt],u=s[Yt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];ps(e,n,t[qr],i,h,r,o,t)}else{let l=u,h=s[Xe];gT(r)&&(l.flags|=128),sy(n,e,l,h,i,o,!0)}}function bk(n,e,t,r,i,o,s){let a=r[Gr],u=Jt(r);a!==u&&ps(e,n,t,o,a,i,s);for(let l=St;l<r.length;l++){let h=r[l];qd(h[J],h,n,e,o,a)}}function Tk(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:hr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=hr.Important),n.setStyle(t,r,i,o))}}function KT(n,e,t,r,i){let o=Wi(),s=r&2;try{Kr(-1),s&&e.length>jt&&VT(n,e,jt,!1),De(s?2:0,i,t),t(r,i)}finally{Kr(o),De(s?3:1,i,t)}}function ay(n,e,t){Pk(n,e,t),(t.flags&64)===64&&xk(n,e,t)}function QT(n,e,t=hn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function Ck(n,e,t,r){let o=r.get(wT,IT)||t===dr.ShadowDom,s=n.selectRootElement(e,o);return Sk(s),s}function Sk(n){Ak(n)}var Ak=()=>null;function Rk(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function YT(n,e,t,r,i,o){let s=e[J];if(cy(n,s,e,t,r)){Wr(n)&&Mk(e,n.index);return}n.type&3&&(t=Rk(t)),Nk(n,e,t,r,i,o)}function Nk(n,e,t,r,i,o){if(n.type&3){let s=hn(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function Mk(n,e){let t=Xt(e,n);t[Z]&16||(t[Z]|=64)}function Pk(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Wr(t)&&ek(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||bd(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=Tc(e,n,s,t);if(ms(u,e),o!==null&&Lk(e,s-r,u,a,t,o),Pn(a)){let l=Xt(t.index,e);l[mt]=Tc(e,n,s,t)}}}function xk(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=db();try{Kr(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];od(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&kk(u,l)}}finally{Kr(-1),od(s)}}function kk(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function ZT(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];Gx(e,o.selectors,!1)&&(r??=[],Pn(o)?r.unshift(o):r.push(o))}return r}function Ok(n,e,t,r,i,o){let s=hn(n,e);Fk(e[ke],s,o,n.value,t,r,i)}function Fk(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?cc(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function Lk(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];bm(r,t,u,l)}}function Vk(n,e,t,r,i){let o=jt+t,s=e[J],a=i(s,e,n,r,t);e[o]=a,hs(n,!0);let u=n.type===2;return u?(NT(e[ke],a,n),(XD()===0||yc(n))&&ms(a,e),eb()):ms(a,e),ld()&&(!u||!Wm(n))&&oy(s,e,a,n),n}function jk(n){let e=n;return Yg()?sb():(e=e.parent,hs(e,!1)),e}function Uk(n,e){let t=n[qr];if(!t)return;let r;try{r=t.get(Ut,null)}catch{r=null}r?.(e)}function cy(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];bm(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];bm(h,l,r,i),a=!0}return a}function Bk(n,e){let t=Xt(e,n),r=t[J];$k(r,t);let i=t[ln];i!==null&&t[hc]===null&&(t[hc]=DT(i,t[qr])),De(18),uy(r,t,t[mt]),De(19,t[mt])}function $k(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function uy(n,e,t){ad(e);try{let r=n.viewQuery;r!==null&&Dm(1,r,t);let i=n.template;i!==null&&KT(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Nn]?.finishViewCreation(n),n.staticContentQueries&&bT(n,e),n.staticViewQueries&&Dm(2,n.viewQuery,t);let o=n.components;o!==null&&Hk(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Z]&=-5,cd()}}function Hk(n,e){for(let t=0;t<e.length;t++)Bk(n,e[t])}function qk(n,e,t,r){let i=se(null);try{let o=e.tView,a=n[Z]&4096?4096:16,u=Jm(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[zr]=l;let h=n[Nn];return h!==null&&(u[Nn]=h.createEmbeddedView(o)),uy(o,u,t),u}finally{se(i)}}function Vb(n,e){return!e||e.firstChild===null||gT(n)}function Cc(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Jt(o)),dn(o)&&JT(o,r);let s=t.type;if(s&8)Cc(n,e,t.child,r);else if(s&32){let a=ey(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=WT(e,t);if(Array.isArray(a))r.push(...a);else{let u=Br(e[Zt]);Cc(u[J],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function JT(n,e){for(let t=St;t<n.length;t++){let r=n[t],i=r[J].firstChild;i!==null&&Cc(r[J],r,i,e)}n[Gr]!==n[ln]&&e.push(n[Gr])}function XT(n){if(n[qi]!==null){for(let e of n[qi])e.impl.addSequence(e);n[qi].length=0}}var eC=[];function zk(n){return n[Vt]??Gk(n)}function Gk(n){let e=eC.pop()??Object.create(Kk);return e.lView=n,e}function Wk(n){n.lView[Vt]!==n&&(n.lView=null,eC.push(n))}var Kk=oe(k({},$o),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{ds(n.lView)},consumerOnSignalRead(){this.lView[Vt]=this}});function Qk(n){let e=n[Vt]??Object.create(Yk);return e.lView=n,e}var Yk=oe(k({},$o),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Br(n.lView);for(;e&&!tC(e[J]);)e=Br(e);e&&qg(e)},consumerOnSignalRead(){this.lView[Vt]=this}});function tC(n){return n.type!==2}function nC(n){if(n[pc]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[pc])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Z]&8192)}}var Zk=100;function rC(n,e=0){let r=n[Rn].rendererFactory,i=!1;i||r.begin?.();try{Jk(n,e)}finally{i||r.end?.()}}function Jk(n,e){let t=Zg();try{Jg(!0),Am(n,e);let r=0;for(;_c(n);){if(r===Zk)throw new U(103,!1);r++,Am(n,1)}}finally{Jg(t)}}function Xk(n,e,t,r){if(Gi(e))return;let i=e[Z],o=!1,s=!1;ad(e);let a=!0,u=null,l=null;o||(tC(n)?(l=zk(e),u=qo(l)):pl()===null?(a=!1,l=Qk(e),u=qo(l)):e[Vt]&&(Za(e[Vt]),e[Vt]=null));try{Hg(e),ab(n.bindingStartIndex),t!==null&&KT(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&yd(e,y,null)}else{let y=n.preOrderHooks;y!==null&&vd(e,y,0,null),cm(e,0)}if(s||eO(e),nC(e),iC(e,0),n.contentQueries!==null&&bT(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&yd(e,y)}else{let y=n.contentHooks;y!==null&&vd(e,y,1),cm(e,1)}nO(n,e);let p=n.components;p!==null&&sC(e,p,0);let m=n.viewQuery;if(m!==null&&Dm(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&yd(e,y)}else{let y=n.viewHooks;y!==null&&vd(e,y,2),cm(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[td]){for(let y of e[td])y();e[td]=null}o||(XT(e),e[Z]&=-73)}catch(h){throw o||ds(e),h}finally{l!==null&&(Qa(l,u),a&&Wk(l)),cd()}}function iC(n,e){for(let t=yT(n);t!==null;t=vT(t))for(let r=St;r<t.length;r++){let i=t[r];oC(i,e)}}function eO(n){for(let e=yT(n);e!==null;e=vT(e)){if(!(e[Z]&2))continue;let t=e[zi];for(let r=0;r<t.length;r++){let i=t[r];qg(i)}}}function tO(n,e,t){De(18);let r=Xt(e,n);oC(r,t),De(19,r[mt])}function oC(n,e){rd(n)&&Am(n,e)}function Am(n,e){let r=n[J],i=n[Z],o=n[Vt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Ya(o)),s||=!1,o&&(o.dirty=!1),n[Z]&=-9217,s)Xk(r,n,r.template,n[mt]);else if(i&8192){let a=se(null);try{nC(n),iC(n,1);let u=r.components;u!==null&&sC(n,u,1),XT(n)}finally{se(a)}}}function sC(n,e,t){for(let r=0;r<e.length;r++)tO(n,e[r],t)}function nO(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Kr(~i);else{let o=i,s=t[++r],a=t[++r];lb(s,o);let u=e[o];De(24,u),a(2,u),De(25,u)}}}finally{Kr(-1)}}function ly(n,e){let t=Zg()?64:1088;for(n[Rn].changeDetectionScheduler?.notify(e);n;){n[Z]|=t;let r=Br(n);if(ls(n)&&!r)return n;n=r}return null}function aC(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function rO(n,e,t,r=!0){let i=e[J];if(iO(i,e,n,t),r){let s=Sm(t,n),a=e[ke],u=a.parentNode(n[Gr]);u!==null&&fk(i,n[Yt],a,e,u,s)}let o=e[hc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Rm(n,e){if(n.length<=St)return;let t=St+e,r=n[t];if(r){let i=r[zr];i!==null&&i!==n&&iy(i,r),e>0&&(n[t-1][Qt]=r[Qt]);let o=uc(n,St+e);hk(r[J],r);let s=o[Nn];s!==null&&s.detachView(o[J]),r[Xe]=null,r[Qt]=null,r[Z]&=-129}return r}function iO(n,e,t,r){let i=St+r,o=t.length;r>0&&(t[i-1][Qt]=e),r<o-St?(e[Qt]=t[i],Mg(t,St+r,e)):(t.push(e),e[Qt]=null),e[Xe]=t;let s=e[zr];s!==null&&t!==s&&cC(s,e);let a=e[Nn];a!==null&&a.insertView(n),id(e),e[Z]|=128}function cC(n,e){let t=n[zi],r=e[Xe];if(Mn(r))n[Z]|=2;else{let i=r[Xe][Zt];e[Zt]!==i&&(n[Z]|=2)}t===null?n[zi]=[e]:t.push(e)}var Qr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[J];return Cc(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[mt]}set context(e){this._lView[mt]=e}get destroyed(){return Gi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Xe];if(dn(e)){let t=e[mc],r=t?t.indexOf(this):-1;r>-1&&(Rm(e,r),uc(t,r))}this._attachedToViewContainer=!1}GT(this._lView[J],this._lView)}onDestroy(e){zg(this._lView,e)}markForCheck(){ly(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Z]&=-129}reattach(){id(this._lView),this._lView[Z]|=128}detectChanges(){this._lView[Z]|=1024,rC(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ls(this._lView),t=this._lView[zr];t!==null&&!e&&iy(t,this._lView),zT(this._lView[J],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=e;let t=ls(this._lView),r=this._lView[zr];r!==null&&!t&&cC(r,this._lView),id(this._lView)}};var Yi=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=oO;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=qk(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Qr(o)}}return n})();function oO(){return dy(ot(),Ee())}function dy(n,e){return n.type&4?new Yi(e,n,Is(n,e)):null}function hy(n,e,t,r,i){let o=n.data[e];if(o===null)o=sO(n,e,t,r,i),ub()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=ob();o.injectorIndex=s===null?-1:s.injectorIndex}return hs(o,!0),o}function sO(n,e,t,r,i){let o=Qg(),s=Yg(),a=s?o:o&&o.parent,u=n.data[e]=cO(n,a,t,e,r,i);return aO(n,u,o,s),u}function aO(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function cO(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return nb()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var T8=new RegExp(`^(\\d+)*(${Rx}|${Ax})*(.*)`);var uO=()=>null;function jb(n,e){return uO(n,e)}var uC=class{},zd=class{},Nm=class{resolveComponentFactory(e){throw new U(917,!1)}},Mc=class{static NULL=new Nm},Zi=class{},pr=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>lO()}return n})();function lO(){let n=Ee(),e=ot(),t=Xt(e.index,n);return(Mn(t)?t:n)[ke]}var lC=(()=>{class n{static \u0275prov=q({token:n,providedIn:"root",factory:()=>null})}return n})();var Ed={},Mm=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Ed,r);return i!==Ed||t===Ed?i:this.parentInjector.get(e,t,r)}};function Ub(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Ig(i,a);else if(o==2){let u=a,l=e[++s];r=Ig(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ie(n,e=0){let t=Ee();if(t===null)return K(n,e);let r=ot();return hT(r,t,it(n),e)}function fy(){let n="invalid";throw new Error(n)}function dC(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}fO(n,e,t,a,o,u,l)}o!==null&&r!==null&&dO(t,r,o)}function dO(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new U(-301,!1);r.push(e[i],o)}}function hO(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function fO(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let y=r[m];!u&&Pn(y)&&(u=!0,hO(n,t,m)),_m(bd(t,e),n,y.type)}_O(t,n.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=LT(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(t.mergedAttrs=bc(t.mergedAttrs,y.hostAttrs),gO(n,t,e,p,y),vO(p,y,i),s!==null&&s.has(y)){let[M,R]=s.get(y);t.directiveToIndex.set(y.type,[p,M+t.directiveStart,R+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let S=y.type.prototype;!l&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(S.ngOnChanges||S.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}pO(n,t,o)}function pO(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))Bb(0,e,i,r),Bb(1,e,i,r),Hb(e,r,!1);else{let o=t.get(i);$b(0,e,o,r),$b(1,e,o,r),Hb(e,r,!0)}}}function Bb(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),hC(e,o)}}function $b(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),hC(e,s)}}function hC(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function Hb(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Ym(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function gO(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Li(i.type,!0)),s=new Qi(o,Pn(i),ie,null);n.blueprint[r]=s,t[r]=s,mO(n,e,r,LT(n,t,i.hostVars,Zr),i)}function mO(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;yO(s)!=a&&s.push(a),s.push(t,r,o)}}function yO(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function vO(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Pn(e)&&(t[""]=n)}}function _O(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function fC(n,e,t,r,i,o,s,a){let u=e[J],l=u.consts,h=vc(l,s),p=hy(u,n,t,r,h);return o&&dC(u,e,p,vc(l,a),i),p.mergedAttrs=bc(p.mergedAttrs,p.attrs),p.attrs!==null&&Ub(p,p.attrs,!1),p.mergedAttrs!==null&&Ub(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function pC(n,e){rT(n,e),Bg(e)&&n.queries.elementEnd(e)}function py(n){return mC(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function gC(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function mC(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Pc(n,e,t){if(t===Zr)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function dm(n,e,t){return function r(i){let o=Wr(n)?Xt(n.index,e):e;ly(o,5);let s=e[mt],a=qb(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=qb(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function qb(n,e,t,r){let i=se(null);try{return De(6,e,t),t(r)!==!1}catch(o){return Uk(n,o),!1}finally{De(7,e,t),se(i)}}function EO(n,e,t,r,i,o,s,a){let u=yc(n),l=!1,h=null;if(!r&&u&&(h=wO(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=hn(n,t),m=r?r(p):p;Mx(t,m,o,a);let y=i.listen(m,o,a);if(!IO(o)){let S=r?M=>r(Jt(M[n.index])):n.index;yC(S,e,t,o,a,y,!1)}}return l}function IO(n){return n.startsWith("animation")||n.startsWith("transition")}function wO(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[cs],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function yC(n,e,t,r,i,o,s){let a=e.firstCreatePass?Wg(e):null,u=Gg(t),l=u.length;u.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function zb(n,e,t,r,i,o){let s=e[t],a=e[J],l=a.data[t].outputs[r],p=s[l].subscribe(o);yC(n.index,a,e,i,o,p,!0)}var Pm=Symbol("BINDING");var Md=class extends Mc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ur(e);return new Ji(t,this.ngModule)}};function DO(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Bd.SignalBased)!==0};return i&&(o.transform=i),o})}function bO(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function TO(n,e,t){let r=e instanceof Ve?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Mm(t,r):t}function CO(n){let e=n.get(Zi,null);if(e===null)throw new U(407,!1);let t=n.get(lC,null),r=n.get(cr,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function SO(n,e){let t=vC(n);return AT(e,t,t==="svg"?GD:t==="math"?WD:null)}function vC(n){return(n.selectors[0][0]||"div").toLowerCase()}var Ji=class extends zd{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=DO(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=bO(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=Yx(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){De(22);let a=se(null);try{let u=this.componentDef,l=AO(r,u,s,o),h=TO(u,i||this.ngModule,e),p=CO(h),m=p.rendererFactory.createRenderer(null,u),y=r?Ck(m,r,u.encapsulation,h):SO(u,m),S=s?.some(Gb)||o?.some(V=>typeof V!="function"&&V.bindings.some(Gb)),M=Jm(null,l,null,512|FT(u),null,null,p,m,h,null,DT(y,h,!0));M[jt]=y,ad(M);let R=null;try{let V=fC(jt,M,2,"#host",()=>l.directiveRegistry,!0,0);NT(m,y,V),ms(y,M),ay(l,M,V),TT(l,V,M),pC(l,V),t!==void 0&&NO(V,this.ngContentSelectors,t),R=Xt(V.index,M),M[mt]=R[mt],uy(l,M,null)}catch(V){throw R!==null&&Im(R),Im(M),V}finally{De(23),cd()}return new Pd(this.componentType,M,!!S)}finally{se(a)}}};function AO(n,e,t,r){let i=n?["ng-version","20.3.15"]:Zx(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[Pm].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){a+=m[Pm].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=Og(p);u.push(m)}return Zm(0,null,RO(o,s),1,a,u,null,null,null,[i],null)}function RO(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function Gb(n){let e=n[Pm].kind;return e==="input"||e==="twoWay"}var Pd=class extends uC{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=nd(t[J],jt),this.location=Is(this._tNode,t),this.instance=Xt(this._tNode.index,t)[mt],this.hostView=this.changeDetectorRef=new Qr(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=cy(r,i[J],i,e,t);this.previousInputValues.set(e,t);let s=Xt(r.index,i);ly(s,1)}get injector(){return new Ki(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function NO(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Jr=(()=>{class n{static __NG_ELEMENT_ID__=MO}return n})();function MO(){let n=ot();return EC(n,Ee())}var PO=Jr,_C=class extends PO{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Is(this._hostTNode,this._hostLView)}get injector(){return new Ki(this._hostTNode,this._hostLView)}get parentInjector(){let e=Hm(this._hostTNode,this._hostLView);if(sT(e)){let t=Dd(e,this._hostLView),r=wd(e),i=t[J].data[r+8];return new Ki(i,t)}else return new Ki(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Wb(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-St}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=jb(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,Vb(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let u=e&&!nx(e),l;if(u)l=t;else{let R=t||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let h=u?e:new Ji(ur(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let V=(u?p:this.parentInjector).get(Ve,null);V&&(o=V)}let m=ur(h.componentType??{}),y=jb(this._lContainer,m?.id??null),S=y?.firstChild??null,M=h.create(p,i,S,o,s,a);return this.insertImpl(M.hostView,l,Vb(this._hostTNode,y)),M}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(QD(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Xe],l=new _C(u,u[Yt],u[Xe]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return rO(s,i,o,r),e.attachToViewContainerRef(),Mg(hm(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Wb(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Rm(this._lContainer,t);r&&(uc(hm(this._lContainer),t),GT(r[J],r))}detach(e){let t=this._adjustIndex(e,-1),r=Rm(this._lContainer,t);return r&&uc(hm(this._lContainer),t)!=null?new Qr(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Wb(n){return n[mc]}function hm(n){return n[mc]||(n[mc]=[])}function EC(n,e){let t,r=e[n.index];return dn(r)?t=r:(t=aC(r,e,null,n),e[n.index]=t,Xm(e,t)),kO(t,e,n,r),new _C(t,n,e)}function xO(n,e){let t=n[ke],r=t.createComment(""),i=hn(e,n),o=t.parentNode(i);return Sd(t,o,r,t.nextSibling(i),!1),r}var kO=LO,OO=()=>!1;function FO(n,e,t){return OO(n,e,t)}function LO(n,e,t,r){if(n[Gr])return;let i;t.type&8?i=Jt(r):i=xO(e,t),n[Gr]=i}var xm=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},km=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)gy(e,t).matches!==null&&this.queries[t].setDirty()}},Om=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=zO(e):this.predicate=e}},Fm=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Lm=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,VO(t,o)),this.matchTNodeWithReadOption(e,t,_d(t,e,o,!1,!1))}else r===Yi?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,_d(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Bt||i===Jr||i===Yi&&t.type&4)this.addMatch(t.index,-2);else{let o=_d(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function VO(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function jO(n,e){return n.type&11?Is(n,e):n.type&4?dy(n,e):null}function UO(n,e,t,r){return t===-1?jO(e,n):t===-2?BO(n,e,r):Tc(n,n[J],t,e)}function BO(n,e,t){if(t===Bt)return Is(e,n);if(t===Yi)return dy(e,n);if(t===Jr)return EC(e,n)}function IC(n,e,t,r){let i=e[Nn].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(UO(e,h,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function Vm(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=IC(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=St;p<h.length;p++){let m=h[p];m[zr]===m[Xe]&&Vm(m[J],m,l,r)}if(h[zi]!==null){let p=h[zi];for(let m=0;m<p.length;m++){let y=p[m];Vm(y[J],y,l,r)}}}}}return r}function $O(n,e){return n[Nn].queries[e].queryList}function HO(n,e,t){let r=new Td((t&4)===4);return JD(n,e,r,r.destroy),(e[Nn]??=new km).queries.push(new xm(r))-1}function qO(n,e,t,r){let i=At();if(i.firstCreatePass){let o=ot();GO(i,new Om(e,t,r),o.index),WO(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return HO(i,Ee(),t)}function zO(n){return n.split(",").map(e=>e.trim())}function GO(n,e,t){n.queries===null&&(n.queries=new Fm),n.queries.track(new Lm(e,t))}function WO(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function gy(n,e){return n.queries.getByIndex(e)}function KO(n,e){let t=n[J],r=gy(t,e);return r.crossesNgTemplate?Vm(t,n,e,[]):IC(t,n,r,e)}var vs=class{},Gd=class{};var xd=class extends vs{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Md(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=kg(e);this._bootstrapComponents=kT(o.bootstrap),this._r3Injector=nm(e,t,[{provide:vs,useValue:this},{provide:Mc,useValue:this.componentFactoryResolver},...r],ar(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},kd=class extends Gd{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new xd(this.moduleType,e,[])}};var Sc=class extends vs{injector;componentFactoryResolver=new Md(this);instance=null;constructor(e){super();let t=new ji([...e.providers,{provide:vs,useValue:this},{provide:Mc,useValue:this.componentFactoryResolver}],e.parent||dc(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ds(n,e,t=null){return new Sc({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var QO=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Fg(!1,t.type),i=r.length>0?Ds([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=q({token:n,providedIn:"environment",factory:()=>new n(K(Ve))})}return n})();function mn(n){return Es(()=>{let e=wC(n),t=oe(k({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===qm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(QO).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||dr.Emulated,styles:n.styles||Lt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&ws("NgStandalone"),DC(t);let r=n.dependencies;return t.directiveDefs=Kb(r,YO),t.pipeDefs=Kb(r,jD),t.id=XO(t),t})}function YO(n){return ur(n)||Og(n)}function Ln(n){return Es(()=>({type:n.type,bootstrap:n.bootstrap||Lt,declarations:n.declarations||Lt,imports:n.imports||Lt,exports:n.exports||Lt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function ZO(n,e){if(n==null)return $r;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Bd.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function JO(n){if(n==null)return $r;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function ze(n){return Es(()=>{let e=wC(n);return DC(e),e})}function wC(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||$r,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Lt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:ZO(n.inputs,e),outputs:JO(n.outputs),debugInfo:null}}function DC(n){n.features?.forEach(e=>e(n))}function Kb(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function XO(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function e1(n){return Object.getPrototypeOf(n.prototype).constructor}function yn(n){let e=e1(n.type),t=!0,r=[n];for(;e;){let i;if(Pn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new U(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=fm(n.inputs),s.declaredInputs=fm(n.declaredInputs),s.outputs=fm(n.outputs);let a=i.hostBindings;a&&o1(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&r1(n,u),l&&i1(n,l),t1(n,i),RD(n.outputs,i.outputs),Pn(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===yn&&(t=!1)}}e=Object.getPrototypeOf(e)}n1(r)}function t1(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function n1(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=bc(i.hostAttrs,t=bc(t,i.hostAttrs))}}function fm(n){return n===$r?{}:n===Lt?[]:n}function r1(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function i1(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function o1(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function s1(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=bc(n.mergedAttrs,n.attrs);let h=n.tView=Zm(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),hs(n,!1);let u=c1(t,e,n,r);ld()&&oy(t,e,u,n),ms(u,e);let l=aC(u,e,u,n);e[r+jt]=l,Xm(e,l),FO(l,n,e)}function a1(n,e,t,r,i,o,s,a,u,l,h){let p=t+jt,m;return e.firstCreatePass?(m=hy(e,p,4,s||null,a||null),Kg()&&dC(e,n,m,vc(e.consts,l),ZT),rT(e,m)):m=e.data[p],s1(m,n,e,t,r,i,o,u),yc(m)&&ay(e,n,m),l!=null&&QT(n,m,h),m}function Xr(n,e,t,r,i,o,s,a){let u=Ee(),l=At(),h=vc(l.consts,o);return a1(u,l,n,e,t,r,i,h,void 0,s,a),Xr}var c1=u1;function u1(n,e,t,r){return dd(!0),e[ke].createComment("")}var my=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var yy=new $("");function no(n){return!!n&&typeof n.then=="function"}function bC(n){return!!n&&typeof n.subscribe=="function"}var vy=new $("");function Wd(n){return lr([{provide:vy,multi:!0,useValue:n}])}var _y=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=N(vy,{optional:!0})??[];injector=N($e);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=He(this.injector,i);if(no(o))t.push(o);else if(bC(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xc=new $("");function TC(){qp(()=>{let n="";throw new U(600,n)})}function CC(n){return n.isBoundToModule}var l1=10;var ei=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=N(Ut);afterRenderManager=N(ry);zonelessEnabled=N(fd);rootEffectScheduler=N(am);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Fe;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=N(kn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ae(t=>!t))}constructor(){N(to,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=N(Ve);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=$e.NULL){return this._injector.get(be).run(()=>{De(10);let s=t instanceof zd;if(!this._injector.get(_y).done){let S="";throw new U(405,S)}let u;s?u=t:u=this._injector.get(Mc).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=CC(u)?void 0:this._injector.get(vs),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(yy,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),Dc(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),De(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){De(12),this.tracingSnapshot!==null?this.tracingSnapshot.run($d.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new U(101,!1);let t=se(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,se(t),this.afterTick.next(),De(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Zi,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<l1;)De(14),this.synchronizeOnce(),De(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!_c(i))continue;let o=r&&!this.zonelessEnabled?0:1;rC(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>_c(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Dc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(xc,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Dc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new U(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Dc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function bs(n,e,t,r){let i=Ee(),o=Ec();if(Pc(i,o,e)){let s=At(),a=ud();Ok(a,i,n,e,t,r)}return bs}var P8=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function ti(n,e,t){let r=Ee(),i=Ec();if(Pc(r,i,e)){let o=At(),s=ud();YT(s,r,n,e,r[ke],t)}return ti}function Qb(n,e,t,r,i){cy(e,n,t,i?"class":"style",r)}function O(n,e,t,r){let i=Ee(),o=i[J],s=n+jt,a=o.firstCreatePass?fC(s,i,2,e,ZT,Kg(),t,r):o.data[s];if(Vk(a,i,n,e,d1),yc(a)){let u=i[J];ay(u,i,a),TT(u,a,i)}return r!=null&&QT(i,a),O}function L(){let n=At(),e=ot(),t=jk(e);return n.firstCreatePass&&pC(n,t),rb(t)&&ib(),tb(),t.classesWithoutHost!=null&&cx(t)&&Qb(n,t,Ee(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&ux(t)&&Qb(n,t,Ee(),t.stylesWithoutHost,!1),L}function Ts(n,e,t,r){return O(n,e,t,r),L(),Ts}var d1=(n,e,t,r,i)=>(dd(!0),AT(e[ke],r,yb()));function ro(){return Ee()}var kc="en-US";var h1=kc;function SC(n){typeof n=="string"&&(h1=n.toLowerCase().replace(/_/g,"-"))}function Ne(n,e,t){let r=Ee(),i=At(),o=ot();return AC(i,r,r[ke],o,n,e,t),Ne}function AC(n,e,t,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=dm(r,e,o),EO(r,n,e,s,t,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=dm(r,e,o),zb(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=dm(r,e,o),zb(r,e,p,i,i,u)}}function Vn(n=1){return mb(n)}function Ey(n,e,t,r){qO(n,e,t,r)}function Iy(n){let e=Ee(),t=At(),r=Xg();sd(r+1);let i=gy(t,r);if(n.dirty&&KD(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=KO(e,r);n.reset(o,wx),n.notifyOnChanges()}return!0}return!1}function wy(){return $O(Ee(),Xg())}function md(n,e){return n<<17|e<<2}function Xi(n){return n>>17&32767}function f1(n){return(n&2)==2}function p1(n,e){return n&131071|e<<17}function jm(n){return n|2}function _s(n){return(n&131068)>>2}function pm(n,e){return n&-131069|e<<2}function g1(n){return(n&1)===1}function Um(n){return n|1}function m1(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Xi(s),u=_s(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||as(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=Xi(n[a+1]);n[r+1]=md(m,a),m!==0&&(n[m+1]=pm(n[m+1],r)),n[a+1]=p1(n[a+1],r)}else n[r+1]=md(a,0),a!==0&&(n[a+1]=pm(n[a+1],r)),a=r;else n[r+1]=md(u,0),a===0?a=r:n[u+1]=pm(n[u+1],r),u=r;l&&(n[r+1]=jm(n[r+1])),Yb(n,h,r,!0),Yb(n,h,r,!1),y1(e,h,n,r,o),s=md(a,u),o?e.classBindings=s:e.styleBindings=s}function y1(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&as(o,e)>=0&&(t[r+1]=Um(t[r+1]))}function Yb(n,e,t,r){let i=n[t+1],o=e===null,s=r?Xi(i):_s(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];v1(u,e)&&(a=!0,n[s+1]=r?Um(l):jm(l)),s=r?Xi(l):_s(l)}a&&(n[t+1]=r?jm(i):Um(i))}function v1(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?as(n,e)>=0:!1}function Oc(n,e){return _1(n,e,null,!0),Oc}function _1(n,e,t,r){let i=Ee(),o=At(),s=cb(2);if(o.firstUpdatePass&&I1(o,n,s,r),e!==Zr&&Pc(i,s,e)){let a=o.data[Wi()];C1(o,a,i,i[ke],n,i[s+1]=S1(e,t),r,s)}}function E1(n,e){return e>=n.expandoStartIndex}function I1(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Wi()],s=E1(n,t);A1(o,r)&&e===null&&!s&&(e=!1),e=w1(i,o,e,r),m1(i,o,e,t,s,r)}}function w1(n,e,t,r){let i=hb(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=gm(null,n,e,t,r),t=Ac(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=gm(i,n,e,t,r),o===null){let u=D1(n,e,r);u!==void 0&&Array.isArray(u)&&(u=gm(null,n,e,u[1],r),u=Ac(u,e.attrs,r),b1(n,e,r,u))}else o=T1(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function D1(n,e,t){let r=t?e.classBindings:e.styleBindings;if(_s(r)!==0)return n[Xi(r)]}function b1(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Xi(i)]=r}function T1(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Ac(r,s,t)}return Ac(r,e.attrs,t)}function gm(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Ac(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ac(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),VD(n,s,t?!0:e[++o]))}return n===void 0?null:n}function C1(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=g1(l)?Zb(u,e,t,i,_s(l),s):void 0;if(!Od(h)){Od(o)||f1(l)&&(o=Zb(u,null,t,i,a,s));let p=$g(Wi(),t);Tk(r,s,p,i,o)}}function Zb(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===Zr&&(m=p?Lt:void 0);let y=p?ed(m,r):h===r?m:void 0;if(l&&!Od(y)&&(y=ed(u,r)),Od(y)&&(a=y,s))return a;let S=n[i+1];i=s?Xi(S):_s(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=ed(u,r))}return a}function Od(n){return n!==void 0}function S1(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=ar(Nc(n)))),n}function A1(n,e){return(n.flags&(e?8:16))!==0}function B(n,e=""){let t=Ee(),r=At(),i=n+jt,o=r.firstCreatePass?hy(r,i,1,e,null):r.data[i],s=R1(r,t,o,e,n);t[i]=s,ld()&&oy(r,t,s,o),hs(o,!1)}var R1=(n,e,t,r,i)=>(dd(!0),Ox(e[ke],r));function N1(n,e,t,r=""){return Pc(n,Ec(),t)?e+cc(t)+r:Zr}function st(n){return gr("",n),st}function gr(n,e,t){let r=Ee(),i=N1(r,n,e,t);return i!==Zr&&M1(r,Wi(),i),gr}function M1(n,e,t){let r=$g(e,n);Fx(n[ke],r,t)}function at(n,e,t){im(e)&&(e=e());let r=Ee(),i=Ec();if(Pc(r,i,e)){let o=At(),s=ud();YT(s,r,n,e,r[ke],t)}return at}function yt(n,e){let t=im(n);return t&&n.set(e),t}function ct(n,e){let t=Ee(),r=At(),i=ot();return AC(r,t,t[ke],i,n,e),ct}function P1(n,e,t){let r=At();if(r.firstCreatePass){let i=Pn(n);Bm(t,r.data,r.blueprint,i,!0),Bm(e,r.data,r.blueprint,i,!1)}}function Bm(n,e,t,r,i){if(n=it(n),Array.isArray(n))for(let o=0;o<n.length;o++)Bm(n[o],e,t,r,i);else{let o=At(),s=Ee(),a=ot(),u=Vi(n)?n:it(n.provide),l=Vg(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Vi(n)||!n.multi){let y=new Qi(l,i,ie,null),S=ym(u,e,i?h:h+m,p);S===-1?(_m(bd(a,s),o,u),mm(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[S]=y,s[S]=y)}else{let y=ym(u,e,h+m,p),S=ym(u,e,h,h+m),M=y>=0&&t[y],R=S>=0&&t[S];if(i&&!R||!i&&!M){_m(bd(a,s),o,u);let V=O1(i?k1:x1,t.length,i,r,l,n);!i&&R&&(t[S].providerFactory=V),mm(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(V),s.push(V)}else{let V=RC(t[i?S:y],l,!i&&r);mm(o,n,y>-1?y:S,V)}!i&&r&&R&&t[S].componentProviders++}}}function mm(n,e,t,r){let i=Vi(e),o=HD(e);if(i||o){let u=(o?it(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function RC(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function ym(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function x1(n,e,t,r,i){return $m(this.multi,[])}function k1(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=Tc(r,r[J],this.providerFactory.index,i);s=u.slice(0,a),$m(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],$m(o,s);return s}function $m(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function O1(n,e,t,r,i,o){let s=new Qi(n,t,ie,null);return s.multi=[],s.index=e,s.componentProviders=0,RC(s,i,r&&!t),s}function io(n,e=[]){return t=>{t.providersResolver=(r,i)=>P1(r,i?i(n):n,e)}}var Fd=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Dy=(()=>{class n{compileModuleSync(t){return new kd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=kg(t),o=kT(i.declarations).reduce((s,a)=>{let u=ur(a);return u&&s.push(new Ji(u)),s},[]);return new Fd(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var F1=(()=>{class n{zone=N(be);changeDetectionScheduler=N(cr);applicationRef=N(ei);applicationErrorHandler=N(Ut);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function NC({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new be(oe(k({},MC()),{scheduleInRootZone:t})),[{provide:be,useFactory:n},{provide:Hr,multi:!0,useFactory:()=>{let r=N(F1,{optional:!0});return()=>r.initialize()}},{provide:Hr,multi:!0,useFactory:()=>{let r=N(L1);return()=>{r.initialize()}}},e===!0?{provide:om,useValue:!0}:[],{provide:sm,useValue:t??jT},{provide:Ut,useFactory:()=>{let r=N(be),i=N(Ve),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(cn),o.handleError(s))})}}}]}function MC(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var L1=(()=>{class n{subscription=new xe;initialized=!1;zone=N(be);pendingTasks=N(kn);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{be.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{be.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var PC=(()=>{class n{applicationErrorHandler=N(Ut);appRef=N(ei);taskService=N(kn);ngZone=N(be);zonelessEnabled=N(fd);tracing=N(to,{optional:!0});disableScheduling=N(om,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new xe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ad):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(N(sm,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Rd||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?Pb:UT;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ad+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Pb(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function V1(){return typeof $localize<"u"&&$localize.locale||kc}var by=new $("",{providedIn:"root",factory:()=>N(by,{optional:!0,skipSelf:!0})||V1()});function ut(n){return CD(n)}function Cs(n,e){return vl(n,e?.equal)}var xC=class{[gt];constructor(e){this[gt]=e}destroy(){this[gt].destroy()}};var VC=Symbol("InputSignalNode#UNSET"),W1=oe(k({},_l),{transformFn:void 0,applyValueToInputSignal(n,e){Go(n,e)}});function jC(n,e){let t=Object.create(W1);t.value=n,t.transformFn=e?.transform;function r(){if(Ho(t),t.value===VC){let i=null;throw new U(-950,i)}return t.value}return r[gt]=t,r}var Qd=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Rc(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},K1=new $("");K1.__NG_ELEMENT_ID__=n=>{let e=ot();if(e===null)throw new U(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new U(204,!1)};function kC(n,e){return jC(n,e)}function Q1(n){return jC(VC,n)}var UC=(kC.required=Q1,kC);var Ty=new $(""),Y1=new $("");function Fc(n){return!n.moduleRef}function Z1(n){let e=Fc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(be);return t.run(()=>{Fc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Ut),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Fc(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Ty);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Ty);s.add(o),n.moduleRef.onDestroy(()=>{Dc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return X1(r,t,()=>{let o=e.get(kn),s=o.add(),a=e.get(_y);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(by,kc);if(SC(u||kc),!e.get(Y1,!0))return Fc(n)?e.get(ei):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Fc(n)){let h=e.get(ei);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return J1?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var J1;function X1(n,e,t){try{let r=t();return no(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Kd=null;function eF(n=[],e){return $e.create({name:e,providers:[{provide:lc,useValue:"platform"},{provide:Ty,useValue:new Set([()=>Kd=null])},...n]})}function tF(n=[]){if(Kd)return Kd;let e=eF(n);return Kd=e,TC(),nF(e),e}function nF(n){let e=n.get(Vd,null);He(n,()=>{e?.forEach(t=>t())})}function Ny(){return!1}var ni=(()=>{class n{static __NG_ELEMENT_ID__=rF}return n})();function rF(n){return iF(ot(),Ee(),(n&16)===16)}function iF(n,e,t){if(Wr(n)&&!t){let r=Xt(n.index,e);return new Qr(r,r)}else if(n.type&175){let r=e[Zt];return new Qr(r,e)}return null}var Cy=class{constructor(){}supports(e){return py(e)}create(e){return new Sy(e)}},oF=(n,e)=>e,Sy=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||oF}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<OC(r,i,o)?t:r,a=OC(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,S=y+m;h<=S&&S<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!py(e))throw new U(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,gC(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Ay(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Yd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Yd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Ay=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Ry=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Yd=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Ry,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function OC(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function FC(){return new My([new Cy])}var My=(()=>{class n{factories;static \u0275prov=q({token:n,providedIn:"root",factory:FC});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=N(n,{optional:!0,skipSelf:!0});return n.create(t,r||FC())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new U(901,!1)}}return n})();function BC(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;De(8);try{let o=i?.injector??tF(r),s=[NC({}),{provide:cr,useExisting:PC},_b,...t||[]],a=new Sc({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return Z1({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{De(9)}}function ri(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function $C(n){let e=ur(n);if(!e)return null;let t=new Ji(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var zC=null;function en(){return zC}function Py(n){zC??=n}var Lc=class{},Vc=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>N(GC),providedIn:"platform"})}return n})(),xy=new $(""),GC=(()=>{class n extends Vc{_location;_history;_doc=N(qe);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return en().getBaseHref(this._doc)}onPopState(t){let r=en().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=en().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Jd(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function HC(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function vn(n){return n&&n[0]!=="?"?`?${n}`:n}var _n=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>N(eh),providedIn:"root"})}return n})(),Xd=new $(""),eh=(()=>{class n extends _n{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??N(qe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Jd(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+vn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+vn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+vn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(K(Vc),K(Xd,8))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ii=(()=>{class n{_subject=new Fe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=cF(HC(qC(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+vn(r))}normalize(t){return n.stripTrailingSlash(aF(this._basePath,qC(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+vn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+vn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=vn;static joinWithSlash=Jd;static stripTrailingSlash=HC;static \u0275fac=function(r){return new(r||n)(K(_n))};static \u0275prov=q({token:n,factory:()=>sF(),providedIn:"root"})}return n})();function sF(){return new ii(K(_n))}function aF(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function qC(n){return n.replace(/\/index.html$/,"")}function cF(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var ky=(()=>{class n extends _n{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Jd(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+vn(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+vn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(K(Vc),K(Xd,8))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();var th=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},oi=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new th(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),WC(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);WC(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ie(Jr),ie(Yi),ie(My))};static \u0275dir=ze({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function WC(n,e){n.context.$implicit=e.item}var jn=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ln({type:n});static \u0275inj=un({})}return n})();function Oy(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var jc=class{};var KC="browser";var QC=(()=>{class n{static \u0275prov=q({token:n,providedIn:"root",factory:()=>new Fy(N(qe),window)})}return n})(),Fy=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(oe(k({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=uF(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(Ui(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(oe(k({},t),{left:i-s[0],top:o-s[1]}))}};function uF(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Uc=class{_doc;constructor(e){this._doc=e}manager},rh=(()=>{class n extends Uc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(K(qe))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),oh=new $(""),By=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof rh));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof rh);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new U(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(K(oh),K(be))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),Ly="ng-app-id";function YC(n){for(let e of n)e.remove()}function ZC(n,e){let t=e.createElement("style");return t.textContent=n,t}function lF(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Ly}="${e}"],link[${Ly}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Ly),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function jy(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var $y=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,lF(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,ZC);r?.forEach(i=>this.addUsage(i,this.external,jy))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(YC(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])YC(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,ZC(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,jy(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(K(qe),K(Ld),K(jd,8),K(eo))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),Vy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Hy=/%COMP%/g;var XC="%COMP%",dF=`_nghost-${XC}`,hF=`_ngcontent-${XC}`,fF=!0,pF=new $("",{providedIn:"root",factory:()=>fF});function gF(n){return hF.replace(Hy,n)}function mF(n){return dF.replace(Hy,n)}function eS(n,e){return e.map(t=>t.replace(Hy,n))}var qy=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new Bc(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof ih?i.applyToHost(t):i instanceof $c&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case dr.Emulated:o=new ih(u,l,r,this.appId,h,s,a,p,m);break;case dr.ShadowDom:return new Uy(u,l,t,r,s,a,this.nonce,p,m);default:o=new $c(u,l,r,h,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(K(By),K($y),K(Ld),K(pF),K(qe),K(be),K(jd),K(to,8))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),Bc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Vy[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(JC(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(JC(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new U(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Vy[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Vy[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(hr.DashCase|hr.Important)?e.style.setProperty(t,r,i&hr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&hr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=en().getGlobalEventTarget(this.doc,e),!e))throw new U(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function JC(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Uy=class extends Bc{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=eS(i.id,h);for(let m of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=jy(m,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},$c=class extends Bc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?eS(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&ys.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ih=class extends $c{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=gF(h),this.hostAttr=mF(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var sh=class n extends Lc{supportsDOMEvents=!0;static makeCurrent(){Py(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=yF();return t==null?null:vF(t)}resetBaseElement(){Hc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Oy(document.cookie,e)}},Hc=null;function yF(){return Hc=Hc||document.head.querySelector("base"),Hc?Hc.getAttribute("href"):null}function vF(n){return new URL(n,document.baseURI).pathname}var _F=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),tS=["alt","control","meta","shift"],EF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},IF={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},nS=(()=>{class n extends Uc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>en().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),tS.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=EF[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),tS.forEach(s=>{if(s!==i){let a=IF[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(K(qe))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();function zy(n,e,t){let r=k({rootComponent:n,platformRef:t?.platformRef},wF(e));return BC(r)}function wF(n){return{appProviders:[...SF,...n?.providers??[]],platformProviders:CF}}function DF(){sh.makeCurrent()}function bF(){return new cn}function TF(){return zm(document),document}var CF=[{provide:eo,useValue:KC},{provide:Vd,useValue:DF,multi:!0},{provide:qe,useFactory:TF}];var SF=[{provide:lc,useValue:"root"},{provide:cn,useFactory:bF},{provide:oh,useClass:rh,multi:!0,deps:[qe]},{provide:oh,useClass:nS,multi:!0,deps:[qe]},qy,$y,By,{provide:Zi,useExisting:qy},{provide:jc,useClass:_F},[]];var rS=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(K(qe))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var X="primary",nu=Symbol("RouteTitle"),Yy=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ao(n){return new Yy(n)}function dS(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function RF(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Un(n[t],e[t]))return!1;return!0}function Un(n,e){let t=n?Zy(n):void 0,r=e?Zy(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!hS(n[i],e[i]))return!1;return!0}function Zy(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function hS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function fS(n){return n.length>0?n[n.length-1]:null}function mr(n){return og(n)?n:no(n)?Se(Promise.resolve(n)):z(n)}var NF={exact:gS,subset:mS},pS={exact:MF,subset:PF,ignored:()=>!0};function iS(n,e,t){return NF[t.paths](n.root,e.root,t.matrixParams)&&pS[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function MF(n,e){return Un(n,e)}function gS(n,e,t){if(!oo(n.segments,e.segments)||!uh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!gS(n.children[r],e.children[r],t))return!1;return!0}function PF(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>hS(n[t],e[t]))}function mS(n,e,t){return yS(n,e,e.segments,t)}function yS(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!oo(i,t)||e.hasChildren()||!uh(i,t,r))}else if(n.segments.length===t.length){if(!oo(n.segments,t)||!uh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!mS(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!oo(n.segments,i)||!uh(n.segments,i,r)||!n.children[X]?!1:yS(n.children[X],e,o,r)}}function uh(n,e,t){return e.every((r,i)=>pS[t](n[i].parameters,r.parameters))}var $n=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ye([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ao(this.queryParams),this._queryParamMap}toString(){return OF.serialize(this)}},ye=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lh(this)}},si=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ao(this.parameters),this._parameterMap}toString(){return _S(this)}};function xF(n,e){return oo(n,e)&&n.every((t,r)=>Un(t.parameters,e[r].parameters))}function oo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function kF(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===X&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==X&&(t=t.concat(e(i,r)))}),t}var co=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>new ai,providedIn:"root"})}return n})(),ai=class{parse(e){let t=new Xy(e);return new $n(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${qc(e.root,!0)}`,r=VF(e.queryParams),i=typeof e.fragment=="string"?`#${FF(e.fragment)}`:"";return`${t}${r}${i}`}},OF=new ai;function lh(n){return n.segments.map(e=>_S(e)).join("/")}function qc(n,e){if(!n.hasChildren())return lh(n);if(e){let t=n.children[X]?qc(n.children[X],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==X&&r.push(`${i}:${qc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=kF(n,(r,i)=>i===X?[qc(n.children[X],!1)]:[`${i}:${qc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[X]!=null?`${lh(n)}/${t[0]}`:`${lh(n)}/(${t.join("//")})`}}function vS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ah(n){return vS(n).replace(/%3B/gi,";")}function FF(n){return encodeURI(n)}function Jy(n){return vS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dh(n){return decodeURIComponent(n)}function oS(n){return dh(n.replace(/\+/g,"%20"))}function _S(n){return`${Jy(n.path)}${LF(n.parameters)}`}function LF(n){return Object.entries(n).map(([e,t])=>`;${Jy(e)}=${Jy(t)}`).join("")}function VF(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${ah(t)}=${ah(i)}`).join("&"):`${ah(t)}=${ah(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var jF=/^[^\/()?;#]+/;function Gy(n){let e=n.match(jF);return e?e[0]:""}var UF=/^[^\/()?;=#]+/;function BF(n){let e=n.match(UF);return e?e[0]:""}var $F=/^[^=?&#]+/;function HF(n){let e=n.match($F);return e?e[0]:""}var qF=/^[^&#]+/;function zF(n){let e=n.match(qF);return e?e[0]:""}var Xy=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ye([],{}):new ye([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[X]=new ye(e,t)),r}parseSegment(){let e=Gy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new U(4009,!1);return this.capture(e),new si(dh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=BF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Gy(this.remaining);i&&(r=i,this.capture(r))}e[dh(t)]=dh(r)}parseQueryParam(e){let t=HF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=zF(this.remaining);s&&(r=s,this.capture(r))}let i=oS(t),o=oS(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Gy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new U(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=X);let s=this.parseChildren();t[o??X]=Object.keys(s).length===1&&s[X]?s[X]:new ye([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new U(4011,!1)}};function ES(n){return n.segments.length>0?new ye([],{[X]:n}):n}function IS(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=IS(i);if(r===X&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new ye(n.segments,e);return GF(t)}function GF(n){if(n.numberOfChildren===1&&n.children[X]){let e=n.children[X];return new ye(n.segments.concat(e.segments),e.children)}return n}function ci(n){return n instanceof $n}function wS(n,e,t=null,r=null){let i=DS(n);return bS(i,e,t,r)}function DS(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new ye(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=ES(r);return e??i}function bS(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Wy(i,i,i,t,r);let o=WF(e);if(o.toRoot())return Wy(i,i,new ye([],{}),t,r);let s=KF(o,i,n),a=s.processChildren?Gc(s.segmentGroup,s.index,o.commands):CS(s.segmentGroup,s.index,o.commands);return Wy(i,s.segmentGroup,a,t,r)}function hh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Kc(n){return typeof n=="object"&&n!=null&&n.outlets}function Wy(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=TS(n,e,t);let a=ES(IS(s));return new $n(a,o,i)}function TS(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=TS(o,e,t)}),new ye(n.segments,r)}var fh=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&hh(r[0]))throw new U(4003,!1);let i=r.find(Kc);if(i&&i!==fS(r))throw new U(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function WF(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new fh(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new fh(t,e,r)}var Rs=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function KF(n,e,t){if(n.isAbsolute)return new Rs(e,!0,0);if(!t)return new Rs(e,!1,NaN);if(t.parent===null)return new Rs(t,!0,0);let r=hh(n.commands[0])?0:1,i=t.segments.length-1+r;return QF(t,i,n.numberOfDoubleDots)}function QF(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new U(4005,!1);i=r.segments.length}return new Rs(r,!1,i-o)}function YF(n){return Kc(n[0])?n[0].outlets:{[X]:n}}function CS(n,e,t){if(n??=new ye([],{}),n.segments.length===0&&n.hasChildren())return Gc(n,e,t);let r=ZF(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new ye(n.segments.slice(0,r.pathIndex),{});return o.children[X]=new ye(n.segments.slice(r.pathIndex),n.children),Gc(o,0,i)}else return r.match&&i.length===0?new ye(n.segments,{}):r.match&&!n.hasChildren()?ev(n,e,t):r.match?Gc(n,0,i):ev(n,e,t)}function Gc(n,e,t){if(t.length===0)return new ye(n.segments,{});{let r=YF(t),i={};if(Object.keys(r).some(o=>o!==X)&&n.children[X]&&n.numberOfChildren===1&&n.children[X].segments.length===0){let o=Gc(n.children[X],e,t);return new ye(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=CS(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ye(n.segments,i)}}function ZF(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Kc(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!aS(u,l,s))return o;r+=2}else{if(!aS(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ev(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Kc(o)){let u=JF(o.outlets);return new ye(r,u)}if(i===0&&hh(t[0])){let u=n.segments[e];r.push(new si(u.path,sS(t[0]))),i++;continue}let s=Kc(o)?o.outlets[X]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&hh(a)?(r.push(new si(s,sS(a))),i+=2):(r.push(new si(s,{})),i++)}return new ye(r,{})}function JF(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=ev(new ye([],{}),0,r))}),e}function sS(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function aS(n,e,t){return n==t.path&&Un(e,t.parameters)}var Ns="imperative",Ye=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Ye||{}),qt=class{id;url;constructor(e,t){this.id=e,this.url=t}},ui=class extends qt{type=Ye.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},zt=class extends qt{urlAfterRedirects;type=Ye.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Rt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Rt||{}),Ps=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Ps||{}),Bn=class extends qt{reason;code;type=Ye.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Hn=class extends qt{reason;code;type=Ye.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},xs=class extends qt{error;target;type=Ye.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Qc=class extends qt{urlAfterRedirects;state;type=Ye.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ph=class extends qt{urlAfterRedirects;state;type=Ye.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gh=class extends qt{urlAfterRedirects;state;shouldActivate;type=Ye.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},mh=class extends qt{urlAfterRedirects;state;type=Ye.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yh=class extends qt{urlAfterRedirects;state;type=Ye.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vh=class{route;type=Ye.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},_h=class{route;type=Ye.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Eh=class{snapshot;type=Ye.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ih=class{snapshot;type=Ye.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wh=class{snapshot;type=Ye.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dh=class{snapshot;type=Ye.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ks=class{routerEvent;position;anchor;type=Ye.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Yc=class{},Os=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function XF(n){return!(n instanceof Yc)&&!(n instanceof Os)}function eL(n,e){return n.providers&&!n._injector&&(n._injector=Ds(n.providers,e,`Route: ${n.path}`)),n._injector??e}function En(n){return n.outlet||X}function tL(n,e){let t=n.filter(r=>En(r)===e);return t.push(...n.filter(r=>En(r)!==e)),t}function Vs(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var bh=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Vs(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new uo(this.rootInjector)}},uo=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new bh(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(K(Ve))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Th=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=tv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=tv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=nv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return nv(e,this._root).map(t=>t.value)}};function tv(n,e){if(n===e.value)return e;for(let t of e.children){let r=tv(n,t);if(r)return r}return null}function nv(n,e){if(n===e.value)return[e];for(let t of e.children){let r=nv(n,t);if(r.length)return r.unshift(e),r}return[]}var Ht=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function As(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Zc=class extends Th{snapshot;constructor(e,t){super(e),this.snapshot=t,lv(this,e)}toString(){return this.snapshot.toString()}};function SS(n){let e=nL(n),t=new rt([new si("",{})]),r=new rt({}),i=new rt({}),o=new rt({}),s=new rt(""),a=new qn(t,r,o,s,i,X,n,e.root);return a.snapshot=e.root,new Zc(new Ht(a,[]),e)}function nL(n){let e={},t={},r={},o=new so([],e,r,"",t,X,n,null,{});return new Jc("",new Ht(o,[]))}var qn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ae(l=>l[nu]))??z(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ae(e=>ao(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ae(e=>ao(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ch(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:k(k({},e.params),n.params),data:k(k({},e.data),n.data),resolve:k(k(k(k({},n.data),e.data),i?.data),n._resolvedData)}:r={params:k({},n.params),data:k({},n.data),resolve:k(k({},n.data),n._resolvedData??{})},i&&RS(i)&&(r.resolve[nu]=i.title),r}var so=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[nu]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ao(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ao(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Jc=class extends Th{url;constructor(e,t){super(t),this.url=e,lv(this,t)}toString(){return AS(this._root)}};function lv(n,e){e.value._routerState=n,e.children.forEach(t=>lv(n,t))}function AS(n){let e=n.children.length>0?` { ${n.children.map(AS).join(", ")} } `:"";return`${n.value}${e}`}function Ky(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Un(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Un(e.params,t.params)||n.paramsSubject.next(t.params),RF(e.url,t.url)||n.urlSubject.next(t.url),Un(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function rv(n,e){let t=Un(n.params,e.params)&&xF(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||rv(n.parent,e.parent))}function RS(n){return typeof n.title=="string"||n.title===null}var NS=new $(""),ru=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=X;activateEvents=new je;deactivateEvents=new je;attachEvents=new je;detachEvents=new je;routerOutletData=UC();parentContexts=N(uo);location=N(Jr);changeDetector=N(ni);inputBinder=N(iu,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new U(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new iv(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ze({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Fn]})}return n})(),iv=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===qn?this.route:e===uo?this.childContexts:e===NS?this.outletData:this.parent.get(e,t)}},iu=new $(""),dv=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=ec([r.queryParams,r.params,r.data]).pipe(Ct(([o,s,a],u)=>(a=k(k(k({},o),s),a),u===0?z(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=$C(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),hv=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=mn({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Ts(0,"router-outlet")},dependencies:[ru],encapsulation:2})}return n})();function fv(n){let e=n.children&&n.children.map(fv),t=e?oe(k({},n),{children:e}):k({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==X&&(t.component=hv),t}function rL(n,e,t){let r=Xc(n,e._root,t?t._root:void 0);return new Zc(r,e)}function Xc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=iL(n,e,t);return new Ht(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Xc(n,a)),s}}let r=oL(e.value),i=e.children.map(o=>Xc(n,o));return new Ht(r,i)}}function iL(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Xc(n,r,i);return Xc(n,r)})}function oL(n){return new qn(new rt(n.url),new rt(n.params),new rt(n.queryParams),new rt(n.fragment),new rt(n.data),n.outlet,n.component,n)}var Fs=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},MS="ngNavigationCancelingError";function Sh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ci(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=PS(!1,Rt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function PS(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[MS]=!0,t.cancellationCode=e,t}function sL(n){return xS(n)&&ci(n.url)}function xS(n){return!!n&&n[MS]}var aL=(n,e,t,r)=>ae(i=>(new ov(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),ov=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ky(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=As(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=As(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=As(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=As(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Dh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Ih(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Ky(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Ky(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Ah=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ms=class{component;route;constructor(e,t){this.component=e,this.route=t}};function cL(n,e,t){let r=n._root,i=e?e._root:null;return zc(r,i,t,[r.value])}function uL(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function js(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Dg(n)?n:e.get(n):r}function zc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=As(e);return n.children.forEach(s=>{lL(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Wc(a,t.getContext(s),i)),i}function lL(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=dL(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ah(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?zc(n,e,a?a.children:null,r,i):zc(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ms(a.outlet.component,s))}else s&&Wc(e,a,i),i.canActivateChecks.push(new Ah(r)),o.component?zc(n,null,a?a.children:null,r,i):zc(n,null,t,r,i);return i}function dL(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!oo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!oo(n.url,e.url)||!Un(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rv(n,e)||!Un(n.queryParams,e.queryParams);case"paramsChange":default:return!rv(n,e)}}function Wc(n,e,t){let r=As(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Wc(s,e.children.getContext(o),t):Wc(s,null,t):Wc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ms(e.outlet.component,i)):t.canDeactivateChecks.push(new Ms(null,i)):t.canDeactivateChecks.push(new Ms(null,i))}function ou(n){return typeof n=="function"}function hL(n){return typeof n=="boolean"}function fL(n){return n&&ou(n.canLoad)}function pL(n){return n&&ou(n.canActivate)}function gL(n){return n&&ou(n.canActivateChild)}function mL(n){return n&&ou(n.canDeactivate)}function yL(n){return n&&ou(n.canMatch)}function kS(n){return n instanceof nr||n?.name==="EmptyError"}var ch=Symbol("INITIAL_VALUE");function Ls(){return Ct(n=>ec(n.map(e=>e.pipe(ir(1),zl(ch)))).pipe(ae(e=>{for(let t of e)if(t!==!0){if(t===ch)return ch;if(t===!1||vL(t))return t}return!0}),Tt(e=>e!==ch),ir(1)))}function vL(n){return ci(n)||n instanceof Fs}function _L(n,e){return Le(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?z(oe(k({},t),{guardsResult:!0})):EL(s,r,i,n).pipe(Le(a=>a&&hL(a)?IL(r,o,n,e):z(a)),ae(a=>oe(k({},t),{guardsResult:a})))})}function EL(n,e,t,r){return Se(n).pipe(Le(i=>CL(i.component,i.route,t,e,r)),or(i=>i!==!0,!0))}function IL(n,e,t,r){return Se(e).pipe(Vr(i=>is(DL(i.route.parent,r),wL(i.route,r),TL(n,i.path,t),bL(n,i.route,t))),or(i=>i!==!0,!0))}function wL(n,e){return n!==null&&e&&e(new wh(n)),z(!0)}function DL(n,e){return n!==null&&e&&e(new Eh(n)),z(!0)}function bL(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return z(!0);let i=r.map(o=>tc(()=>{let s=Vs(e)??t,a=js(o,s),u=pL(a)?a.canActivate(e,n):He(s,()=>a(e,n));return mr(u).pipe(or())}));return z(i).pipe(Ls())}function TL(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>uL(s)).filter(s=>s!==null).map(s=>tc(()=>{let a=s.guards.map(u=>{let l=Vs(s.node)??t,h=js(u,l),p=gL(h)?h.canActivateChild(r,n):He(l,()=>h(r,n));return mr(p).pipe(or())});return z(a).pipe(Ls())}));return z(o).pipe(Ls())}function CL(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return z(!0);let s=o.map(a=>{let u=Vs(e)??i,l=js(a,u),h=mL(l)?l.canDeactivate(n,e,t,r):He(u,()=>l(n,e,t,r));return mr(h).pipe(or())});return z(s).pipe(Ls())}function SL(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return z(!0);let o=i.map(s=>{let a=js(s,n),u=fL(a)?a.canLoad(e,t):He(n,()=>a(e,t));return mr(u)});return z(o).pipe(Ls(),OS(r))}function OS(n){return bl(Je(e=>{if(typeof e!="boolean")throw Sh(n,e)}),ae(e=>e===!0))}function AL(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return z(!0);let o=i.map(s=>{let a=js(s,n),u=yL(a)?a.canMatch(e,t):He(n,()=>a(e,t));return mr(u)});return z(o).pipe(Ls(),OS(r))}var eu=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},tu=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Ss(n){return rs(new eu(n))}function RL(n){return rs(new U(4e3,!1))}function NL(n){return rs(PS(!1,Rt.GuardRejected))}var sv=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return z(r);if(i.numberOfChildren>1||!i.children[X])return RL(`${e.redirectTo}`);i=i.children[X]}}applyRedirectCommands(e,t,r,i,o){return ML(t,i,o).pipe(ae(s=>{if(s instanceof $n)throw new tu(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new tu(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new $n(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new ye(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new U(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function ML(n,e,t){if(typeof n=="string")return z(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return mr(He(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var av={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function PL(n,e,t,r,i){let o=FS(n,e,t);return o.matched?(r=eL(e,r),AL(r,e,t,i).pipe(ae(s=>s===!0?o:k({},av)))):z(o)}function FS(n,e,t){if(e.path==="**")return xL(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?k({},av):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||dS)(t,n,e);if(!i)return k({},av);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?k(k({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function xL(n){return{matched:!0,parameters:n.length>0?fS(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function cS(n,e,t,r){return t.length>0&&FL(n,t,r)?{segmentGroup:new ye(e,OL(r,new ye(t,n.children))),slicedSegments:[]}:t.length===0&&LL(n,t,r)?{segmentGroup:new ye(n.segments,kL(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ye(n.segments,n.children),slicedSegments:t}}function kL(n,e,t,r){let i={};for(let o of t)if(Nh(n,e,o)&&!r[En(o)]){let s=new ye([],{});i[En(o)]=s}return k(k({},r),i)}function OL(n,e){let t={};t[X]=e;for(let r of n)if(r.path===""&&En(r)!==X){let i=new ye([],{});t[En(r)]=i}return t}function FL(n,e,t){return t.some(r=>Nh(n,e,r)&&En(r)!==X)}function LL(n,e,t){return t.some(r=>Nh(n,e,r))}function Nh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function VL(n,e,t){return e.length===0&&!n.children[t]}var cv=class{};function jL(n,e,t,r,i,o,s="emptyOnly"){return new uv(n,e,t,r,i,s,o).recognize()}var UL=31,uv=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new sv(this.urlSerializer,this.urlTree)}noMatchError(e){return new U(4002,`'${e.segmentGroup}'`)}recognize(){let e=cS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ae(({children:t,rootSnapshot:r})=>{let i=new Ht(r,t),o=new Jc("",i),s=wS(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new so([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),X,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,X,t).pipe(ae(r=>({children:r,rootSnapshot:t})),rr(r=>{if(r instanceof tu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof eu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ae(s=>s instanceof Ht?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Se(o).pipe(Vr(s=>{let a=r.children[s],u=tL(t,s);return this.processSegmentGroup(e,u,a,s,i)}),ql((s,a)=>(s.push(...a),s)),jr(null),ag(),Le(s=>{if(s===null)return Ss(r);let a=LS(s);return BL(a),z(a)}))}processSegment(e,t,r,i,o,s,a){return Se(t).pipe(Vr(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(rr(l=>{if(l instanceof eu)return z(null);throw l}))),or(u=>!!u),rr(u=>{if(kS(u))return VL(r,i,o)?z(new cv):Ss(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return En(r)!==s&&(s===X||!Nh(i,o,r))?Ss(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Ss(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=FS(t,i,o);if(!u)return Ss(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>UL&&(this.allowRedirects=!1));let y=new so(o,l,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,uS(i),En(i),i.component??i._loadedComponent??null,i,lS(i)),S=Ch(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(S.params),y.data=Object.freeze(S.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(Ct(R=>this.applyRedirects.lineralizeSegments(i,R)),Le(R=>this.processSegment(e,r,t,R.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=PL(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Ct(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ct(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,S=new so(m,p,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,uS(r),En(r),r.component??r._loadedComponent??null,r,lS(r)),M=Ch(S,s,this.paramsInheritanceStrategy);S.params=Object.freeze(M.params),S.data=Object.freeze(M.data);let{segmentGroup:R,slicedSegments:V}=cS(t,m,y,l);if(V.length===0&&R.hasChildren())return this.processChildren(h,l,R,S).pipe(ae(Y=>new Ht(S,Y)));if(l.length===0&&V.length===0)return z(new Ht(S,[]));let Q=En(r)===o;return this.processSegment(h,l,R,V,Q?X:o,!0,S).pipe(ae(Y=>new Ht(S,Y instanceof Ht?[Y]:[])))}))):Ss(t)))}getChildConfig(e,t,r){return t.children?z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?z({routes:t._loadedRoutes,injector:t._loadedInjector}):SL(e,t,r,this.urlSerializer).pipe(Le(i=>i?this.configLoader.loadChildren(e,t).pipe(Je(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):NL(t))):z({routes:[],injector:e})}};function BL(n){n.sort((e,t)=>e.value.outlet===X?-1:t.value.outlet===X?1:e.value.outlet.localeCompare(t.value.outlet))}function $L(n){let e=n.value.routeConfig;return e&&e.path===""}function LS(n){let e=[],t=new Set;for(let r of n){if(!$L(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=LS(r.children);e.push(new Ht(r.value,i))}return e.filter(r=>!t.has(r))}function uS(n){return n.data||{}}function lS(n){return n.resolve||{}}function HL(n,e,t,r,i,o){return Le(s=>jL(n,e,t,r,s.extractedUrl,i,o).pipe(ae(({state:a,tree:u})=>oe(k({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function qL(n,e){return Le(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return z(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of VS(u))s.add(l);let a=0;return Se(s).pipe(Vr(u=>o.has(u)?zL(u,r,n,e):(u.data=Ch(u,u.parent,n).resolve,z(void 0))),Je(()=>a++),os(1),Le(u=>a===s.size?z(t):Mt))})}function VS(n){let e=n.children.map(t=>VS(t)).flat();return[n,...e]}function zL(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!RS(i)&&(o[nu]=i.title),tc(()=>(n.data=Ch(n,n.parent,t).resolve,GL(o,n,e,r).pipe(ae(s=>(n._resolvedData=s,n.data=k(k({},n.data),s),null)))))}function GL(n,e,t,r){let i=Zy(n);if(i.length===0)return z({});let o={};return Se(i).pipe(Le(s=>WL(n[s],e,t,r).pipe(or(),Je(a=>{if(a instanceof Fs)throw Sh(new ai,a);o[s]=a}))),os(1),ae(()=>o),rr(s=>kS(s)?Mt:rs(s)))}function WL(n,e,t,r){let i=Vs(e)??r,o=js(n,i),s=o.resolve?o.resolve(e,t):He(i,()=>o(e,t));return mr(s)}function Qy(n){return Ct(e=>{let t=n(e);return t?Se(t).pipe(ae(()=>e)):z(e)})}var pv=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===X);return r}getResolvedTitleForRoute(t){return t.data[nu]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>N(jS),providedIn:"root"})}return n})(),jS=(()=>{class n extends pv{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(K(rS))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),li=new $("",{providedIn:"root",factory:()=>({})}),lo=new $(""),Mh=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=N(Dy);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return z(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=mr(He(t,()=>r.loadComponent())).pipe(ae(BS),Ct($S),Je(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),nc(()=>{this.componentLoaders.delete(r)})),o=new Xo(i,()=>new Fe).pipe(Jo());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=US(r,this.compiler,t,this.onLoadEndListener).pipe(nc(()=>{this.childrenLoaders.delete(r)})),s=new Xo(o,()=>new Fe).pipe(Jo());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function US(n,e,t,r){return mr(He(t,()=>n.loadChildren())).pipe(ae(BS),Ct($S),Le(i=>i instanceof Gd||Array.isArray(i)?z(i):Se(e.compileModuleAsync(i))),ae(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(lo,[],{optional:!0,self:!0}).flat()),{routes:s.map(fv),injector:o}}))}function KL(n){return n&&typeof n=="object"&&"default"in n}function BS(n){return KL(n)?n.default:n}function $S(n){return z(n)}var Ph=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>N(QL),providedIn:"root"})}return n})(),QL=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gv=new $(""),mv=new $("");function HS(n,e,t){let r=n.get(mv),i=n.get(qe);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),YL(n)));a.ready.catch(l=>{});let{onViewTransitionCreated:u}=r;return u&&He(n,()=>u({transition:a,from:e,to:t})),s}function YL(n){return new Promise(e=>{Hd({read:()=>setTimeout(e)},{injector:n})})}var yv=new $(""),xh=(()=>{class n{currentNavigation=xt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Fe;transitionAbortWithErrorSubject=new Fe;configLoader=N(Mh);environmentInjector=N(Ve);destroyRef=N(xn);urlSerializer=N(co);rootContexts=N(uo);location=N(ii);inputBindingEnabled=N(iu,{optional:!0})!==null;titleStrategy=N(pv);options=N(li,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=N(Ph);createViewTransition=N(gv,{optional:!0});navigationErrorHandler=N(yv,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>z(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new vh(i)),r=i=>this.events.next(new _h(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;ut(()=>{this.transitions?.next(oe(k({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new rt(null),this.transitions.pipe(Tt(r=>r!==null),Ct(r=>{let i=!1;return z(r).pipe(Ct(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Rt.SupersededByNewNavigation),Mt;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?oe(k({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Hn(o.id,this.urlSerializer.serialize(o.rawUrl),"",Ps.IgnoredSameUrlNavigation)),o.resolve(!1),Mt;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return z(o).pipe(Ct(u=>(this.events.next(new ui(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Mt:Promise.resolve(u))),HL(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Je(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let l=new Qc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:m}=o,y=new ui(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let S=SS(this.rootComponentType).snapshot;return this.currentTransition=r=oe(k({},o),{targetSnapshot:S,urlAfterRedirects:l,extras:oe(k({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(M=>(M.finalUrl=l,M)),z(r)}else return this.events.next(new Hn(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Ps.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Mt}),Je(o=>{let s=new ph(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ae(o=>(this.currentTransition=r=oe(k({},o),{guards:cL(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),_L(this.environmentInjector,o=>this.events.next(o)),Je(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Sh(this.urlSerializer,o.guardsResult);let s=new gh(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Tt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Rt.GuardRejected),!1)),Qy(o=>{if(o.guards.canActivateChecks.length!==0)return z(o).pipe(Je(s=>{let a=new mh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Ct(s=>{let a=!1;return z(s).pipe(qL(this.paramsInheritanceStrategy,this.environmentInjector),Je({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Rt.NoDataFromResolver)}}))}),Je(s=>{let a=new yh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),Qy(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent){let l=Vs(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(Je(h=>{a.component=h}),ae(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return ec(s(o.targetSnapshot.root)).pipe(jr(null),ir(1))}),Qy(()=>this.afterPreactivation()),Ct(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Se(a).pipe(ae(()=>r)):z(r)}),ae(o=>{let s=rL(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=oe(k({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),Je(()=>{this.events.next(new Yc)}),aL(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),ir(1),Gl(new re(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Tt(()=>!i&&!r.targetRouterState),Je(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Rt.Aborted)}))),Je({next:o=>{i=!0,this.lastSuccessfulNavigation=ut(this.currentNavigation),this.events.next(new zt(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Gl(this.transitionAbortWithErrorSubject.pipe(Je(o=>{throw o}))),nc(()=>{i||this.cancelNavigationTransition(r,"",Rt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),rr(o=>{if(this.destroyed)return r.resolve(!1),Mt;if(i=!0,xS(o))this.events.next(new Bn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),sL(o)?this.events.next(new Os(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new xs(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=He(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Fs){let{message:u,cancellationCode:l}=Sh(this.urlSerializer,a);this.events.next(new Bn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new Os(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Mt}))}))}cancelNavigationTransition(t,r,i){let o=new Bn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=ut(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ZL(n){return n!==Ns}var qS=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>N(JL),providedIn:"root"})}return n})(),Rh=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},JL=(()=>{class n extends Rh{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Yr(n)))(i||n)}})();static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zS=(()=>{class n{urlSerializer=N(co);options=N(li,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=N(ii);urlHandlingStrategy=N(Ph);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new $n;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof $n?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=SS(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>N(XL),providedIn:"root"})}return n})(),XL=(()=>{class n extends zS{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof ui?this.updateStateMemento():t instanceof Hn?this.commitTransition(r):t instanceof Qc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Yc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Bn&&t.code!==Rt.SupersededByNewNavigation&&t.code!==Rt.Redirect?this.restoreHistory(r):t instanceof xs?this.restoreHistory(r,!0):t instanceof zt&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=k(k({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=k(k({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Yr(n)))(i||n)}})();static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kh(n,e){n.events.pipe(Tt(t=>t instanceof zt||t instanceof Bn||t instanceof xs||t instanceof Hn),ae(t=>t instanceof zt||t instanceof Hn?0:(t instanceof Bn?t.code===Rt.Redirect||t.code===Rt.SupersededByNewNavigation:!1)?2:1),Tt(t=>t!==2),ir(1)).subscribe(()=>{e()})}var eV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},tV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},In=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=N(my);stateManager=N(zS);options=N(li,{optional:!0})||{};pendingTasks=N(kn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=N(xh);urlSerializer=N(co);location=N(ii);urlHandlingStrategy=N(Ph);injector=N(Ve);_events=new Fe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=N(qS);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=N(lo,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!N(iu,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new xe;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=ut(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Bn&&r.code!==Rt.Redirect&&r.code!==Rt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof zt)this.navigated=!0;else if(r instanceof Os){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=k({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||ZL(i.source)},s);this.scheduleNavigation(a,Ns,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}XF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ns,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=k({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(Ut)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return ut(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(fv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=k(k({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=DS(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return bS(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ci(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ns,null,r)}navigate(t,r={skipLocationChange:!1}){return nV(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Ui(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=k({},eV):r===!1?i=k({},tV):i=r,ci(t))return iS(this.currentUrlTree,t,i);let o=this.parseUrl(t);return iS(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return kh(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nV(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new U(4008,!1)}var Us=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=xt(null);get href(){return ut(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Fe;applicationErrorHandler=N(Ut);options=N(li,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(N(new Qd("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof zt&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ci(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:ci(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(ie(In),ie(qn),Rc("tabindex"),ie(pr),ie(Bt),ie(_n))};static \u0275dir=ze({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Ne("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&bs("href",i.reactiveHref(),Qm)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ri],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ri],replaceUrl:[2,"replaceUrl","replaceUrl",ri],routerLink:"routerLink"},features:[Fn]})}return n})(),_v=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new je;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof zt&&this.update()})}ngAfterContentInit(){z(this.links.changes,z(null)).pipe(Lr()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Se(t).pipe(Lr()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=rV(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(ie(In),ie(Bt),ie(pr),ie(ni),ie(Us,8))};static \u0275dir=ze({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Ey(o,Us,5),r&2){let s;Iy(s=wy())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Fn]})}return n})();function rV(n){return!!n.paths}var su=class{};var GS=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Tt(t=>t instanceof zt),Vr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Ds(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Se(i).pipe(Lr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=z(null);let o=i.pipe(Le(s=>s===null?z(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(t,r);return Se([o,s]).pipe(Lr())}else return o})}static \u0275fac=function(r){return new(r||n)(K(In),K(Ve),K(su),K(Mh))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),WS=new $(""),iV=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Ns;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ui?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof zt?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Hn&&t.code===Ps.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof ks))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>T(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new ks(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){fy()};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();function Ev(n,...e){return lr([{provide:lo,multi:!0,useValue:n},[],{provide:qn,useFactory:KS,deps:[In]},{provide:xc,multi:!0,useFactory:QS},e.map(t=>t.\u0275providers)])}function KS(n){return n.routerState.root}function au(n,e){return{\u0275kind:n,\u0275providers:e}}function QS(){let n=N($e);return e=>{let t=n.get(ei);if(e!==t.components[0])return;let r=n.get(In),i=n.get(YS);n.get(Iv)===1&&r.initialNavigation(),n.get(XS,null,{optional:!0})?.setUpPreloading(),n.get(WS,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var YS=new $("",{factory:()=>new Fe}),Iv=new $("",{providedIn:"root",factory:()=>1});function ZS(){let n=[{provide:Gm,useValue:!0},{provide:Iv,useValue:0},Wd(()=>{let e=N($e);return e.get(xy,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(In),o=e.get(YS);kh(i,()=>{r(!0)}),e.get(xh).afterPreactivation=()=>(r(!0),o.closed?z(void 0):o),i.initialNavigation()}))})];return au(2,n)}function JS(){let n=[Wd(()=>{N(In).setUpLocationChangeListener()}),{provide:Iv,useValue:2}];return au(3,n)}var XS=new $("");function e0(n){return au(0,[{provide:XS,useExisting:GS},{provide:su,useExisting:n}])}function t0(){return au(8,[dv,{provide:iu,useExisting:dv}])}function n0(n){ws("NgRouterViewTransitions");let e=[{provide:gv,useValue:HS},{provide:mv,useValue:k({skipNextTransition:!!n?.skipInitialTransition},n)}];return au(9,e)}var r0=[ii,{provide:co,useClass:ai},In,uo,{provide:qn,useFactory:KS,deps:[In]},Mh,[]],wv=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[r0,[],{provide:lo,multi:!0,useValue:t},[],r?.errorHandler?{provide:yv,useValue:r.errorHandler}:[],{provide:li,useValue:r||{}},r?.useHash?sV():aV(),oV(),r?.preloadingStrategy?e0(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?cV(r):[],r?.bindToComponentInputs?t0().\u0275providers:[],r?.enableViewTransitions?n0().\u0275providers:[],uV()]}}static forChild(t){return{ngModule:n,providers:[{provide:lo,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ln({type:n});static \u0275inj=un({})}return n})();function oV(){return{provide:WS,useFactory:()=>{let n=N(QC),e=N(be),t=N(li),r=N(xh),i=N(co);return t.scrollOffset&&n.setOffset(t.scrollOffset),new iV(i,r,n,e,t)}}}function sV(){return{provide:_n,useClass:ky}}function aV(){return{provide:_n,useClass:eh}}function cV(n){return[n.initialNavigation==="disabled"?JS().\u0275providers:[],n.initialNavigation==="enabledBlocking"?ZS().\u0275providers:[]]}var vv=new $("");function uV(){return[{provide:vv,useFactory:QS},{provide:xc,multi:!0,useExisting:vv}]}var Oh=class n{title=xt("clinic-calulo");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=mn({type:n,selectors:[["app-root"]],decls:9,vars:0,consts:[[1,"main-nav"],["routerLink","/DailyServiceRecord","routerLinkActive","active-link"],["routerLink","/RabiesCase","routerLinkActive","active-link"],["routerLink","/water-analysis","routerLinkActive","active-link"]],template:function(t,r){t&1&&(O(0,"nav",0)(1,"a",1),B(2,"Daily Service Record"),L(),O(3,"a",2),B(4,"Rabies Case"),L(),O(5,"a",3),B(6,"Water Analysis"),L()(),Ts(7,"hr")(8,"router-outlet"))},dependencies:[ru,wv,Us,_v,jn],encapsulation:2})};var h0=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(ie(pr),ie(Bt))};static \u0275dir=ze({type:n})}return n})(),f0=(()=>{class n extends h0{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Yr(n)))(i||n)}})();static \u0275dir=ze({type:n,features:[yn]})}return n})(),Tv=new $("");var dV={provide:Tv,useExisting:An(()=>hi),multi:!0};function hV(){let n=en()?en().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var fV=new $(""),hi=(()=>{class n extends h0{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!hV())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(ie(pr),ie(Bt),ie(fV,8))};static \u0275dir=ze({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ne("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[io([dV]),yn]})}return n})();function pV(n){return n==null||gV(n)===0}function gV(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Cv=new $(""),p0=new $("");function mV(n){return pV(n.value)?{required:!0}:null}function i0(n){return null}function g0(n){return n!=null}function m0(n){return no(n)?Se(n):n}function y0(n){let e={};return n.forEach(t=>{e=t!=null?k(k({},e),t):e}),Object.keys(e).length===0?null:e}function v0(n,e){return e.map(t=>t(n))}function yV(n){return!n.validate}function _0(n){return n.map(e=>yV(e)?e:t=>e.validate(t))}function vV(n){if(!n)return null;let e=n.filter(g0);return e.length==0?null:function(t){return y0(v0(t,e))}}function Sv(n){return n!=null?vV(_0(n)):null}function _V(n){if(!n)return null;let e=n.filter(g0);return e.length==0?null:function(t){let r=v0(t,e).map(m0);return sg(r).pipe(ae(y0))}}function Av(n){return n!=null?_V(_0(n)):null}function o0(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function EV(n){return n._rawValidators}function IV(n){return n._rawAsyncValidators}function Dv(n){return n?Array.isArray(n)?n:[n]:[]}function Lh(n,e){return Array.isArray(n)?n.includes(e):n===e}function s0(n,e){let t=Dv(e);return Dv(n).forEach(i=>{Lh(t,i)||t.push(i)}),t}function a0(n,e){return Dv(e).filter(t=>!Lh(n,t))}var Vh=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Sv(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Av(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Hs=class extends Vh{name;get formDirective(){return null}get path(){return null}},fu=class extends Vh{_parent=null;name=null;valueAccessor=null},jh=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},wV={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Aee=oe(k({},wV),{"[class.ng-submitted]":"isSubmitted"}),qs=(()=>{class n extends jh{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ie(fu,2))};static \u0275dir=ze({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Oc("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[yn]})}return n})(),zs=(()=>{class n extends jh{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ie(Hs,10))};static \u0275dir=ze({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Oc("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[yn]})}return n})();var cu="VALID",Fh="INVALID",Bs="PENDING",uu="DISABLED",di=class{},Uh=class extends di{value;source;constructor(e,t){super(),this.value=e,this.source=t}},du=class extends di{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},hu=class extends di{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},$s=class extends di{status;source;constructor(e,t){super(),this.status=e,this.source=t}},bv=class extends di{source;constructor(e){super(),this.source=e}},Bh=class extends di{source;constructor(e){super(),this.source=e}};function E0(n){return(qh(n)?n.validators:n)||null}function DV(n){return Array.isArray(n)?Sv(n):n||null}function I0(n,e){return(qh(e)?e.asyncValidators:n)||null}function bV(n){return Array.isArray(n)?Av(n):n||null}function qh(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function TV(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new U(1e3,"");if(!r[t])throw new U(1001,"")}function CV(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new U(1002,"")})}var $h=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ut(this.statusReactive)}set status(e){ut(()=>this.statusReactive.set(e))}_status=Cs(()=>this.statusReactive());statusReactive=xt(void 0);get valid(){return this.status===cu}get invalid(){return this.status===Fh}get pending(){return this.status==Bs}get disabled(){return this.status===uu}get enabled(){return this.status!==uu}errors;get pristine(){return ut(this.pristineReactive)}set pristine(e){ut(()=>this.pristineReactive.set(e))}_pristine=Cs(()=>this.pristineReactive());pristineReactive=xt(!0);get dirty(){return!this.pristine}get touched(){return ut(this.touchedReactive)}set touched(e){ut(()=>this.touchedReactive.set(e))}_touched=Cs(()=>this.touchedReactive());touchedReactive=xt(!1);get untouched(){return!this.touched}_events=new Fe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(s0(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(s0(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(a0(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(a0(e,this._rawAsyncValidators))}hasValidator(e){return Lh(this._rawValidators,e)}hasAsyncValidator(e){return Lh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(oe(k({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new hu(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new hu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(oe(k({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new du(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new du(!0,r))}markAsPending(e={}){this.status=Bs;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new $s(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(oe(k({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=uu,this.errors=null,this._forEachChild(i=>{i.disable(oe(k({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Uh(this.value,r)),this._events.next(new $s(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(oe(k({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=cu,this._forEachChild(r=>{r.enable(oe(k({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(oe(k({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===cu||this.status===Bs)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Uh(this.value,t)),this._events.next(new $s(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(oe(k({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?uu:cu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Bs,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=m0(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new $s(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new je,this.statusChanges=new je}_calculateStatus(){return this._allControlsDisabled()?uu:this.errors?Fh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Bs)?Bs:this._anyControlsHaveStatus(Fh)?Fh:cu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new du(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new hu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){qh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=DV(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=bV(this._rawAsyncValidators)}},Hh=class extends $h{constructor(e,t,r){super(E0(t),I0(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){CV(this,!0,e),Object.keys(e).forEach(r=>{TV(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Bh(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Rv=new $("",{providedIn:"root",factory:()=>Nv}),Nv="always";function SV(n,e){return[...e.path,n]}function w0(n,e,t=Nv){D0(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),RV(n,e),MV(n,e),NV(n,e),AV(n,e)}function c0(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function AV(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function D0(n,e){let t=EV(n);e.validator!==null?n.setValidators(o0(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=IV(n);e.asyncValidator!==null?n.setAsyncValidators(o0(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();c0(e._rawValidators,i),c0(e._rawAsyncValidators,i)}function RV(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&b0(n,e)})}function NV(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&b0(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function b0(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function MV(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function PV(n,e){n==null,D0(n,e)}function xV(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function kV(n){return Object.getPrototypeOf(n.constructor)===f0}function OV(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function FV(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===hi?t=o:kV(o)?r=o:i=o}),i||r||t||null}var LV={provide:Hs,useExisting:An(()=>ho)},lu=Promise.resolve(),ho=(()=>{class n extends Hs{callSetDisabledState;get submitted(){return ut(this.submittedReactive)}_submitted=Cs(()=>this.submittedReactive());submittedReactive=xt(!1);_directives=new Set;form;ngSubmit=new je;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Hh({},Sv(t),Av(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){lu.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),w0(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){lu.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){lu.then(()=>{let r=this._findContainer(t.path),i=new Hh({});PV(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){lu.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){lu.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),OV(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new bv(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(ie(Cv,10),ie(p0,10),ie(Rv,8))};static \u0275dir=ze({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Ne("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[io([LV]),yn]})}return n})();function u0(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function l0(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var VV=class extends $h{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(E0(t),I0(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),qh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(l0(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Bh(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){u0(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){u0(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){l0(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var jV={provide:fu,useExisting:An(()=>fo)},d0=Promise.resolve(),fo=(()=>{class n extends fu{_changeDetectorRef;callSetDisabledState;control=new VV;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new je;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=FV(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),xV(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){w0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){d0.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&ri(r);d0.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?SV(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(ie(Hs,9),ie(Cv,10),ie(p0,10),ie(Tv,10),ie(ni,8),ie(Rv,8))};static \u0275dir=ze({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[io([jV]),yn,Fn]})}return n})();var Gs=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=ze({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),UV={provide:Tv,useExisting:An(()=>Mv),multi:!0},Mv=(()=>{class n extends f0{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Yr(n)))(i||n)}})();static \u0275dir=ze({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Ne("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[io([UV]),yn]})}return n})();var BV=(()=>{class n{_validator=i0;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):i0,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ze({type:n,features:[Fn]})}return n})();var $V={provide:Cv,useExisting:An(()=>po),multi:!0};var po=(()=>{class n extends BV{required;inputName="required";normalizeInput=ri;createValidator=t=>mV;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Yr(n)))(i||n)}})();static \u0275dir=ze({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&bs("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[io([$V]),yn]})}return n})();var HV=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ln({type:n});static \u0275inj=un({})}return n})();var Ws=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Rv,useValue:t.callSetDisabledState??Nv}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ln({type:n});static \u0275inj=un({imports:[HV]})}return n})();var T0=()=>{};var A0=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},qV=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},zh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(t[h],t[p],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(A0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):qV(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new kv;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},kv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},zV=function(n){let e=A0(n);return zh.encodeByteArray(e,!0)},gu=function(n){return zV(n).replace(/\./g,"")},Gh=function(n){try{return zh.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Fv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var GV=()=>Fv().__FIREBASE_DEFAULTS__,WV=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},KV=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Gh(n[1]);return e&&JSON.parse(e)},Wh=()=>{try{return T0()||GV()||WV()||KV()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},R0=n=>{var e,t;return(t=(e=Wh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},N0=n=>{let e=R0(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Lv=()=>{var n;return(n=Wh())===null||n===void 0?void 0:n.config},M0=n=>{var e;return(e=Wh())===null||e===void 0?void 0:e[`_${n}`]};var go=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function mo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Vv(n){return T(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function P0(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[gu(JSON.stringify(t)),gu(JSON.stringify(s)),""].join(".")}var pu={};function QV(){let n={prod:[],emulator:[]};for(let e of Object.keys(pu))pu[e]?n.emulator.push(e):n.prod.push(e);return n}function YV(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var C0=!1;function jv(n,e){if(typeof window>"u"||typeof document>"u"||!mo(window.location.host)||pu[n]===e||pu[n]||C0)return;pu[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=QV().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{C0=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=YV(r),y=t("text"),S=document.getElementById(y)||document.createElement("span"),M=t("learnmore"),R=document.getElementById(M)||document.createElement("a"),V=t("preprendIcon"),Q=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let Y=m.element;a(Y),h(R,M);let Te=l();u(Q,V),Y.append(Q,S,R,Te),document.body.appendChild(Y)}o?(S.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function x0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function ZV(){var n;let e=(n=Wh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function k0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function O0(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function F0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function L0(){return!ZV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mu(){try{return typeof indexedDB=="object"}catch{return!1}}function V0(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var JV="FirebaseError",tn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=JV,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wn.prototype.create)}},wn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?XV(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new tn(i,a,r)}};function XV(n,e){return n.replace(e2,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var e2=/\{\$([^}]+)}/g;function yo(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(S0(o)&&S0(s)){if(!yo(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function S0(n){return n!==null&&typeof n=="object"}function Uv(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function j0(n,e){let t=new Ov(n,e);return t.subscribe.bind(t)}var Ov=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");t2(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=xv),i.error===void 0&&(i.error=xv),i.complete===void 0&&(i.complete=xv);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function t2(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function xv(){}var xee=14400*1e3;function vt(n){return n&&n._delegate?n._delegate:n}var Nt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var vo="[DEFAULT]";var Bv=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new go;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(r2(e))try{this.getOrInitializeService({instanceIdentifier:vo})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=vo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return T(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=vo){return this.instances.has(e)}getOptions(e=vo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:n2(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vo){return this.component?this.component.multipleInstances?e:vo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function n2(n){return n===vo?void 0:n}function r2(n){return n.instantiationMode==="EAGER"}var Kh=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Bv(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var i2=[],le=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(le||{}),o2={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},s2=le.INFO,a2={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},c2=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=a2[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},zn=class{constructor(e){this.name=e,this._logLevel=s2,this._logHandler=c2,this._userLogHandler=null,i2.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?o2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}};var u2=(n,e)=>e.some(t=>n instanceof t),U0,B0;function l2(){return U0||(U0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function d2(){return B0||(B0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var $0=new WeakMap,Hv=new WeakMap,H0=new WeakMap,$v=new WeakMap,zv=new WeakMap;function h2(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Gn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&$0.set(t,n)}).catch(()=>{}),zv.set(e,n),e}function f2(n){if(Hv.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Hv.set(n,e)}var qv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Hv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||H0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Gn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function q0(n){qv=n(qv)}function p2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Qh(this),e,...t);return H0.set(r,e.sort?e.sort():[e]),Gn(r)}:d2().includes(n)?function(...e){return n.apply(Qh(this),e),Gn($0.get(this))}:function(...e){return Gn(n.apply(Qh(this),e))}}function g2(n){return typeof n=="function"?p2(n):(n instanceof IDBTransaction&&f2(n),u2(n,l2())?new Proxy(n,qv):n)}function Gn(n){if(n instanceof IDBRequest)return h2(n);if($v.has(n))return $v.get(n);let e=g2(n);return e!==n&&($v.set(n,e),zv.set(e,n)),e}var Qh=n=>zv.get(n);function G0(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Gn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Gn(s.result),u.oldVersion,u.newVersion,Gn(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var m2=["get","getKey","getAll","getAllKeys","count"],y2=["put","add","delete","clear"],Gv=new Map;function z0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Gv.get(e))return Gv.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=y2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||m2.includes(t)))return;let o=function(s,...a){return T(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return Gv.set(e,o),o}q0(n=>oe(k({},n),{get:(e,t,r)=>z0(e,t)||n.get(e,t,r),has:(e,t)=>!!z0(e,t)||n.has(e,t)}));var Kv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(v2(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function v2(n){let e=n.getComponent();return e?.type==="VERSION"}var Qv="@firebase/app",W0="0.13.2";var yr=new zn("@firebase/app"),_2="@firebase/app-compat",E2="@firebase/analytics-compat",I2="@firebase/analytics",w2="@firebase/app-check-compat",D2="@firebase/app-check",b2="@firebase/auth",T2="@firebase/auth-compat",C2="@firebase/database",S2="@firebase/data-connect",A2="@firebase/database-compat",R2="@firebase/functions",N2="@firebase/functions-compat",M2="@firebase/installations",P2="@firebase/installations-compat",x2="@firebase/messaging",k2="@firebase/messaging-compat",O2="@firebase/performance",F2="@firebase/performance-compat",L2="@firebase/remote-config",V2="@firebase/remote-config-compat",j2="@firebase/storage",U2="@firebase/storage-compat",B2="@firebase/firestore",$2="@firebase/ai",H2="@firebase/firestore-compat",q2="firebase",z2="11.10.0";var Yv="[DEFAULT]",G2={[Qv]:"fire-core",[_2]:"fire-core-compat",[I2]:"fire-analytics",[E2]:"fire-analytics-compat",[D2]:"fire-app-check",[w2]:"fire-app-check-compat",[b2]:"fire-auth",[T2]:"fire-auth-compat",[C2]:"fire-rtdb",[S2]:"fire-data-connect",[A2]:"fire-rtdb-compat",[R2]:"fire-fn",[N2]:"fire-fn-compat",[M2]:"fire-iid",[P2]:"fire-iid-compat",[x2]:"fire-fcm",[k2]:"fire-fcm-compat",[O2]:"fire-perf",[F2]:"fire-perf-compat",[L2]:"fire-rc",[V2]:"fire-rc-compat",[j2]:"fire-gcs",[U2]:"fire-gcs-compat",[B2]:"fire-fst",[H2]:"fire-fst-compat",[$2]:"fire-vertex","fire-js":"fire-js",[q2]:"fire-js-all"};var yu=new Map,W2=new Map,Zv=new Map;function K0(n,e){try{n.container.addComponent(e)}catch(t){yr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Dn(n){let e=n.name;if(Zv.has(e))return yr.debug(`There were multiple attempts to register component ${e}.`),!1;Zv.set(e,n);for(let t of yu.values())K0(t,n);for(let t of W2.values())K0(t,n);return!0}function Yh(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function vr(n){return n==null?!1:n.settings!==void 0}var K2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fi=new wn("app","Firebase",K2);var Jv=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Nt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fi.create("app-deleted",{appName:this._name})}};var Ks=z2;function t_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Yv,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw fi.create("bad-app-name",{appName:String(i)});if(t||(t=Lv()),!t)throw fi.create("no-options");let o=yu.get(i);if(o){if(yo(t,o.options)&&yo(r,o.config))return o;throw fi.create("duplicate-app",{appName:i})}let s=new Kh(i);for(let u of Zv.values())s.addComponent(u);let a=new Jv(t,r,s);return yu.set(i,a),a}function Qs(n=Yv){let e=yu.get(n);if(!e&&n===Yv&&Lv())return t_();if(!e)throw fi.create("no-app",{appName:n});return e}function Zh(){return Array.from(yu.values())}function Ue(n,e,t){var r;let i=(r=G2[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yr.warn(a.join(" "));return}Dn(new Nt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Q2="firebase-heartbeat-database",Y2=1,vu="firebase-heartbeat-store",Wv=null;function J0(){return Wv||(Wv=G0(Q2,Y2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(vu)}catch(t){console.warn(t)}}}}).catch(n=>{throw fi.create("idb-open",{originalErrorMessage:n.message})})),Wv}function Z2(n){return T(this,null,function*(){try{let t=(yield J0()).transaction(vu),r=yield t.objectStore(vu).get(X0(n));return yield t.done,r}catch(e){if(e instanceof tn)yr.warn(e.message);else{let t=fi.create("idb-get",{originalErrorMessage:e?.message});yr.warn(t.message)}}})}function Q0(n,e){return T(this,null,function*(){try{let r=(yield J0()).transaction(vu,"readwrite");yield r.objectStore(vu).put(e,X0(n)),yield r.done}catch(t){if(t instanceof tn)yr.warn(t.message);else{let r=fi.create("idb-set",{originalErrorMessage:t?.message});yr.warn(r.message)}}})}function X0(n){return`${n.name}!${n.options.appId}`}var J2=1024,X2=30,Xv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new e_(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return T(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Y0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>X2){let s=tj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){yr.warn(r)}})}getHeartbeatsHeader(){return T(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Y0(),{heartbeatsToSend:r,unsentEntries:i}=ej(this._heartbeatsCache.heartbeats),o=gu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return yr.warn(t),""}})}};function Y0(){return new Date().toISOString().substring(0,10)}function ej(n,e=J2){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Z0(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Z0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var e_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return T(this,null,function*(){return mu()?V0().then(()=>!0).catch(()=>!1):!1})}read(){return T(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Z2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return T(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Q0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return T(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Q0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Z0(n){return gu(JSON.stringify({version:2,heartbeats:n})).length}function tj(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function nj(n){Dn(new Nt("platform-logger",e=>new Kv(e),"PRIVATE")),Dn(new Nt("heartbeat",e=>new Xv(e),"PRIVATE")),Ue(Qv,W0,n),Ue(Qv,W0,"esm2017"),Ue("fire-js","")}nj("");var rj="firebase",ij="11.10.0";Ue(rj,ij,"app");function eA(n){n===void 0&&(n=N($e));let e=n.get(fs);return t=>new re(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Eo=new Ur("ANGULARFIRE2_VERSION");function Xh(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Zs=(n,e)=>{let t=e?[e]:Zh(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Ys=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Ys||{}),tA=Ny()&&typeof Zone<"u"?Ys.WARN:Ys.SILENT;var Jh=class{zone;delegate;constructor(e,t=rg){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Io=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=N(be);this.outsideAngular=t.runOutsideAngular(()=>new Jh(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Jh(typeof Zone>"u"?void 0:Zone.current,ng))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nA=!1;function oj(n,e){!nA&&(tA>Ys.SILENT||Ny())&&(nA=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),tA>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function sj(n){let e=N(be,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function _o(n){let e=N(be,{optional:!0});return e?e.run(()=>n()):n()}var aj=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),He(t,()=>_o(()=>n.apply(void 0,r)))),nn=(n,e,t)=>(t||=e?Ys.WARN:Ys.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=N(Io),s=N(fs),a=N(Ve)}catch{return oj(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=_o(()=>s.add())),i[l]=aj(i[l],r,a));let u=sj(()=>n.apply(this,i));return e?u instanceof re?u.pipe(Fr(o.outsideAngular),Or(o.insideAngular),eA(a)):u instanceof Promise?_o(()=>{let l=s.add();return new Promise((h,p)=>{u.then(m=>He(a,()=>_o(()=>h(m))),m=>He(a,()=>_o(()=>p(m)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:_o(()=>u):u instanceof re?u.pipe(Fr(o.outsideAngular),Or(o.insideAngular)):_o(()=>u)});var wo=class{constructor(e){return e}},_u=class{constructor(){return Zh()}};function cj(n){return n&&n.length===1?n[0]:new wo(Qs())}var n_=new $("angularfire2._apps"),uj={provide:wo,useFactory:cj,deps:[[new fr,n_]]},lj={provide:_u,deps:[[new fr,n_]]};function dj(n){return(e,t)=>{let r=t.get(eo);Ue("angularfire",Eo.full,"core"),Ue("angularfire",Eo.full,"app"),Ue("angular",Eg.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new wo(i)}}function rA(n,...e){return lr([uj,lj,{provide:n_,useFactory:dj(n),multi:!0,deps:[be,$e,Io,...e]}])}var iA=nn(t_,!0);var hj=new Map,fj={activated:!1,tokenObservers:[]},pj={initialized:!1,enabled:!1};function bn(n){return hj.get(n)||Object.assign({},fj)}function cA(){return pj}var gj="https://content-firebaseappcheck.googleapis.com/v1";var mj="exchangeDebugToken",oA={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Fte=1440*60*1e3;var o_=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return T(this,null,function*(){this.stop();try{this.pending=new go,this.pending.promise.catch(t=>{}),yield yj(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new go,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function yj(n){return new Promise(e=>{setTimeout(e,n)})}var vj={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},pi=new wn("appCheck","AppCheck",vj);function uA(n){if(!bn(n).activated)throw pi.create("use-before-activation",{appName:n.name})}function lA(r,i){return T(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw pi.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw pi.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw pi.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw pi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function dA(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${gj}/projects/${t}/apps/${r}:${mj}?key=${i}`,body:{debug_token:e}}}var _j="firebase-app-check-database",Ej=1,s_="firebase-app-check-store";var ef=null;function Ij(){return ef||(ef=new Promise((n,e)=>{try{let t=indexedDB.open(_j,Ej);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(pi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(s_,{keyPath:"compositeKey"})}}}catch(t){e(pi.create("storage-open",{originalErrorMessage:t?.message}))}}),ef)}function wj(n,e){return Dj(bj(n),e)}function Dj(n,e){return T(this,null,function*(){let r=(yield Ij()).transaction(s_,"readwrite"),o=r.objectStore(s_).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(pi.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function bj(n){return`${n.options.appId}-${n.name}`}var Eu=new zn("@firebase/app-check");function r_(n,e){return mu()?wj(n,e).catch(t=>{Eu.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function hA(){return cA().enabled}function fA(){return T(this,null,function*(){let n=cA();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Tj={error:"UNKNOWN_ERROR"};function Cj(n){return zh.encodeString(JSON.stringify(n),!1)}function a_(n,e=!1,t=!1){return T(this,null,function*(){let r=n.app;uA(r);let i=bn(r),o=i.token,s;if(o&&!Iu(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Iu(l)?o=l:yield r_(r,void 0))}if(!e&&o&&Iu(o))return{token:o.token};let a=!1;if(hA())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=lA(dA(r,yield fA()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield r_(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Eu.warn(l.message):t&&Eu.error(l),i_(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield bn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Eu.warn(l.message):t&&Eu.error(l),s=l}let u;return o?s?Iu(o)?u={token:o.token,internalError:s}:u=i_(s):(u={token:o.token},i.token=o,yield r_(r,o)):u=i_(s),a&&Nj(r,u),u})}function Sj(n){return T(this,null,function*(){let e=n.app;uA(e);let{provider:t}=bn(e);if(hA()){let r=yield fA(),{token:i}=yield lA(dA(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function Aj(n,e,t,r){let{app:i}=n,o=bn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Iu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),sA(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>sA(n))}function pA(n,e){let t=bn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function sA(n){let{app:e}=n,t=bn(e),r=t.tokenRefresher;r||(r=Rj(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Rj(n){let{app:e}=n;return new o_(()=>T(null,null,function*(){let t=bn(e),r;if(t.token?r=yield a_(n,!0):r=yield a_(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=bn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},oA.RETRIAL_MIN_WAIT,oA.RETRIAL_MAX_WAIT)}function Nj(n,e){let t=bn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Iu(n){return n.expireTimeMillis-Date.now()>0}function i_(n){return{token:Cj(Tj),error:n}}var c_=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=bn(this.app);for(let t of e)pA(this.app,t.next);return Promise.resolve()}};function Mj(n,e){return new c_(n,e)}function Pj(n){return{getToken:e=>a_(n,e),getLimitedUseToken:()=>Sj(n),addTokenListener:e=>Aj(n,"INTERNAL",e),removeTokenListener:e=>pA(n.app,e)}}var xj="@firebase/app-check",kj="0.10.1";var Oj="app-check",aA="app-check-internal";function Fj(){Dn(new Nt(Oj,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Mj(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(aA).initialize()})),Dn(new Nt(aA,n=>{let e=n.getProvider("app-check").getImmediate();return Pj(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ue(xj,kj)}Fj();var Lj="app-check";var tf=class{constructor(){return Zs(Lj)}};var Vj=["localhost","0.0.0.0","127.0.0.1"],Qte=typeof window<"u"&&Vj.includes(window.location.hostname);function wA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var DA=wA,bA=new wn("auth","Firebase",wA());var sf=new zn("@firebase/auth");function Uj(n,...e){sf.logLevel<=le.WARN&&sf.warn(`Auth (${Ks}): ${n}`,...e)}function rf(n,...e){sf.logLevel<=le.ERROR&&sf.error(`Auth (${Ks}): ${n}`,...e)}function gA(n,...e){throw E_(n,...e)}function __(n,...e){return E_(n,...e)}function TA(n,e,t){let r=Object.assign(Object.assign({},DA()),{[e]:t});return new wn("auth","Firebase",r).create(e,{appName:n.name})}function of(n){return TA(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function E_(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return bA.create(n,...e)}function ve(n,e,...t){if(!n)throw E_(e,...t)}function wu(n){let e="INTERNAL ASSERTION FAILED: "+n;throw rf(e),new Error(e)}function af(n,e){n||wu(e)}function Bj(){return mA()==="http:"||mA()==="https:"}function mA(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function $j(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Bj()||O0()||"connection"in navigator)?navigator.onLine:!0}function Hj(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var To=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,af(t>e,"Short delay should be less than long delay!"),this.isMobile=x0()||F0()}get(){return $j()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function qj(n,e){af(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var cf=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var zj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Gj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Wj=new To(3e4,6e4);function CA(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function ff(o,s,a,u){return T(this,arguments,function*(n,e,t,r,i={}){return SA(n,i,()=>T(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Uv(Object.assign({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:m},l);return k0()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&mo(n.emulatorConfig.host)&&(y.credentials="include"),cf.fetch()(yield AA(n,n.config.apiHost,t,p),y)}))})}function SA(n,e,t){return T(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},zj),e);try{let i=new d_(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw nf(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw nf(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw nf(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw nf(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw TA(n,h,l);gA(n,h)}}catch(i){if(i instanceof tn)throw i;gA(n,"network-request-failed",{message:String(i)})}})}function AA(n,e,t,r){return T(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?qj(n.config,i):`${n.config.apiScheme}://${i}`;return Gj.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var d_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(__(this.auth,"network-request-failed")),Wj.get())})}};function nf(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=__(n,e,r);return i.customData._tokenResponse=t,i}function Kj(n,e){return T(this,null,function*(){return ff(n,"POST","/v1/accounts:delete",e)})}function uf(n,e){return T(this,null,function*(){return ff(n,"POST","/v1/accounts:lookup",e)})}function Du(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function I_(n,e=!1){return T(this,null,function*(){let t=vt(n),r=yield t.getIdToken(e),i=RA(r);ve(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Du(u_(i.auth_time)),issuedAtTime:Du(u_(i.iat)),expirationTime:Du(u_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function u_(n){return Number(n)*1e3}function RA(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return rf("JWT malformed, contained fewer than 3 sections"),null;try{let i=Gh(t);return i?JSON.parse(i):(rf("Failed to decode base64 JWT payload"),null)}catch(i){return rf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function yA(n){let e=RA(n);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function h_(n,e,t=!1){return T(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof tn&&Qj(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function Qj({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var f_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>T(this,null,function*(){yield this.iteration()}),t)}iteration(){return T(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Tu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Du(this.lastLoginAt),this.creationTime=Du(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function lf(n){return T(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield h_(n,uf(t,{idToken:r}));ve(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?NA(o.providerUserInfo):[],a=Yj(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Tu(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function w_(n){return T(this,null,function*(){let e=vt(n);yield lf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Yj(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function NA(n){return n.map(e=>{var{providerId:t}=e,r=ig(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Zj(n,e){return T(this,null,function*(){let t=yield SA(n,{},()=>T(null,null,function*(){let r=Uv({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield AA(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&mo(n.emulatorConfig.host)&&(u.credentials="include"),cf.fetch()(s,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function Jj(n,e){return T(this,null,function*(){return ff(n,"POST","/v2/accounts:revokeToken",CA(n,e))})}var bu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ve(e.length!==0,"internal-error");let t=yA(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return T(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return T(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield Zj(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(ve(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ve(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ve(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return wu("not implemented")}};function gi(n,e){ve(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Do=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=ig(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new f_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Tu(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return T(this,null,function*(){let t=yield h_(this,this.stsTokenManager.getToken(this.auth,e));return ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return I_(this,e)}reload(){return w_(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return T(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield lf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return T(this,null,function*(){if(vr(this.auth.app))return Promise.reject(of(this.auth));let e=yield this.getIdToken();return yield h_(this,Kj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,S=(s=t.photoURL)!==null&&s!==void 0?s:void 0,M=(a=t.tenantId)!==null&&a!==void 0?a:void 0,R=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,V=(l=t.createdAt)!==null&&l!==void 0?l:void 0,Q=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Y,emailVerified:Te,isAnonymous:wt,providerData:we,stsTokenManager:w}=t;ve(Y&&w,e,"internal-error");let v=bu.fromJSON(this.name,w);ve(typeof Y=="string",e,"internal-error"),gi(p,e.name),gi(m,e.name),ve(typeof Te=="boolean",e,"internal-error"),ve(typeof wt=="boolean",e,"internal-error"),gi(y,e.name),gi(S,e.name),gi(M,e.name),gi(R,e.name),gi(V,e.name),gi(Q,e.name);let E=new n({uid:Y,auth:e,email:m,emailVerified:Te,displayName:p,isAnonymous:wt,photoURL:S,phoneNumber:y,tenantId:M,stsTokenManager:v,createdAt:V,lastLoginAt:Q});return we&&Array.isArray(we)&&(E.providerData=we.map(I=>Object.assign({},I))),R&&(E._redirectEventId=R),E}static _fromIdTokenResponse(e,t,r=!1){return T(this,null,function*(){let i=new bu;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield lf(o),o})}static _fromGetAccountInfoResponse(e,t,r){return T(this,null,function*(){let i=t.users[0];ve(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?NA(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new bu;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Tu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var vA=new Map;function bo(n){af(n instanceof Function,"Expected a class definition");let e=vA.get(n);return e?(af(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,vA.set(n,e),e)}var Xj=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return T(this,null,function*(){return!0})}_set(t,r){return T(this,null,function*(){this.storage[t]=r})}_get(t){return T(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return T(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),p_=Xj;function l_(n,e,t){return`firebase:${n}:${e}:${t}`}var df=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=l_(this.userKey,i.apiKey,o),this.fullPersistenceKey=l_("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return T(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield uf(this.auth,{idToken:e}).catch(()=>{});return t?Do._fromGetAccountInfoResponse(this.auth,t,e):null}return Do._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return T(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return T(this,null,function*(){if(!t.length)return new n(bo(p_),e,r);let i=(yield Promise.all(t.map(l=>T(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||bo(p_),s=l_(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let m=yield uf(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield Do._fromGetAccountInfoResponse(e,m,h)}else p=Do._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>T(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function _A(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rU(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(eU(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oU(e))return"Blackberry";if(sU(e))return"Webos";if(tU(e))return"Safari";if((e.includes("chrome/")||nU(e))&&!e.includes("edge/"))return"Chrome";if(iU(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function eU(n=Gt()){return/firefox\//i.test(n)}function tU(n=Gt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nU(n=Gt()){return/crios\//i.test(n)}function rU(n=Gt()){return/iemobile/i.test(n)}function iU(n=Gt()){return/android/i.test(n)}function oU(n=Gt()){return/blackberry/i.test(n)}function sU(n=Gt()){return/webos/i.test(n)}function MA(n,e=[]){let t;switch(n){case"Browser":t=_A(Gt());break;case"Worker":t=`${_A(Gt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ks}/${r}`}var g_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return T(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function aU(t){return T(this,arguments,function*(n,e={}){return ff(n,"GET","/v2/passwordPolicy",CA(n,e))})}var cU=6,m_=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:cU,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var y_=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hf(this),this.idTokenSubscription=new hf(this),this.beforeStateQueue=new g_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=bo(t)),this._initializationPromise=this.queue(()=>T(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield df.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return T(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return T(this,null,function*(){try{let t=yield uf(this,{idToken:e}),r=yield Do._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return T(this,null,function*(){var t;if(vr(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return T(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return T(this,null,function*(){try{yield lf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Hj()}_delete(){return T(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return T(this,null,function*(){if(vr(this.app))return Promise.reject(of(this));let t=e?vt(e):null;return t&&ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return T(this,null,function*(){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>T(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return T(this,null,function*(){return vr(this.app)?Promise.reject(of(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return vr(this.app)?Promise.reject(of(this)):this.queue(()=>T(this,null,function*(){yield this.assertedPersistence.setPersistence(bo(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return T(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return T(this,null,function*(){let e=yield aU(this),t=new m_(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return T(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Jj(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return T(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return T(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&bo(e)||this._popupRedirectResolver;ve(t,this,"argument-error"),this.redirectPersistenceManager=yield df.create(this,[bo(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return T(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>T(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return T(this,null,function*(){if(e===this.currentUser)return this.queue(()=>T(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return T(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=MA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return T(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return T(this,null,function*(){var e;if(vr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Uj(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function uU(n){return vt(n)}var hf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=j0(t=>this.observer=t)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var lU={loadJS(){return T(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dU(n){lU=n}function hU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function fU(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(bo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var ane=hU("rcb"),cne=new To(3e4,6e4);var une=new To(2e3,1e4);var lne=600*1e3;var dne=new To(3e4,6e4);var hne=new To(5e3,15e3);var fne=encodeURIComponent("fac");var EA="@firebase/auth",IA="1.10.8";var v_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return T(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function pU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gU(n){Dn(new Nt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ve(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:MA(n)},l=new y_(r,i,o,u);return fU(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Dn(new Nt("auth-internal",e=>{let t=uU(e.getProvider("auth").getImmediate());return(r=>new v_(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ue(EA,IA,pU(n)),Ue(EA,IA,"esm2017")}var mU=300,pne=M0("authIdTokenMaxAge")||mU;function yU(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}dU({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=__("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",yU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gU("Browser");var gB="auth";var pf=class{constructor(){return Zs(gB)}};var PA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xA={};var _r,D_;(function(){var n;function e(w,v){function E(){}E.prototype=v.prototype,w.D=v.prototype,w.prototype=new E,w.prototype.constructor=w,w.C=function(I,D,C){for(var _=Array(arguments.length-2),Xn=2;Xn<arguments.length;Xn++)_[Xn-2]=arguments[Xn];return v.prototype[D].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,v,E){E||(E=0);var I=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)I[D]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(D=0;16>D;++D)I[D]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=w.g[0],E=w.g[1],D=w.g[2];var C=w.g[3],_=v+(C^E&(D^C))+I[0]+3614090360&4294967295;v=E+(_<<7&4294967295|_>>>25),_=C+(D^v&(E^D))+I[1]+3905402710&4294967295,C=v+(_<<12&4294967295|_>>>20),_=D+(E^C&(v^E))+I[2]+606105819&4294967295,D=C+(_<<17&4294967295|_>>>15),_=E+(v^D&(C^v))+I[3]+3250441966&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(C^E&(D^C))+I[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(D^v&(E^D))+I[5]+1200080426&4294967295,C=v+(_<<12&4294967295|_>>>20),_=D+(E^C&(v^E))+I[6]+2821735955&4294967295,D=C+(_<<17&4294967295|_>>>15),_=E+(v^D&(C^v))+I[7]+4249261313&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(C^E&(D^C))+I[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(D^v&(E^D))+I[9]+2336552879&4294967295,C=v+(_<<12&4294967295|_>>>20),_=D+(E^C&(v^E))+I[10]+4294925233&4294967295,D=C+(_<<17&4294967295|_>>>15),_=E+(v^D&(C^v))+I[11]+2304563134&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(C^E&(D^C))+I[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(D^v&(E^D))+I[13]+4254626195&4294967295,C=v+(_<<12&4294967295|_>>>20),_=D+(E^C&(v^E))+I[14]+2792965006&4294967295,D=C+(_<<17&4294967295|_>>>15),_=E+(v^D&(C^v))+I[15]+1236535329&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(D^C&(E^D))+I[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^D&(v^E))+I[6]+3225465664&4294967295,C=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(C^v))+I[11]+643717713&4294967295,D=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(D^C))+I[0]+3921069994&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^C&(E^D))+I[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^D&(v^E))+I[10]+38016083&4294967295,C=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(C^v))+I[15]+3634488961&4294967295,D=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(D^C))+I[4]+3889429448&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^C&(E^D))+I[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^D&(v^E))+I[14]+3275163606&4294967295,C=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(C^v))+I[3]+4107603335&4294967295,D=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(D^C))+I[8]+1163531501&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^C&(E^D))+I[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^D&(v^E))+I[2]+4243563512&4294967295,C=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(C^v))+I[7]+1735328473&4294967295,D=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(D^C))+I[12]+2368359562&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(E^D^C)+I[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^D)+I[8]+2272392833&4294967295,C=v+(_<<11&4294967295|_>>>21),_=D+(C^v^E)+I[11]+1839030562&4294967295,D=C+(_<<16&4294967295|_>>>16),_=E+(D^C^v)+I[14]+4259657740&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^C)+I[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^D)+I[4]+1272893353&4294967295,C=v+(_<<11&4294967295|_>>>21),_=D+(C^v^E)+I[7]+4139469664&4294967295,D=C+(_<<16&4294967295|_>>>16),_=E+(D^C^v)+I[10]+3200236656&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^C)+I[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^D)+I[0]+3936430074&4294967295,C=v+(_<<11&4294967295|_>>>21),_=D+(C^v^E)+I[3]+3572445317&4294967295,D=C+(_<<16&4294967295|_>>>16),_=E+(D^C^v)+I[6]+76029189&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^C)+I[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^D)+I[12]+3873151461&4294967295,C=v+(_<<11&4294967295|_>>>21),_=D+(C^v^E)+I[15]+530742520&4294967295,D=C+(_<<16&4294967295|_>>>16),_=E+(D^C^v)+I[2]+3299628645&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(D^(E|~C))+I[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~D))+I[7]+1126891415&4294967295,C=v+(_<<10&4294967295|_>>>22),_=D+(v^(C|~E))+I[14]+2878612391&4294967295,D=C+(_<<15&4294967295|_>>>17),_=E+(C^(D|~v))+I[5]+4237533241&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~C))+I[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~D))+I[3]+2399980690&4294967295,C=v+(_<<10&4294967295|_>>>22),_=D+(v^(C|~E))+I[10]+4293915773&4294967295,D=C+(_<<15&4294967295|_>>>17),_=E+(C^(D|~v))+I[1]+2240044497&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~C))+I[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~D))+I[15]+4264355552&4294967295,C=v+(_<<10&4294967295|_>>>22),_=D+(v^(C|~E))+I[6]+2734768916&4294967295,D=C+(_<<15&4294967295|_>>>17),_=E+(C^(D|~v))+I[13]+1309151649&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~C))+I[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~D))+I[11]+3174756917&4294967295,C=v+(_<<10&4294967295|_>>>22),_=D+(v^(C|~E))+I[2]+718787259&4294967295,D=C+(_<<15&4294967295|_>>>17),_=E+(C^(D|~v))+I[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+D&4294967295,w.g[3]=w.g[3]+C&4294967295}r.prototype.u=function(w,v){v===void 0&&(v=w.length);for(var E=v-this.blockSize,I=this.B,D=this.h,C=0;C<v;){if(D==0)for(;C<=E;)i(this,w,C),C+=this.blockSize;if(typeof w=="string"){for(;C<v;)if(I[D++]=w.charCodeAt(C++),D==this.blockSize){i(this,I),D=0;break}}else for(;C<v;)if(I[D++]=w[C++],D==this.blockSize){i(this,I),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;var E=8*this.o;for(v=w.length-8;v<w.length;++v)w[v]=E&255,E/=256;for(this.u(w),w=Array(16),v=E=0;4>v;++v)for(var I=0;32>I;I+=8)w[E++]=this.g[v]>>>I&255;return w};function o(w,v){var E=a;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=v(w)}function s(w,v){this.h=v;for(var E=[],I=!0,D=w.length-1;0<=D;D--){var C=w[D]|0;I&&C==v||(E[D]=C,I=!1)}this.g=E}var a={};function u(w){return-128<=w&&128>w?o(w,function(v){return new s([v|0],0>v?-1:0)}):new s([w|0],0>w?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(0>w)return R(l(-w));for(var v=[],E=1,I=0;w>=E;I++)v[I]=w/E|0,E*=4294967296;return new s(v,0)}function h(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return R(h(w.substring(1),v));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),I=p,D=0;D<w.length;D+=8){var C=Math.min(8,w.length-D),_=parseInt(w.substring(D,D+C),v);8>C?(C=l(Math.pow(v,C)),I=I.j(C).add(l(_))):(I=I.j(E),I=I.add(l(_)))}return I}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(M(this))return-R(this).m();for(var w=0,v=1,E=0;E<this.g.length;E++){var I=this.i(E);w+=(0<=I?I:4294967296+I)*v,v*=4294967296}return w},n.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(S(this))return"0";if(M(this))return"-"+R(this).toString(w);for(var v=l(Math.pow(w,6)),E=this,I="";;){var D=Te(E,v).g;E=V(E,D.j(v));var C=((0<E.g.length?E.g[0]:E.h)>>>0).toString(w);if(E=D,S(E))return C+I;for(;6>C.length;)C="0"+C;I=C+I}},n.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function S(w){if(w.h!=0)return!1;for(var v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function M(w){return w.h==-1}n.l=function(w){return w=V(this,w),M(w)?-1:S(w)?0:1};function R(w){for(var v=w.g.length,E=[],I=0;I<v;I++)E[I]=~w.g[I];return new s(E,~w.h).add(m)}n.abs=function(){return M(this)?R(this):this},n.add=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0,D=0;D<=v;D++){var C=I+(this.i(D)&65535)+(w.i(D)&65535),_=(C>>>16)+(this.i(D)>>>16)+(w.i(D)>>>16);I=_>>>16,C&=65535,_&=65535,E[D]=_<<16|C}return new s(E,E[E.length-1]&-2147483648?-1:0)};function V(w,v){return w.add(R(v))}n.j=function(w){if(S(this)||S(w))return p;if(M(this))return M(w)?R(this).j(R(w)):R(R(this).j(w));if(M(w))return R(this.j(R(w)));if(0>this.l(y)&&0>w.l(y))return l(this.m()*w.m());for(var v=this.g.length+w.g.length,E=[],I=0;I<2*v;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<w.g.length;D++){var C=this.i(I)>>>16,_=this.i(I)&65535,Xn=w.i(D)>>>16,Ra=w.i(D)&65535;E[2*I+2*D]+=_*Ra,Q(E,2*I+2*D),E[2*I+2*D+1]+=C*Ra,Q(E,2*I+2*D+1),E[2*I+2*D+1]+=_*Xn,Q(E,2*I+2*D+1),E[2*I+2*D+2]+=C*Xn,Q(E,2*I+2*D+2)}for(I=0;I<v;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=v;I<2*v;I++)E[I]=0;return new s(E,0)};function Q(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function Y(w,v){this.g=w,this.h=v}function Te(w,v){if(S(v))throw Error("division by zero");if(S(w))return new Y(p,p);if(M(w))return v=Te(R(w),v),new Y(R(v.g),R(v.h));if(M(v))return v=Te(w,R(v)),new Y(R(v.g),v.h);if(30<w.g.length){if(M(w)||M(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,I=v;0>=I.l(w);)E=wt(E),I=wt(I);var D=we(E,1),C=we(I,1);for(I=we(I,2),E=we(E,2);!S(I);){var _=C.add(I);0>=_.l(w)&&(D=D.add(E),C=_),I=we(I,1),E=we(E,1)}return v=V(w,D.j(v)),new Y(D,v)}for(D=p;0<=w.l(v);){for(E=Math.max(1,Math.floor(w.m()/v.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),C=l(E),_=C.j(v);M(_)||0<_.l(w);)E-=I,C=l(E),_=C.j(v);S(C)&&(C=m),D=D.add(C),w=V(w,_)}return new Y(D,w)}n.A=function(w){return Te(this,w).h},n.and=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)&w.i(I);return new s(E,this.h&w.h)},n.or=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)|w.i(I);return new s(E,this.h|w.h)},n.xor=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)^w.i(I);return new s(E,this.h^w.h)};function wt(w){for(var v=w.g.length+1,E=[],I=0;I<v;I++)E[I]=w.i(I)<<1|w.i(I-1)>>>31;return new s(E,w.h)}function we(w,v){var E=v>>5;v%=32;for(var I=w.g.length-E,D=[],C=0;C<I;C++)D[C]=0<v?w.i(C+E)>>>v|w.i(C+E+1)<<32-v:w.i(C+E);return new s(D,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,D_=xA.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,_r=xA.Integer=s}).apply(typeof PA<"u"?PA:typeof self<"u"?self:typeof window<"u"?window:{});var gf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Er={};var b_,mB,Js,T_,Cu,mf,C_,S_,A_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof gf=="object"&&gf];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in f))break e;f=f[b]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,b={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function S(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,b,A){for(var F=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)F[Ce-2]=arguments[Ce];return d.prototype[b].apply(g,F)}}function M(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let b=c.length||0,A=g.length||0;c.length=b+A;for(let F=0;F<A;F++)c[b+F]=g[F]}else c.push(g)}}class V{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function Q(c){return/^[\s\xa0]*$/.test(c)}function Y(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Te(c){return Te[" "](c),c}Te[" "]=function(){};var wt=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function we(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function w(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)c[f]=g[f];for(let A=0;A<E.length;A++)f=E[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function C(c){a.setTimeout(()=>{throw c},0)}function _(){var c=pp;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Xn{constructor(){this.h=this.g=null}add(d,f){let g=Ra.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Ra=new V(()=>new lM,c=>c.reset());class lM{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Na,Ma=!1,pp=new Xn,zI=()=>{let c=a.Promise.resolve(void 0);Na=()=>{c.then(dM)}};var dM=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){C(f)}var d=Ra;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ma=!1};function Nr(){this.s=this.s,this.C=this.C}Nr.prototype.s=!1,Nr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Nr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function lt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}lt.prototype.h=function(){this.defaultPrevented=!0};var hM=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c})();function Pa(c,d){if(lt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(wt){e:{try{Te(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:fM[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Pa.aa.h.call(this)}}S(Pa,lt);var fM={2:"touch",3:"pen",4:"mouse"};Pa.prototype.h=function(){Pa.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var xa="closure_listenable_"+(1e6*Math.random()|0),pM=0;function gM(c,d,f,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++pM,this.da=this.fa=!1}function Gu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Wu(c){this.src=c,this.g={},this.h=0}Wu.prototype.add=function(c,d,f,g,b){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var F=mp(c,d,g,b);return-1<F?(d=c[F],f||(d.fa=!1)):(d=new gM(d,this.src,A,!!g,b),d.fa=f,c.push(d)),d};function gp(c,d){var f=d.type;if(f in c.g){var g=c.g[f],b=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=b)&&Array.prototype.splice.call(g,b,1),A&&(Gu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function mp(c,d,f,g){for(var b=0;b<c.length;++b){var A=c[b];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return b}return-1}var yp="closure_lm_"+(1e6*Math.random()|0),vp={};function GI(c,d,f,g,b){if(g&&g.once)return KI(c,d,f,g,b);if(Array.isArray(d)){for(var A=0;A<d.length;A++)GI(c,d[A],f,g,b);return null}return f=wp(f),c&&c[xa]?c.K(d,f,l(g)?!!g.capture:!!g,b):WI(c,d,f,!1,g,b)}function WI(c,d,f,g,b,A){if(!d)throw Error("Invalid event type");var F=l(b)?!!b.capture:!!b,Ce=Ep(c);if(Ce||(c[yp]=Ce=new Wu(c)),f=Ce.add(d,f,g,F,A),f.proxy)return f;if(g=mM(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)hM||(b=F),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(YI(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function mM(){function c(f){return d.call(c.src,c.listener,f)}let d=yM;return c}function KI(c,d,f,g,b){if(Array.isArray(d)){for(var A=0;A<d.length;A++)KI(c,d[A],f,g,b);return null}return f=wp(f),c&&c[xa]?c.L(d,f,l(g)?!!g.capture:!!g,b):WI(c,d,f,!0,g,b)}function QI(c,d,f,g,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)QI(c,d[A],f,g,b);else g=l(g)?!!g.capture:!!g,f=wp(f),c&&c[xa]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=mp(A,f,g,b),-1<f&&(Gu(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Ep(c))&&(d=c.g[d.toString()],c=-1,d&&(c=mp(d,f,g,b)),(f=-1<c?d[c]:null)&&_p(f))}function _p(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[xa])gp(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(YI(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Ep(d))?(gp(f,c),f.h==0&&(f.src=null,d[yp]=null)):Gu(c)}}}function YI(c){return c in vp?vp[c]:vp[c]="on"+c}function yM(c,d){if(c.da)c=!0;else{d=new Pa(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&_p(c),c=f.call(g,d)}return c}function Ep(c){return c=c[yp],c instanceof Wu?c:null}var Ip="__closure_events_fn_"+(1e9*Math.random()>>>0);function wp(c){return typeof c=="function"?c:(c[Ip]||(c[Ip]=function(d){return c.handleEvent(d)}),c[Ip])}function dt(){Nr.call(this),this.i=new Wu(this),this.M=this,this.F=null}S(dt,Nr),dt.prototype[xa]=!0,dt.prototype.removeEventListener=function(c,d,f,g){QI(this,c,d,f,g)};function Dt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new lt(d,c);else if(d instanceof lt)d.target=d.target||c;else{var b=d;d=new lt(g,c),I(d,b)}if(b=!0,f)for(var A=f.length-1;0<=A;A--){var F=d.g=f[A];b=Ku(F,g,!0,d)&&b}if(F=d.g=c,b=Ku(F,g,!0,d)&&b,b=Ku(F,g,!1,d)&&b,f)for(A=0;A<f.length;A++)F=d.g=f[A],b=Ku(F,g,!1,d)&&b}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Gu(f[g]);delete c.g[d],c.h--}}this.F=null},dt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},dt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Ku(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,A=0;A<d.length;++A){var F=d[A];if(F&&!F.da&&F.capture==f){var Ce=F.listener,nt=F.ha||F.src;F.fa&&gp(c.i,F),b=Ce.call(nt,g)!==!1&&b}}return b&&!g.defaultPrevented}function ZI(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function JI(c){c.g=ZI(()=>{c.g=null,c.i&&(c.i=!1,JI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class vM extends Nr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:JI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ka(c){Nr.call(this),this.h=c,this.g={}}S(ka,Nr);var XI=[];function ew(c){we(c.g,function(d,f){this.g.hasOwnProperty(f)&&_p(d)},c),c.g={}}ka.prototype.N=function(){ka.aa.N.call(this),ew(this)},ka.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dp=a.JSON.stringify,_M=a.JSON.parse,EM=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function bp(){}bp.prototype.h=null;function tw(c){return c.h||(c.h=c.i())}function nw(){}var Oa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tp(){lt.call(this,"d")}S(Tp,lt);function Cp(){lt.call(this,"c")}S(Cp,lt);var Si={},rw=null;function Qu(){return rw=rw||new dt}Si.La="serverreachability";function iw(c){lt.call(this,Si.La,c)}S(iw,lt);function Fa(c){let d=Qu();Dt(d,new iw(d))}Si.STAT_EVENT="statevent";function ow(c,d){lt.call(this,Si.STAT_EVENT,c),this.stat=d}S(ow,lt);function bt(c){let d=Qu();Dt(d,new ow(d,c))}Si.Ma="timingevent";function sw(c,d){lt.call(this,Si.Ma,c),this.size=d}S(sw,lt);function La(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Va(){this.g=!0}Va.prototype.xa=function(){this.g=!1};function IM(c,d,f,g,b,A){c.info(function(){if(c.g)if(A)for(var F="",Ce=A.split("&"),nt=0;nt<Ce.length;nt++){var me=Ce[nt].split("=");if(1<me.length){var ht=me[0];me=me[1];var ft=ht.split("_");F=2<=ft.length&&ft[1]=="type"?F+(ht+"="+me+"&"):F+(ht+"=redacted&")}}else F=null;else F=A;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+F})}function wM(c,d,f,g,b,A,F){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+A+" "+F})}function Lo(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+bM(c,f)+(g?" "+g:"")})}function DM(c,d){c.info(function(){return"TIMEOUT: "+d})}Va.prototype.info=function(){};function bM(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var F=1;F<b.length;F++)b[F]=""}}}}return Dp(f)}catch{return d}}var Yu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},aw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sp;function Zu(){}S(Zu,bp),Zu.prototype.g=function(){return new XMLHttpRequest},Zu.prototype.i=function(){return{}},Sp=new Zu;function Mr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new ka(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cw}function cw(){this.i=null,this.g="",this.h=!1}var uw={},Ap={};function Rp(c,d,f){c.L=1,c.v=tl(er(d)),c.m=f,c.P=!0,lw(c,null)}function lw(c,d){c.F=Date.now(),Ju(c),c.A=er(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),bw(f.i,"t",g),c.C=0,f=c.j.J,c.h=new cw,c.g=$w(c.j,f?d:null,!c.m),0<c.O&&(c.M=new vM(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(XI[0]=b.toString()),b=XI);for(var A=0;A<b.length;A++){var F=GI(f,b[A],g||d.handleEvent,!1,d.h||d);if(!F)break;d.g[F.key]=F}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Fa(),IM(c.i,c.u,c.A,c.l,c.R,c.m)}Mr.prototype.ca=function(c){c=c.target;let d=this.M;d&&tr(c)==3?d.j():this.Y(c)},Mr.prototype.Y=function(c){try{if(c==this.g)e:{let ft=tr(this.g);var d=this.g.Ba();let Uo=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||Mw(this.g)))){this.J||ft!=4||d==7||(d==8||0>=Uo?Fa(3):Fa(2)),Np(this);var f=this.g.Z();this.X=f;t:if(dw(this)){var g=Mw(this.g);c="";var b=g.length,A=tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ai(this),ja(this);var F="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==b-1)});g.length=0,this.h.g+=c,this.C=0,F=this.h.g}else F=this.g.oa();if(this.o=f==200,wM(this.i,this.u,this.A,this.l,this.R,ft,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,nt=this.g;if((Ce=nt.g?nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(Ce)){var me=Ce;break t}}me=null}if(f=me)Lo(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mp(this,f);else{this.o=!1,this.s=3,bt(12),Ai(this),ja(this);break e}}if(this.P){f=!0;let sn;for(;!this.J&&this.C<F.length;)if(sn=TM(this,F),sn==Ap){ft==4&&(this.s=4,bt(14),f=!1),Lo(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==uw){this.s=4,bt(15),Lo(this.i,this.l,F,"[Invalid Chunk]"),f=!1;break}else Lo(this.i,this.l,sn,null),Mp(this,sn);if(dw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||F.length!=0||this.h.h||(this.s=1,bt(16),f=!1),this.o=this.o&&f,!f)Lo(this.i,this.l,F,"[Invalid Chunked Response]"),Ai(this),ja(this);else if(0<F.length&&!this.W){this.W=!0;var ht=this.j;ht.g==this&&ht.ba&&!ht.M&&(ht.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),Lp(ht),ht.M=!0,bt(11))}}else Lo(this.i,this.l,F,null),Mp(this,F);ft==4&&Ai(this),this.o&&!this.J&&(ft==4?Vw(this.j,this):(this.o=!1,Ju(this)))}else $M(this.g),f==400&&0<F.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),Ai(this),ja(this)}}}catch{}finally{}};function dw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function TM(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Ap:(f=Number(d.substring(f,g)),isNaN(f)?uw:(g+=1,g+f>d.length?Ap:(d=d.slice(g,g+f),c.C=g+f,d)))}Mr.prototype.cancel=function(){this.J=!0,Ai(this)};function Ju(c){c.S=Date.now()+c.I,hw(c,c.I)}function hw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=La(m(c.ba,c),d)}function Np(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Mr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(DM(this.i,this.A),this.L!=2&&(Fa(),bt(17)),Ai(this),this.s=2,ja(this)):hw(this,this.S-c)};function ja(c){c.j.G==0||c.J||Vw(c.j,c)}function Ai(c){Np(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,ew(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Mp(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Pp(f.h,c))){if(!c.K&&Pp(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)sl(f),il(f);else break e;Fp(f),bt(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=La(m(f.Za,f),6e3));if(1>=gw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ni(f,11)}else if((c.K||f.g==c)&&sl(f),!Q(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let me=b[d];if(f.T=me[0],me=me[1],f.G==2)if(me[0]=="c"){f.K=me[1],f.ia=me[2];let ht=me[3];ht!=null&&(f.la=ht,f.j.info("VER="+f.la));let ft=me[4];ft!=null&&(f.Aa=ft,f.j.info("SVER="+f.Aa));let Uo=me[5];Uo!=null&&typeof Uo=="number"&&0<Uo&&(g=1.5*Uo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let sn=c.g;if(sn){let cl=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cl){var A=g.h;A.g||cl.indexOf("spdy")==-1&&cl.indexOf("quic")==-1&&cl.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(xp(A,A.h),A.h=null))}if(g.D){let Vp=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Vp&&(g.ya=Vp,Ae(g.I,g.D,Vp))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var F=c;if(g.qa=Bw(g,g.J?g.ia:null,g.W),F.K){mw(g.h,F);var Ce=F,nt=g.L;nt&&(Ce.I=nt),Ce.B&&(Np(Ce),Ju(Ce)),g.g=F}else Fw(g);0<f.i.length&&ol(f)}else me[0]!="stop"&&me[0]!="close"||Ni(f,7);else f.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?Ni(f,7):Op(f):me[0]!="noop"&&f.l&&f.l.ta(me),f.v=0)}}Fa(4)}catch{}}var CM=class{constructor(c,d){this.g=c,this.map=d}};function fw(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function gw(c){return c.h?1:c.g?c.g.size:0}function Pp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function xp(c,d){c.g?c.g.add(d):c.h=d}function mw(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}fw.prototype.cancel=function(){if(this.i=yw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function yw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return M(c.i)}function SM(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function AM(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function vw(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=AM(c),g=SM(c),b=g.length,A=0;A<b;A++)d.call(void 0,g[A],f&&f[A],c)}var _w=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function RM(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),b=null;if(0<=g){var A=c[f].substring(0,g);b=c[f].substring(g+1)}else A=c[f];d(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Ri(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ri){this.h=c.h,Xu(this,c.j),this.o=c.o,this.g=c.g,el(this,c.s),this.l=c.l;var d=c.i,f=new $a;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Ew(this,f),this.m=c.m}else c&&(d=String(c).match(_w))?(this.h=!1,Xu(this,d[1]||"",!0),this.o=Ua(d[2]||""),this.g=Ua(d[3]||"",!0),el(this,d[4]),this.l=Ua(d[5]||"",!0),Ew(this,d[6]||"",!0),this.m=Ua(d[7]||"")):(this.h=!1,this.i=new $a(null,this.h))}Ri.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Ba(d,Iw,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Ba(d,Iw,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Ba(f,f.charAt(0)=="/"?PM:MM,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Ba(f,kM)),c.join("")};function er(c){return new Ri(c)}function Xu(c,d,f){c.j=f?Ua(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function el(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Ew(c,d,f){d instanceof $a?(c.i=d,OM(c.i,c.h)):(f||(d=Ba(d,xM)),c.i=new $a(d,c.h))}function Ae(c,d,f){c.i.set(d,f)}function tl(c){return Ae(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ua(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ba(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,NM),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function NM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Iw=/[#\/\?@]/g,MM=/[#\?:]/g,PM=/[#\?]/g,xM=/[#\?@]/g,kM=/#/g;function $a(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Pr(c){c.g||(c.g=new Map,c.h=0,c.i&&RM(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=$a.prototype,n.add=function(c,d){Pr(this),this.i=null,c=Vo(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function ww(c,d){Pr(c),d=Vo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Dw(c,d){return Pr(c),d=Vo(c,d),c.g.has(d)}n.forEach=function(c,d){Pr(this),this.g.forEach(function(f,g){f.forEach(function(b){c.call(d,b,g,this)},this)},this)},n.na=function(){Pr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=c[g];for(let A=0;A<b.length;A++)f.push(d[g])}return f},n.V=function(c){Pr(this);let d=[];if(typeof c=="string")Dw(this,c)&&(d=d.concat(this.g.get(Vo(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return Pr(this),this.i=null,c=Vo(this,c),Dw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function bw(c,d,f){ww(c,d),0<f.length&&(c.i=null,c.g.set(Vo(c,d),M(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),F=this.V(g);for(g=0;g<F.length;g++){var b=A;F[g]!==""&&(b+="="+encodeURIComponent(String(F[g]))),c.push(b)}}return this.i=c.join("&")};function Vo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function OM(c,d){d&&!c.j&&(Pr(c),c.i=null,c.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&(ww(this,g),bw(this,b,f))},c)),c.j=d}function FM(c,d){let f=new Va;if(a.Image){let g=new Image;g.onload=y(xr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(xr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(xr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(xr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function LM(c,d){let f=new Va,g=new AbortController,b=setTimeout(()=>{g.abort(),xr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(b),A.ok?xr(f,"TestPingServer: ok",!0,d):xr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),xr(f,"TestPingServer: error",!1,d)})}function xr(c,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function VM(){this.g=new EM}function jM(c,d,f){let g=f||"";try{vw(c,function(b,A){let F=b;l(b)&&(F=Dp(b)),d.push(g+A+"="+encodeURIComponent(F))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function Ha(c){this.l=c.Ub||null,this.j=c.eb||!1}S(Ha,bp),Ha.prototype.g=function(){return new nl(this.l,this.j)},Ha.prototype.i=(function(c){return function(){return c}})({});function nl(c,d){dt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(nl,dt),n=nl.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,za(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qa(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,za(this)),this.g&&(this.readyState=3,za(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?qa(this):za(this),this.readyState==3&&Tw(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,qa(this))},n.Qa=function(c){this.g&&(this.response=c,qa(this))},n.ga=function(){this.g&&qa(this)};function qa(c){c.readyState=4,c.l=null,c.j=null,c.v=null,za(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function za(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(nl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Cw(c){let d="";return we(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function kp(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Cw(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Ae(c,d,f))}function Pe(c){dt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Pe,dt);var UM=/^https?$/i,BM=["POST","PUT"];n=Pe.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sp.g(),this.v=this.o?tw(this.o):tw(Sp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){Sw(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(BM,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,F]of f)this.g.setRequestHeader(A,F);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Nw(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){Sw(this,A)}};function Sw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,Aw(c),rl(c)}function Aw(c){c.A||(c.A=!0,Dt(c,"complete"),Dt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Dt(this,"complete"),Dt(this,"abort"),rl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rl(this,!0)),Pe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Rw(this):this.bb())},n.bb=function(){Rw(this)};function Rw(c){if(c.h&&typeof s<"u"&&(!c.v[1]||tr(c)!=4||c.Z()!=2)){if(c.u&&tr(c)==4)ZI(c.Ea,0,c);else if(Dt(c,"readystatechange"),tr(c)==4){c.h=!1;try{let F=c.Z();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=F===0){var b=String(c.D).match(_w)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!UM.test(b?b.toLowerCase():"")}f=g}if(f)Dt(c,"complete"),Dt(c,"success");else{c.m=6;try{var A=2<tr(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",Aw(c)}}finally{rl(c)}}}}function rl(c,d){if(c.g){Nw(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Dt(c,"ready");try{f.onreadystatechange=g}catch{}}}function Nw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function tr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<tr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),_M(d)}};function Mw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function $M(c){let d={};c=(c.g&&2<=tr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(Q(c[g]))continue;var f=D(c[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[b]||[];d[b]=A,A.push(f)}w(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ga(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function Pw(c){this.Aa=0,this.i=[],this.j=new Va,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ga("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ga("baseRetryDelayMs",5e3,c),this.cb=Ga("retryDelaySeedMs",1e4,c),this.Wa=Ga("forwardChannelMaxRetries",2,c),this.wa=Ga("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new fw(c&&c.concurrentRequestLimit),this.Da=new VM,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Pw.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){bt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Bw(this,null,this.W),ol(this)};function Op(c){if(xw(c),c.G==3){var d=c.U++,f=er(c.I);if(Ae(f,"SID",c.K),Ae(f,"RID",d),Ae(f,"TYPE","terminate"),Wa(c,f),d=new Mr(c,c.j,d),d.L=2,d.v=tl(er(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=$w(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ju(d)}Uw(c)}function il(c){c.g&&(Lp(c),c.g.cancel(),c.g=null)}function xw(c){il(c),c.u&&(a.clearTimeout(c.u),c.u=null),sl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function ol(c){if(!pw(c.h)&&!c.s){c.s=!0;var d=c.Ga;Na||zI(),Ma||(Na(),Ma=!0),pp.add(d,c),c.B=0}}function HM(c,d){return gw(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=La(m(c.Ga,c,d),jw(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new Mr(this,this.j,c),A=this.o;if(this.S&&(A?(A=v(A),I(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Ow(this,b,d),f=er(this.I),Ae(f,"RID",c),Ae(f,"CVER",22),this.D&&Ae(f,"X-HTTP-Session-Id",this.D),Wa(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(Cw(A)))+"&"+d:this.m&&kp(f,this.m,A)),xp(this.h,b),this.Ua&&Ae(f,"TYPE","init"),this.P?(Ae(f,"$req",d),Ae(f,"SID","null"),b.T=!0,Rp(b,f,null)):Rp(b,f,d),this.G=2}}else this.G==3&&(c?kw(this,c):this.i.length==0||pw(this.h)||kw(this))};function kw(c,d){var f;d?f=d.l:f=c.U++;let g=er(c.I);Ae(g,"SID",c.K),Ae(g,"RID",f),Ae(g,"AID",c.T),Wa(c,g),c.m&&c.o&&kp(g,c.m,c.o),f=new Mr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=Ow(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),xp(c.h,f),Rp(f,g,d)}function Wa(c,d){c.H&&we(c.H,function(f,g){Ae(d,g,f)}),c.l&&vw({},function(f,g){Ae(d,g,f)})}function Ow(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var b=c.i;let A=-1;for(;;){let F=["count="+f];A==-1?0<f?(A=b[0].g,F.push("ofs="+A)):A=0:F.push("ofs="+A);let Ce=!0;for(let nt=0;nt<f;nt++){let me=b[nt].g,ht=b[nt].map;if(me-=A,0>me)A=Math.max(0,b[nt].g-100),Ce=!1;else try{jM(ht,F,"req"+me+"_")}catch{g&&g(ht)}}if(Ce){g=F.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function Fw(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Na||zI(),Ma||(Na(),Ma=!0),pp.add(d,c),c.v=0}}function Fp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=La(m(c.Fa,c),jw(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Lw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=La(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),il(this),Lw(this))};function Lp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Lw(c){c.g=new Mr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=er(c.qa);Ae(d,"RID","rpc"),Ae(d,"SID",c.K),Ae(d,"AID",c.T),Ae(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ae(d,"TO",c.ja),Ae(d,"TYPE","xmlhttp"),Wa(c,d),c.m&&c.o&&kp(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=tl(er(d)),f.m=null,f.P=!0,lw(f,c)}n.Za=function(){this.C!=null&&(this.C=null,il(this),Fp(this),bt(19))};function sl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Vw(c,d){var f=null;if(c.g==d){sl(c),Lp(c),c.g=null;var g=2}else if(Pp(c.h,d))f=d.D,mw(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;g=Qu(),Dt(g,new sw(g,f)),ol(c)}else Fw(c);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&HM(c,d)||g==2&&Fp(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),b){case 1:Ni(c,5);break;case 4:Ni(c,10);break;case 3:Ni(c,6);break;default:Ni(c,2)}}}function jw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Ni(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let b=!g;g=new Ri(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Xu(g,"https"),tl(g),b?FM(g.toString(),f):LM(g.toString(),f)}else bt(2);c.G=0,c.l&&c.l.sa(d),Uw(c),xw(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function Uw(c){if(c.G=0,c.ka=[],c.l){let d=yw(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,M(c.i),c.i.length=0),c.l.ra()}}function Bw(c,d,f){var g=f instanceof Ri?er(f):new Ri(f);if(g.g!="")d&&(g.g=d+"."+g.g),el(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var A=new Ri(null);g&&Xu(A,g),d&&(A.g=d),b&&el(A,b),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Ae(g,f,d),Ae(g,"VER",c.la),Wa(c,g),g}function $w(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Pe(new Ha({eb:f})):new Pe(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hw(){}n=Hw.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function al(){}al.prototype.g=function(c,d){return new kt(c,d)};function kt(c,d){dt.call(this),this.g=new Pw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!Q(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!Q(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new jo(this)}S(kt,dt),kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kt.prototype.close=function(){Op(this.g)},kt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Dp(c),c=f);d.i.push(new CM(d.Ya++,c)),d.G==3&&ol(d)},kt.prototype.N=function(){this.g.l=null,delete this.j,Op(this.g),delete this.g,kt.aa.N.call(this)};function qw(c){Tp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}S(qw,Tp);function zw(){Cp.call(this),this.status=1}S(zw,Cp);function jo(c){this.g=c}S(jo,Hw),jo.prototype.ua=function(){Dt(this.g,"a")},jo.prototype.ta=function(c){Dt(this.g,new qw(c))},jo.prototype.sa=function(c){Dt(this.g,new zw)},jo.prototype.ra=function(){Dt(this.g,"b")},al.prototype.createWebChannel=al.prototype.g,kt.prototype.send=kt.prototype.o,kt.prototype.open=kt.prototype.m,kt.prototype.close=kt.prototype.close,A_=Er.createWebChannelTransport=function(){return new al},S_=Er.getStatEventTarget=function(){return Qu()},C_=Er.Event=Si,mf=Er.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yu.NO_ERROR=0,Yu.TIMEOUT=8,Yu.HTTP_ERROR=6,Cu=Er.ErrorCode=Yu,aw.COMPLETE="complete",T_=Er.EventType=aw,nw.EventType=Oa,Oa.OPEN="a",Oa.CLOSE="b",Oa.ERROR="c",Oa.MESSAGE="d",dt.prototype.listen=dt.prototype.K,Js=Er.WebChannel=nw,mB=Er.FetchXmlHttpFactory=Ha,Pe.prototype.listenOnce=Pe.prototype.L,Pe.prototype.getLastError=Pe.prototype.Ka,Pe.prototype.getLastErrorCode=Pe.prototype.Ba,Pe.prototype.getStatus=Pe.prototype.Z,Pe.prototype.getResponseJson=Pe.prototype.Oa,Pe.prototype.getResponseText=Pe.prototype.oa,Pe.prototype.send=Pe.prototype.ea,Pe.prototype.setWithCredentials=Pe.prototype.Ha,b_=Er.XhrIo=Pe}).apply(typeof gf<"u"?gf:typeof self<"u"?self:typeof window<"u"?window:{});var kA="@firebase/firestore",OA="4.8.0";var et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};et.UNAUTHENTICATED=new et(null),et.GOOGLE_CREDENTIALS=new et("google-credentials-uid"),et.FIRST_PARTY=new et("first-party-uid"),et.MOCK_USER=new et("mock-user");var Ia="11.10.0";var No=new zn("@firebase/firestore");function Xs(){return No.logLevel}function j(n,...e){if(No.logLevel<=le.DEBUG){let t=e.map(gI);No.debug(`Firestore (${Ia}): ${n}`,...t)}}function Dr(n,...e){if(No.logLevel<=le.ERROR){let t=e.map(gI);No.error(`Firestore (${Ia}): ${n}`,...t)}}function Ii(n,...e){if(No.logLevel<=le.WARN){let t=e.map(gI);No.warn(`Firestore (${Ia}): ${n}`,...t)}}function gI(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function W(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,TR(n,r,t)}function TR(n,e,t){let r=`FIRESTORE (${Ia}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Dr(r),new Error(r)}function Ie(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||TR(e,i,r)}function ee(n,e){return n}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},H=class extends tn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ir=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Df=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},x_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(et.UNAUTHENTICATED))}shutdown(){}},k_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},O_=class{constructor(e){this.t=e,this.currentUser=et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ie(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ir,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>T(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ir)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string",31837,{l:r}),new Df(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string",2055,{h:e}),new et(e)}},F_=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},L_=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new F_(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(et.FIRST_PARTY))}shutdown(){}invalidateToken(){}},bf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},V_=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ie(this.o===void 0,3512);let r=o=>{o.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,j("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new bf(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ie(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new bf(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function yB(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function CR(){return new TextEncoder}var Pu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=yB(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ce(n,e){return n<e?-1:n>e?1:0}function j_(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return ce(r,i);{let o=CR(),s=vB(o.encode(FA(n,t)),o.encode(FA(e,t)));return s!==0?s:ce(r,i)}}t+=r>65535?2:1}return ce(n.length,e.length)}function FA(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function vB(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ce(n[t],e[t]);return ce(n.length,e.length)}function aa(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var LA="__name__",Tf=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&W(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&W(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ce(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):j_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _r.fromString(e.substring(4,e.length-2))}},Me=class n extends Tf{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new H(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},_B=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Kt=class n extends Tf{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return _B.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===LA}static keyField(){return new n([LA])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new H(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new H(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new H(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var G=class n{constructor(e){this.path=e}static fromPath(e){return new n(Me.fromString(e))}static fromName(e){return new n(Me.fromString(e).popFirst(5))}static empty(){return new n(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Me.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Me(e.slice()))}};function SR(n,e,t){if(!t)throw new H(P.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function EB(n,e,t,r){if(e===!0&&r===!0)throw new H(P.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function VA(n){if(!G.isDocumentKey(n))throw new H(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function jA(n){if(G.isDocumentKey(n))throw new H(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function AR(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function mI(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":W(12329,{type:typeof n})}function mi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new H(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=mI(n);throw new H(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Ke(n,e){let t={typeString:n};return e&&(t.value=e),t}function Hu(n,e){if(!AR(n))throw new H(P.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new H(P.INVALID_ARGUMENT,t);return!0}var UA=-62135596800,BA=1e6,Qe=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*BA);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new H(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new H(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<UA)throw new H(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/BA}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Hu(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-UA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Qe._jsonSchemaVersion="firestore/timestamp/1.0",Qe._jsonSchema={type:Ke("string",Qe._jsonSchemaVersion),seconds:Ke("number"),nanoseconds:Ke("number")};var ne=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Qe(0,0))}static max(){return new n(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var xu=-1,U_=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};U_.UNKNOWN_ID=-1;function IB(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new Qe(t+1,0):new Qe(t,r));return new Mo(i,G.empty(),e)}function wB(n){return new Mo(n.readTime,n.key,xu)}var Mo=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ne.min(),G.empty(),xu)}static max(){return new n(ne.max(),G.empty(),xu)}};function DB(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=G.comparator(n.documentKey,e.documentKey),t!==0?t:ce(n.largestBatchId,e.largestBatchId))}var bB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",B_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function wa(n){return T(this,null,function*(){if(n.code!==P.FAILED_PRECONDITION||n.message!==bB)throw n;j("LocalStore","Unexpectedly lost primary lease")})}var x=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&W(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function TB(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Da(n){return n.name==="IndexedDbTransactionError"}var yI=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),vI=-1;function np(n){return n==null}function ku(n){return n===0&&1/n==-1/0}function CB(n){return typeof n=="number"&&Number.isInteger(n)&&!ku(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var RR="";function SB(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=$A(e)),e=AB(n.get(t),e);return $A(e)}function AB(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case RR:t+="";break;default:t+=o}}return t}function $A(n){return n+RR+""}var RB="remoteDocuments",NR="owner";var MR="mutationQueues";var PR="mutations";var xR="documentMutations",NB="remoteDocumentsV14";var kR="remoteDocumentGlobal";var OR="targets";var FR="targetDocuments";var LR="targetGlobal",VR="collectionParents";var jR="clientMetadata";var UR="bundles";var BR="namedQueries";var MB="indexConfiguration";var PB="indexState";var xB="indexEntries";var $R="documentOverlays";var kB="globals";var OB=[MR,PR,xR,RB,OR,NR,LR,FR,jR,kR,VR,UR,BR],vre=[...OB,$R],FB=[MR,PR,xR,NB,OR,NR,LR,FR,jR,kR,VR,UR,BR,$R],LB=FB,VB=[...LB,MB,PB,xB];var _re=[...VB,kB];function HA(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ci(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function HR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Oe=class n{constructor(e,t){this.comparator=e,this.root=t||Wn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ra(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ra(this.root,e,this.comparator,!1)}getReverseIterator(){return new ra(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ra(this.root,e,this.comparator,!0)}},ra=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Wn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw W(43730,{key:this.key,value:this.value});if(this.right.isRed())throw W(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw W(27949);return e+(this.isRed()?0:1)}};Wn.EMPTY=null,Wn.RED=!0,Wn.BLACK=!1;Wn.EMPTY=new class{constructor(){this.size=0}get key(){throw W(57766)}get value(){throw W(16141)}get color(){throw W(16727)}get left(){throw W(29726)}get right(){throw W(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Wn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var tt=class n{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Cf(this.data.getIterator())}getIteratorFrom(e){return new Cf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Cf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var on=class n{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new n([])}unionWith(e){let t=new tt(Kt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return aa(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Sf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var It=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Sf("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};It.EMPTY_BYTE_STRING=new It("");var jB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function br(n){if(Ie(!!n,39018),typeof n=="string"){let e=0,t=jB.exec(n);if(Ie(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Re(n.seconds),nanos:Re(n.nanos)}}function Re(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Tr(n){return typeof n=="string"?It.fromBase64String(n):It.fromUint8Array(n)}var qR="server_timestamp",zR="__type__",GR="__previous_value__",WR="__local_write_time__";function _I(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[zR])===null||t===void 0?void 0:t.stringValue)===qR}function rp(n){let e=n.mapValue.fields[GR];return _I(e)?rp(e):e}function Ou(n){let e=br(n.mapValue.fields[WR].timestampValue);return new Qe(e.seconds,e.nanos)}var $_=class{constructor(e,t,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Af="(default)",Rf=class n{constructor(e,t){this.projectId=e,this.database=t||Af}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Af}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var EI="__type__",KR="__max__",yf={mapValue:{fields:{__type__:{stringValue:KR}}}},II="__vector__",ca="value";function wi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?_I(n)?4:YR(n)?9007199254740991:QR(n)?10:11:W(28295,{value:n})}function Yn(n,e){if(n===e)return!0;let t=wi(n);if(t!==wi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ou(n).isEqual(Ou(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=br(i.timestampValue),a=br(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return Tr(i.bytesValue).isEqual(Tr(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Re(i.geoPointValue.latitude)===Re(o.geoPointValue.latitude)&&Re(i.geoPointValue.longitude)===Re(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Re(i.integerValue)===Re(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Re(i.doubleValue),a=Re(o.doubleValue);return s===a?ku(s)===ku(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return aa(n.arrayValue.values||[],e.arrayValue.values||[],Yn);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(HA(s)!==HA(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Yn(s[u],a[u])))return!1;return!0})(n,e);default:return W(52216,{left:n})}}function Fu(n,e){return(n.values||[]).find(t=>Yn(t,e))!==void 0}function ua(n,e){if(n===e)return 0;let t=wi(n),r=wi(e);if(t!==r)return ce(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ce(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Re(o.integerValue||o.doubleValue),u=Re(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(n,e);case 3:return qA(n.timestampValue,e.timestampValue);case 4:return qA(Ou(n),Ou(e));case 5:return j_(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=Tr(o),u=Tr(s);return a.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ce(a[l],u[l]);if(h!==0)return h}return ce(a.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=ce(Re(o.latitude),Re(s.latitude));return a!==0?a:ce(Re(o.longitude),Re(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return zA(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p[ca])===null||a===void 0?void 0:a.arrayValue,S=(u=m[ca])===null||u===void 0?void 0:u.arrayValue,M=ce(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=S?.values)===null||h===void 0?void 0:h.length)||0);return M!==0?M:zA(y,S)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===yf.mapValue&&s===yf.mapValue)return 0;if(o===yf.mapValue)return 1;if(s===yf.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=j_(u[p],h[p]);if(m!==0)return m;let y=ua(a[u[p]],l[h[p]]);if(y!==0)return y}return ce(u.length,h.length)})(n.mapValue,e.mapValue);default:throw W(23264,{le:t})}}function qA(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ce(n,e);let t=br(n),r=br(e),i=ce(t.seconds,r.seconds);return i!==0?i:ce(t.nanos,r.nanos)}function zA(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=ua(t[i],r[i]);if(o)return o}return ce(t.length,r.length)}function la(n){return H_(n)}function H_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=br(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Tr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return G.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=H_(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${H_(t.fields[s])}`;return i+"}"})(n.mapValue):W(61005,{value:n})}function Ef(n){switch(wi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=rp(n);return e?16+Ef(e):16;case 5:return 2*n.stringValue.length;case 6:return Tr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Ef(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Ci(r.fields,(o,s)=>{i+=o.length+Ef(s)}),i})(n.mapValue);default:throw W(13486,{value:n})}}function q_(n){return!!n&&"integerValue"in n}function wI(n){return!!n&&"arrayValue"in n}function GA(n){return!!n&&"nullValue"in n}function WA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function If(n){return!!n&&"mapValue"in n}function QR(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[EI])===null||t===void 0?void 0:t.stringValue)===II}function Au(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ci(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Au(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Au(n.arrayValue.values[t]);return e}return Object.assign({},n)}function YR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===KR}var Ire={mapValue:{fields:{[EI]:{stringValue:II},[ca]:{arrayValue:{}}}}};var Wt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!If(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Au(t)}setAll(e){let t=Kt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Au(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());If(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];If(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ci(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Au(this.value))}};function ZR(n){let e=[];return Ci(n.fields,(t,r)=>{let i=new Kt([t]);if(If(r)){let o=ZR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new on(e)}var Tn=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ne.min(),ne.min(),ne.min(),Wt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ne.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ne.min(),ne.min(),Wt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ne.min(),ne.min(),Wt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var da=class{constructor(e,t){this.position=e,this.inclusive=t}};function KA(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=G.comparator(G.fromName(s.referenceValue),t.key):r=ua(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function QA(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Yn(n.position[t],e.position[t]))return!1;return!0}var ha=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function UB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Nf=class{},Ze=class n extends Nf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new G_(e,t,r):t==="array-contains"?new Q_(e,r):t==="in"?new Y_(e,r):t==="not-in"?new Z_(e,r):t==="array-contains-any"?new J_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new W_(e,r):new K_(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ua(t,this.value)):t!==null&&wi(this.value)===wi(t)&&this.matchesComparison(ua(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return W(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Zn=class n extends Nf{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return JR(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function JR(n){return n.op==="and"}function XR(n){return BB(n)&&JR(n)}function BB(n){for(let e of n.filters)if(e instanceof Zn)return!1;return!0}function z_(n){if(n instanceof Ze)return n.field.canonicalString()+n.op.toString()+la(n.value);if(XR(n))return n.filters.map(e=>z_(e)).join(",");{let e=n.filters.map(t=>z_(t)).join(",");return`${n.op}(${e})`}}function eN(n,e){return n instanceof Ze?(function(r,i){return i instanceof Ze&&r.op===i.op&&r.field.isEqual(i.field)&&Yn(r.value,i.value)})(n,e):n instanceof Zn?(function(r,i){return i instanceof Zn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&eN(s,i.filters[a]),!0):!1})(n,e):void W(19439)}function tN(n){return n instanceof Ze?(function(t){return`${t.field.canonicalString()} ${t.op} ${la(t.value)}`})(n):n instanceof Zn?(function(t){return t.op.toString()+" {"+t.getFilters().map(tN).join(" ,")+"}"})(n):"Filter"}var G_=class extends Ze{constructor(e,t,r){super(e,t,r),this.key=G.fromName(r.referenceValue)}matches(e){let t=G.comparator(e.key,this.key);return this.matchesComparison(t)}},W_=class extends Ze{constructor(e,t){super(e,"in",t),this.keys=nN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},K_=class extends Ze{constructor(e,t){super(e,"not-in",t),this.keys=nN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function nN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>G.fromName(r.referenceValue))}var Q_=class extends Ze{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return wI(t)&&Fu(t.arrayValue,this.value)}},Y_=class extends Ze{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Fu(this.value.arrayValue,t)}},Z_=class extends Ze{constructor(e,t){super(e,"not-in",t)}matches(e){if(Fu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Fu(this.value.arrayValue,t)}},J_=class extends Ze{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!wI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Fu(this.value.arrayValue,r))}};var X_=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function YA(n,e=null,t=[],r=[],i=null,o=null,s=null){return new X_(n,e,t,r,i,o,s)}function DI(n){let e=ee(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>z_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),np(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>la(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>la(r)).join(",")),e.Pe=t}return e.Pe}function bI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!UB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!eN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!QA(n.startAt,e.startAt)&&QA(n.endAt,e.endAt)}function eE(n){return G.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var fa=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function $B(n,e,t,r,i,o,s,a){return new fa(n,e,t,r,i,o,s,a)}function TI(n){return new fa(n)}function ZA(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function HB(n){return n.collectionGroup!==null}function Ru(n){let e=ee(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new tt(Kt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new ha(o,r))}),t.has(Kt.keyField().canonicalString())||e.Te.push(new ha(Kt.keyField(),r))}return e.Te}function Kn(n){let e=ee(n);return e.Ie||(e.Ie=qB(e,Ru(n))),e.Ie}function qB(n,e){if(n.limitType==="F")return YA(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ha(i.field,o)});let t=n.endAt?new da(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new da(n.startAt.position,n.startAt.inclusive):null;return YA(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function tE(n,e,t){return new fa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ip(n,e){return bI(Kn(n),Kn(e))&&n.limitType===e.limitType}function rN(n){return`${DI(Kn(n))}|lt:${n.limitType}`}function ea(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>tN(i)).join(", ")}]`),np(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>la(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>la(i)).join(",")),`Target(${r})`})(Kn(n))}; limitType=${n.limitType})`}function op(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):G.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Ru(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=KA(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,Ru(r),i)||r.endAt&&!(function(s,a,u){let l=KA(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,Ru(r),i))})(n,e)}function zB(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function iN(n){return(e,t)=>{let r=!1;for(let i of Ru(n)){let o=GB(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function GB(n,e,t){let r=n.field.isKeyField()?G.comparator(e.key,t.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?ua(u,l):W(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return W(19790,{direction:n.dir})}}var Cr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ci(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return HR(this.inner)}size(){return this.innerSize}};var WB=new Oe(G.comparator);function Sr(){return WB}var oN=new Oe(G.comparator);function Su(...n){let e=oN;for(let t of n)e=e.insert(t.key,t);return e}function sN(n){let e=oN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Co(){return Nu()}function aN(){return Nu()}function Nu(){return new Cr(n=>n.toString(),(n,e)=>n.isEqual(e))}var KB=new Oe(G.comparator),QB=new tt(G.comparator);function he(...n){let e=QB;for(let t of n)e=e.add(t);return e}var YB=new tt(ce);function ZB(){return YB}function CI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ku(e)?"-0":e}}function cN(n){return{integerValue:""+n}}function JB(n,e){return CB(e)?cN(e):CI(n,e)}var pa=class{constructor(){this._=void 0}};function XB(n,e,t){return n instanceof ga?(function(i,o){let s={fields:{[zR]:{stringValue:qR},[WR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&_I(o)&&(o=rp(o)),o&&(s.fields[GR]=o),{mapValue:s}})(t,e):n instanceof Po?lN(n,e):n instanceof xo?dN(n,e):(function(i,o){let s=uN(i,o),a=JA(s)+JA(i.Ee);return q_(s)&&q_(i.Ee)?cN(a):CI(i.serializer,a)})(n,e)}function e$(n,e,t){return n instanceof Po?lN(n,e):n instanceof xo?dN(n,e):t}function uN(n,e){return n instanceof ma?(function(r){return q_(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var ga=class extends pa{},Po=class extends pa{constructor(e){super(),this.elements=e}};function lN(n,e){let t=hN(e);for(let r of n.elements)t.some(i=>Yn(i,r))||t.push(r);return{arrayValue:{values:t}}}var xo=class extends pa{constructor(e){super(),this.elements=e}};function dN(n,e){let t=hN(e);for(let r of n.elements)t=t.filter(i=>!Yn(i,r));return{arrayValue:{values:t}}}var ma=class extends pa{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function JA(n){return Re(n.integerValue||n.doubleValue)}function hN(n){return wI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function t$(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Po&&i instanceof Po||r instanceof xo&&i instanceof xo?aa(r.elements,i.elements,Yn):r instanceof ma&&i instanceof ma?Yn(r.Ee,i.Ee):r instanceof ga&&i instanceof ga})(n.transform,e.transform)}var nE=class{constructor(e,t){this.version=e,this.transformResults=t}},wr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function wf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ya=class{};function fN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Lu(n.key,wr.none()):new ko(n.key,n.data,wr.none());{let t=n.data,r=Wt.empty(),i=new tt(Kt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Jn(n.key,r,new on(i.toArray()),wr.none())}}function n$(n,e,t){n instanceof ko?(function(i,o,s){let a=i.value.clone(),u=eR(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Jn?(function(i,o,s){if(!wf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=eR(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(pN(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Mu(n,e,t,r){return n instanceof ko?(function(o,s,a,u){if(!wf(o.precondition,s))return a;let l=o.value.clone(),h=tR(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof Jn?(function(o,s,a,u){if(!wf(o.precondition,s))return a;let l=tR(o.fieldTransforms,u,s),h=s.data;return h.setAll(pN(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,a){return wf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function r$(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=uN(r.transform,i||null);o!=null&&(t===null&&(t=Wt.empty()),t.set(r.field,o))}return t||null}function XA(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&aa(r,i,(o,s)=>t$(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ko=class extends ya{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Jn=class extends ya{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function pN(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function eR(n,e,t){let r=new Map;Ie(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,e$(s,a,t[i]))}return r}function tR(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,XB(o,s,e))}return r}var Lu=class extends ya{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},rE=class extends ya{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var iE=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&n$(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Mu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Mu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=aN();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=fN(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),he())}isEqual(e){return this.batchId===e.batchId&&aa(this.mutations,e.mutations,(t,r)=>XA(t,r))&&aa(this.baseMutations,e.baseMutations,(t,r)=>XA(t,r))}},oE=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ie(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return KB})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var sE=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var aE=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ge,ge;function i$(n){switch(n){case P.OK:return W(64938);case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0;default:return W(15467,{code:n})}}function gN(n){if(n===void 0)return Dr("GRPC error has no .code"),P.UNKNOWN;switch(n){case Ge.OK:return P.OK;case Ge.CANCELLED:return P.CANCELLED;case Ge.UNKNOWN:return P.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return P.INTERNAL;case Ge.UNAVAILABLE:return P.UNAVAILABLE;case Ge.UNAUTHENTICATED:return P.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case Ge.NOT_FOUND:return P.NOT_FOUND;case Ge.ALREADY_EXISTS:return P.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return P.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case Ge.ABORTED:return P.ABORTED;case Ge.OUT_OF_RANGE:return P.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return P.UNIMPLEMENTED;case Ge.DATA_LOSS:return P.DATA_LOSS;default:return W(39323,{code:n})}}(ge=Ge||(Ge={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var nR=null;var o$=new _r([4294967295,4294967295],0);function rR(n){let e=CR().encode(n),t=new D_;return t.update(e),new Uint8Array(t.digest())}function iR(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new _r([t,r],0),new _r([i,o],0)]}var cE=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new So(`Invalid padding: ${t}`);if(r<0)throw new So(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new So(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new So(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=_r.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(_r.fromNumber(r)));return i.compare(o$)===1&&(i=new _r([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=rR(e),[r,i]=iR(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=rR(e),[r,i]=iR(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},So=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Mf=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Vu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ne.min(),i,new Oe(ce),Sr(),he())}},Vu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,he(),he(),he())}};var ia=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Pf=class{constructor(e,t){this.targetId=e,this.De=t}},xf=class{constructor(e,t,r=It.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},kf=class{constructor(){this.ve=0,this.Ce=oR(),this.Fe=It.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=he(),t=he(),r=he();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:W(38017,{changeType:o})}}),new Vu(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=oR()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ie(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},uE=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Sr(),this.je=vf(),this.Je=vf(),this.He=new Oe(ce)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:W(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(eE(o))if(r===0){let s=new G(o.path);this.Xe(t,s,Tn.newNoDocument(s,ne.min()))}else Ie(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}nR?.ct((function(h,p,m,y,S){var M,R,V,Q,Y,Te;let wt={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},we=p.unchangedNames;return we&&(wt.bloomFilter={applied:S===0,hashCount:(M=we?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(Q=(V=(R=we?.bits)===null||R===void 0?void 0:R.bitmap)===null||V===void 0?void 0:V.length)!==null&&Q!==void 0?Q:0,padding:(Te=(Y=we?.bits)===null||Y===void 0?void 0:Y.padding)!==null&&Te!==void 0?Te:0,mightContain:w=>{var v;return(v=y?.mightContain(w))!==null&&v!==void 0&&v}}),wt})(s,e.De,this.We.lt(),a,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Tr(r).toUint8Array()}catch(u){if(u instanceof Sf)return Ii("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new cE(s,i,o)}catch(u){return Ii(u instanceof So?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&eE(a.target)){let u=new G(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,Tn.newNoDocument(u,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=he();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Mf(e,t,this.He,this.ze,r);return this.ze=Sr(),this.je=vf(),this.Je=vf(),this.He=new Oe(ce),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new kf,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new tt(ce),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new tt(ce),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||j("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new kf),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function vf(){return new Oe(G.comparator)}function oR(){return new Oe(G.comparator)}var s$={asc:"ASCENDING",desc:"DESCENDING"},a$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},c$={and:"AND",or:"OR"},lE=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function dE(n,e){return n.useProto3Json||np(e)?e:{value:e}}function Of(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function u$(n,e){return Of(n,e.toTimestamp())}function Qn(n){return Ie(!!n,49232),ne.fromTimestamp((function(t){let r=br(t);return new Qe(r.seconds,r.nanos)})(n))}function SI(n,e){return hE(n,e).canonicalString()}function hE(n,e){let t=(function(i){return new Me(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function yN(n){let e=Me.fromString(n);return Ie(wN(e),10190,{key:e.toString()}),e}function fE(n,e){return SI(n.databaseId,e.path)}function R_(n,e){let t=yN(e);if(t.get(1)!==n.databaseId.projectId)throw new H(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new H(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new G(_N(t))}function vN(n,e){return SI(n.databaseId,e)}function l$(n){let e=yN(n);return e.length===4?Me.emptyPath():_N(e)}function pE(n){return new Me(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _N(n){return Ie(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function sR(n,e,t){return{name:fE(n,e),fields:t.value.mapValue.fields}}function d$(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:W(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(Ie(h===void 0||typeof h=="string",58123),It.fromBase64String(h||"")):(Ie(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),It.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?P.UNKNOWN:gN(l.code);return new H(h,l.message||"")})(s);t=new xf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=R_(n,r.document.name),o=Qn(r.document.updateTime),s=r.document.createTime?Qn(r.document.createTime):ne.min(),a=new Wt({mapValue:{fields:r.document.fields}}),u=Tn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new ia(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=R_(n,r.document),o=r.readTime?Qn(r.readTime):ne.min(),s=Tn.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ia([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=R_(n,r.document),o=r.removedTargetIds||[];t=new ia([],o,i,null)}else{if(!("filter"in e))return W(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new aE(i,o),a=r.targetId;t=new Pf(a,s)}}return t}function h$(n,e){let t;if(e instanceof ko)t={update:sR(n,e.key,e.value)};else if(e instanceof Lu)t={delete:fE(n,e.key)};else if(e instanceof Jn)t={update:sR(n,e.key,e.data),updateMask:I$(e.fieldMask)};else{if(!(e instanceof rE))return W(16599,{Rt:e.type});t={verify:fE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof ga)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Po)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof xo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ma)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw W(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:u$(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:W(27497)})(n,e.precondition)),t}function f$(n,e){return n&&n.length>0?(Ie(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?Qn(i.updateTime):Qn(o);return s.isEqual(ne.min())&&(s=Qn(o)),new nE(s,i.transformResults||[])})(t,e))):[]}function p$(n,e){return{documents:[vN(n,e.path)]}}function g$(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=vN(n,i);let o=(function(l){if(l.length!==0)return IN(Zn.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:ta(m.field),direction:v$(m.dir)}})(h))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=dE(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function m$(n){let e=l$(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ie(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=(function(p){let m=EN(p);return m instanceof Zn&&XR(m)?m.getFilters():[m]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(m=>(function(S){return new ha(na(S.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(m))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,np(m)?null:m})(t.limit));let u=null;t.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new da(y,m)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new da(y,m)})(t.endAt)),$B(e,i,s,o,a,"F",u,l)}function y$(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function EN(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=na(t.unaryFilter.field);return Ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=na(t.unaryFilter.field);return Ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=na(t.unaryFilter.field);return Ze.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=na(t.unaryFilter.field);return Ze.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return W(61313);default:return W(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ze.create(na(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return W(58110);default:return W(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Zn.create(t.compositeFilter.filters.map(r=>EN(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return W(1026)}})(t.compositeFilter.op))})(n):W(30097,{filter:n})}function v$(n){return s$[n]}function _$(n){return a$[n]}function E$(n){return c$[n]}function ta(n){return{fieldPath:n.canonicalString()}}function na(n){return Kt.fromServerFormat(n.fieldPath)}function IN(n){return n instanceof Ze?(function(t){if(t.op==="=="){if(WA(t.value))return{unaryFilter:{field:ta(t.field),op:"IS_NAN"}};if(GA(t.value))return{unaryFilter:{field:ta(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(WA(t.value))return{unaryFilter:{field:ta(t.field),op:"IS_NOT_NAN"}};if(GA(t.value))return{unaryFilter:{field:ta(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ta(t.field),op:_$(t.op),value:t.value}}})(n):n instanceof Zn?(function(t){let r=t.getFilters().map(i=>IN(i));return r.length===1?r[0]:{compositeFilter:{op:E$(t.op),filters:r}}})(n):W(54877,{filter:n})}function I$(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function wN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ju=class n{constructor(e,t,r,i,o=ne.min(),s=ne.min(),a=It.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var gE=class{constructor(e){this.gt=e}};function w$(n){let e=m$({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?tE(e,e.limit,"L"):e}var Ff=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Re(e.integerValue));else if("doubleValue"in e){let r=Re(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),ku(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=br(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Tr(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?YR(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):QR(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):W(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=ca,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Re(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),G.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Ff.Ut=new Ff;var mE=class{constructor(){this.Dn=new yE}addToCollectionParentIndex(e,t){return this.Dn.add(t),x.resolve()}getCollectionParents(e,t){return x.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return x.resolve()}deleteFieldIndex(e,t){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,t){return x.resolve()}getDocumentsMatchingTarget(e,t){return x.resolve(null)}getIndexType(e,t){return x.resolve(0)}getFieldIndexes(e,t){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,t){return x.resolve(Mo.min())}getMinOffsetFromCollectionGroup(e,t){return x.resolve(Mo.min())}updateCollectionGroup(e,t,r){return x.resolve()}updateIndexEntries(e,t){return x.resolve()}},yE=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new tt(Me.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tt(Me.comparator)).toArray()}};var wre=new Uint8Array(0);var aR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},DN=41943040,rn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(DN,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);var Uu=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var cR="LruGarbageCollector",D$=1048576;function uR([n,e],[t,r]){let i=ce(n,t);return i===0?ce(e,r):i}var vE=class{constructor(e){this.Tr=e,this.buffer=new tt(uR),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();uR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},_E=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){j(cR,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>T(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Da(t)?j(cR,"Ignoring IndexedDB error during garbage collection: ",t):yield wa(t)}yield this.Rr(3e5)}))}},EE=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return x.resolve(yI.ue);let r=new vE(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(aR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aR):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Xs()<=le.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function b$(n,e){return new EE(n,e)}var IE=class{constructor(){this.changes=new Cr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?x.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var wE=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var DE=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Mu(r.mutation,i,on.empty(),Qe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,t,r=he()){let i=Co();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Su();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Co();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,he()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Sr(),s=Nu(),a=(function(){return Nu()})();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Jn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Mu(h.mutation,l,h.mutation.getFieldMask(),Qe.now())):s.set(l.key,on.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new wE(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Nu(),i=new Oe((s,a)=>s-a),o=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||on.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||he()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=aN();h.forEach(m=>{if(!o.has(m)){let y=fN(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return G.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):HB(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):x.resolve(Co()),a=xu,u=o;return s.next(l=>x.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,he())).next(h=>({batchId:a,changes:sN(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new G(t)).next(r=>{let i=Su();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Su();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,u=>{let l=(function(p,m){return new fa(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Tn.newInvalidDocument(h)))});let a=Su();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Mu(h.mutation,l,on.empty(),Qe.now()),op(t,l)&&(a=a.insert(u,l))}),a})}};var bE=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return x.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Qn(i.createTime)}})(t)),x.resolve()}getNamedQuery(e,t){return x.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:w$(i.bundledQuery),readTime:Qn(i.readTime)}})(t)),x.resolve()}};var TE=class{constructor(){this.overlays=new Oe(G.comparator),this.kr=new Map}getOverlay(e,t){return x.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Co();return x.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),x.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),x.resolve()}getOverlaysForCollection(e,t,r){let i=Co(),o=t.length+1,s=new G(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Oe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Co(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Co(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return x.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new sE(t,r));let o=this.kr.get(t);o===void 0&&(o=he(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var CE=class{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,x.resolve()}};var Bu=class{constructor(){this.qr=new tt(We.Qr),this.$r=new tt(We.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new We(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new We(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new G(new Me([])),r=new We(t,e),i=new We(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new G(new Me([])),r=new We(t,e),i=new We(t,e+1),o=he();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new We(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},We=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return G.comparator(e.key,t.key)||ce(e.Hr,t.Hr)}static Ur(e,t){return ce(e.Hr,t.Hr)||G.comparator(e.key,t.key)}};var SE=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new tt(We.Qr)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new iE(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new We(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,t){return x.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?vI:this.er-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new We(t,0),i=new We(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tt(ce);return t.forEach(i=>{let o=new We(i,0),s=new We(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),x.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;G.isDocumentKey(o)||(o=o.child(""));let s=new We(new G(o),0),a=new tt(ce);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),x.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ie(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return x.forEach(t.mutations,i=>{let o=new We(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new We(t,0),i=this.Yr.firstAfterOrEqual(r);return x.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var AE=class{constructor(e){this.ni=e,this.docs=(function(){return new Oe(G.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return x.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let r=Sr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Tn.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Sr(),s=t.path,a=new G(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||DB(wB(h),r)<=0||(i.has(h.key)||op(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,t,r,i){W(9500)}ri(e,t){return x.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new RE(this)}getSize(e){return x.resolve(this.size)}},RE=class extends IE{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),x.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var NE=class{constructor(e){this.persistence=e,this.ii=new Cr(t=>DI(t),bI),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.si=0,this.oi=new Bu,this.targetCount=0,this._i=Uu.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),x.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Uu(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,x.resolve()}updateTargetData(e,t){return this.hr(t),x.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return x.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),x.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),x.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return x.resolve(r)}containsKey(e,t){return x.resolve(this.oi.containsKey(t))}};var Lf=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new yI(0),this.ci=!1,this.ci=!0,this.li=new CE,this.referenceDelegate=e(this),this.hi=new NE(this),this.indexManager=new mE,this.remoteDocumentCache=(function(i){return new AE(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new gE(t),this.Ti=new bE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new TE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new SE(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){j("MemoryPersistence","Starting transaction:",e);let i=new ME(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return x.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},ME=class extends B_{constructor(e){super(),this.currentSequenceNumber=e}},PE=class n{constructor(e){this.persistence=e,this.Ai=new Bu,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw W(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),x.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),x.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.mi,r=>{let i=G.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,ne.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return x.or([()=>x.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Vf=class n{constructor(e,t){this.persistence=e,this.gi=new Cr(r=>SB(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=b$(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return x.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return x.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?x.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,ne.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),x.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),x.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ef(e.data.value)),t}Sr(e,t,r){return x.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return x.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var xE=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=he(),i=he();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var kE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var OE=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return L0()?8:TB(Gt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new kE;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Xs()<=le.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",ea(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),x.resolve()):(Xs()<=le.DEBUG&&j("QueryEngine","Query:",ea(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Xs()<=le.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",ea(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kn(t))):x.resolve())}ps(e,t){if(ZA(t))return x.resolve(null);let r=Kn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=tE(t,null,"F"),r=Kn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=he(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(t,a);return this.Ds(t,l,s,u.readTime)?this.ps(e,tE(t,null,"F")):this.vs(e,l,t,u)}))})))}ys(e,t,r,i){return ZA(t)||i.isEqual(ne.min())?x.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?x.resolve(null):(Xs()<=le.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ea(t)),this.vs(e,s,t,IB(i,xu)).next(a=>a))})}bs(e,t){let r=new tt(iN(e));return t.forEach((i,o)=>{op(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Xs()<=le.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",ea(t)),this.gs.getDocumentsMatchingQuery(e,t,Mo.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var AI="LocalStore",T$=3e8,FE=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Oe(ce),this.Ms=new Cr(o=>DI(o),bI),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DE(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function C$(n,e,t,r){return new FE(n,e,t,r)}function bN(n,e){return T(this,null,function*(){let t=ee(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=he();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function S$(n,e){let t=ee(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,m=p.keys(),y=x.resolve();return m.forEach(S=>{y=y.next(()=>h.getEntry(u,S)).next(M=>{let R=l.docVersions.get(S);Ie(R!==null,48541),M.version.compareTo(R)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=he();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function TN(n){let e=ee(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function A$(n,e){let t=ee(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(It.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(M,R,V){return M.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=T$?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(m,y,h)&&a.push(t.hi.updateTargetData(o,y))});let u=Sr(),l=he();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(R$(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(ne.min())){let h=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Fs=i,o))}function R$(n,e,t){let r=he(),i=he();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Sr();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):j(AI,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function N$(n,e){let t=ee(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=vI),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function M$(n,e){let t=ee(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new ju(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function LE(n,e,t){return T(this,null,function*(){let r=ee(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Da(s))throw s;j(AI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function lR(n,e,t){let r=ee(n),i=ne.min(),o=he();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=ee(u),m=p.Ms.get(h);return m!==void 0?x.resolve(p.Fs.get(m)):p.hi.getTargetData(l,h)})(r,s,Kn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:ne.min(),t?o:he())).next(a=>(P$(r,zB(e),a),{documents:a,qs:o})))}function P$(n,e,t){let r=n.xs.get(e)||ne.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var jf=class{constructor(){this.activeTargetIds=ZB()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var VE=class{constructor(){this.Fo=new jf,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new jf,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var jE=class{xo(e){}shutdown(){}};var dR="ConnectivityMonitor",Uf=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){j(dR,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){j(dR,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var _f=null;function UE(){return _f===null?_f=(function(){return 268435456+Math.round(2147483648*Math.random())})():_f++,"0x"+_f.toString(16)}var N_="RestConnection",x$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},BE=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Af?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=UE(),a=this.Go(e,t.toUriEncodedString());j(N_,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=mo(l);return this.jo(e,a,u,r,h).then(p=>(j(N_,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Ii(N_,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ia})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=x$[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var $E=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var _t="WebChannelConnection",HE=class extends BE{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=UE();return new Promise((a,u)=>{let l=new b_;l.setWithCredentials(!0),l.listenOnce(T_.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Cu.NO_ERROR:let p=l.getResponseJson();j(_t,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Cu.TIMEOUT:j(_t,`RPC '${e}' ${s} timed out`),u(new H(P.DEADLINE_EXCEEDED,"Request time out"));break;case Cu.HTTP_ERROR:let m=l.getStatus();if(j(_t,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let S=y?.error;if(S&&S.status&&S.message){let M=(function(V){let Q=V.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(Q)>=0?Q:P.UNKNOWN})(S.status);u(new H(M,S.message))}else u(new H(P.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new H(P.UNAVAILABLE,"Connection failed."));break;default:W(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{j(_t,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);j(_t,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}P_(e,t,r){let i=UE(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=A_(),a=S_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");j(_t,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let m=!1,y=!1,S=new $E({Ho:R=>{y?j(_t,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(j(_t,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),j(_t,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Yo:()=>p.close()}),M=(R,V,Q)=>{R.listen(V,Y=>{try{Q(Y)}catch(Te){setTimeout(()=>{throw Te},0)}})};return M(p,Js.EventType.OPEN,()=>{y||(j(_t,`RPC '${e}' stream ${i} transport opened.`),S.s_())}),M(p,Js.EventType.CLOSE,()=>{y||(y=!0,j(_t,`RPC '${e}' stream ${i} transport closed`),S.__(),this.I_(p))}),M(p,Js.EventType.ERROR,R=>{y||(y=!0,Ii(_t,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),S.__(new H(P.UNAVAILABLE,"The operation could not be completed")))}),M(p,Js.EventType.MESSAGE,R=>{var V;if(!y){let Q=R.data[0];Ie(!!Q,16349);let Y=Q,Te=Y?.error||((V=Y[0])===null||V===void 0?void 0:V.error);if(Te){j(_t,`RPC '${e}' stream ${i} received error:`,Te);let wt=Te.status,we=(function(E){let I=Ge[E];if(I!==void 0)return gN(I)})(wt),w=Te.message;we===void 0&&(we=P.INTERNAL,w="Unknown error status: "+wt+" with message "+Te.message),y=!0,S.__(new H(we,w)),p.close()}else j(_t,`RPC '${e}' stream ${i} received:`,Q),S.a_(Q)}}),M(a,C_.STAT_EVENT,R=>{R.stat===mf.PROXY?j(_t,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===mf.NOPROXY&&j(_t,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.o_()},0),S}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function M_(){return typeof document<"u"?document:null}function sp(n){return new lE(n,!0)}var Bf=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var hR="PersistentStream",$f=class{constructor(e,t,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Bf(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return T(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return T(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return T(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===P.RESOURCE_EXHAUSTED?(Dr(t.toString()),Dr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new H(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>T(this,null,function*(){this.state=0,this.start()}))}G_(e){return j(hR,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(j(hR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},qE=class extends $f{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=d$(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ne.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ne.min():s.readTime?Qn(s.readTime):ne.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=pE(this.serializer),t.addTarget=(function(o,s){let a,u=s.target;if(a=eE(u)?{documents:p$(o,u)}:{query:g$(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=mN(o,s.resumeToken);let l=dE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ne.min())>0){a.readTime=Of(o,s.snapshotVersion.toTimestamp());let l=dE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=y$(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=pE(this.serializer),t.removeTarget=e,this.k_(t)}},zE=class extends $f{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ie(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ie(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=f$(e.writeResults,e.commitTime),r=Qn(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=pE(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>h$(this.serializer,r))};this.k_(t)}};var GE=class{},WE=class extends GE{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new H(P.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,hE(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(P.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,hE(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(P.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},KE=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Dr(t),this._a=!1):j("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Oo="RemoteStore",QE=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>T(this,null,function*(){Fo(this)&&(j(Oo,"Restarting streams for network reachability change."),yield(function(u){return T(this,null,function*(){let l=ee(u);l.Ia.add(4),yield qu(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield ap(l)})})(this))}))}),this.Aa=new KE(r,i)}};function ap(n){return T(this,null,function*(){if(Fo(n))for(let e of n.da)yield e(!0)})}function qu(n){return T(this,null,function*(){for(let e of n.da)yield e(!1)})}function CN(n,e){let t=ee(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),PI(t)?MI(t):ba(t).x_()&&NI(t,e))}function RI(n,e){let t=ee(n),r=ba(t);t.Ta.delete(e),r.x_()&&SN(t,e),t.Ta.size===0&&(r.x_()?r.B_():Fo(t)&&t.Aa.set("Unknown"))}function NI(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ba(n).H_(e)}function SN(n,e){n.Ra.$e(e),ba(n).Y_(e)}function MI(n){n.Ra=new uE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),ba(n).start(),n.Aa.aa()}function PI(n){return Fo(n)&&!ba(n).M_()&&n.Ta.size>0}function Fo(n){return ee(n).Ia.size===0}function AN(n){n.Ra=void 0}function k$(n){return T(this,null,function*(){n.Aa.set("Online")})}function O$(n){return T(this,null,function*(){n.Ta.forEach((e,t)=>{NI(n,e)})})}function F$(n,e){return T(this,null,function*(){AN(n),PI(n)?(n.Aa.la(e),MI(n)):n.Aa.set("Unknown")})}function L$(n,e,t){return T(this,null,function*(){if(n.Aa.set("Online"),e instanceof xf&&e.state===2&&e.cause)try{yield(function(i,o){return T(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(n,e)}catch(r){j(Oo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Hf(n,r)}else if(e instanceof ia?n.Ra.Ye(e):e instanceof Pf?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ne.min()))try{let r=yield TN(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(It.EMPTY_BYTE_STRING,h.snapshotVersion)),SN(o,u);let p=new ju(h.target,u,l,h.sequenceNumber);NI(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(r){j(Oo,"Failed to raise snapshot:",r),yield Hf(n,r)}})}function Hf(n,e,t){return T(this,null,function*(){if(!Da(e))throw e;n.Ia.add(1),yield qu(n),n.Aa.set("Offline"),t||(t=()=>TN(n.localStore)),n.asyncQueue.enqueueRetryable(()=>T(null,null,function*(){j(Oo,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield ap(n)}))})}function RN(n,e){return e().catch(t=>Hf(n,t,e))}function cp(n){return T(this,null,function*(){let e=ee(n),t=Di(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:vI;for(;V$(e);)try{let i=yield N$(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,j$(e,i)}catch(i){yield Hf(e,i)}NN(e)&&MN(e)})}function V$(n){return Fo(n)&&n.Pa.length<10}function j$(n,e){n.Pa.push(e);let t=Di(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function NN(n){return Fo(n)&&!Di(n).M_()&&n.Pa.length>0}function MN(n){Di(n).start()}function U$(n){return T(this,null,function*(){Di(n).na()})}function B$(n){return T(this,null,function*(){let e=Di(n);for(let t of n.Pa)e.X_(t.mutations)})}function $$(n,e,t){return T(this,null,function*(){let r=n.Pa.shift(),i=oE.from(r,e,t);yield RN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield cp(n)})}function H$(n,e){return T(this,null,function*(){e&&Di(n).Z_&&(yield(function(r,i){return T(this,null,function*(){if((function(s){return i$(s)&&s!==P.ABORTED})(i.code)){let o=r.Pa.shift();Di(r).N_(),yield RN(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield cp(r)}})})(n,e)),NN(n)&&MN(n)})}function fR(n,e){return T(this,null,function*(){let t=ee(n);t.asyncQueue.verifyOperationInProgress(),j(Oo,"RemoteStore received new credentials");let r=Fo(t);t.Ia.add(3),yield qu(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield ap(t)})}function q$(n,e){return T(this,null,function*(){let t=ee(n);e?(t.Ia.delete(2),yield ap(t)):e||(t.Ia.add(2),yield qu(t),t.Aa.set("Unknown"))})}function ba(n){return n.Va||(n.Va=(function(t,r,i){let o=ee(t);return o.ia(),new qE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:k$.bind(null,n),e_:O$.bind(null,n),n_:F$.bind(null,n),J_:L$.bind(null,n)}),n.da.push(e=>T(null,null,function*(){e?(n.Va.N_(),PI(n)?MI(n):n.Aa.set("Unknown")):(yield n.Va.stop(),AN(n))}))),n.Va}function Di(n){return n.ma||(n.ma=(function(t,r,i){let o=ee(t);return o.ia(),new zE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:U$.bind(null,n),n_:H$.bind(null,n),ea:B$.bind(null,n),ta:$$.bind(null,n)}),n.da.push(e=>T(null,null,function*(){e?(n.ma.N_(),yield cp(n)):(yield n.ma.stop(),n.Pa.length>0&&(j(Oo,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var YE=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function xI(n,e){if(Dr("AsyncQueue",`${e}: ${n}`),Da(n))return new H(P.UNAVAILABLE,`${e}: ${n}`);throw n}var qf=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||G.comparator(t.key,r.key):(t,r)=>G.comparator(t.key,r.key),this.keyedMap=Su(),this.sortedSet=new Oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var zf=class{constructor(){this.fa=new Oe(G.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):W(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},va=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,qf.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ip(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var ZE=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},JE=class{constructor(){this.queries=pR(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=ee(t),o=i.queries;i.queries=pR(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new H(P.ABORTED,"Firestore shutting down"))}};function pR(){return new Cr(n=>rN(n),ip)}function z$(n,e){return T(this,null,function*(){let t=ee(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new ZE,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=xI(s,`Initialization of query '${ea(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&kI(t)})}function G$(n,e){return T(this,null,function*(){let t=ee(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function W$(n,e){let t=ee(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&kI(t)}function K$(n,e,t){let r=ee(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function kI(n){n.Da.forEach(e=>{e.next()})}var XE,gR;(gR=XE||(XE={})).Fa="default",gR.Cache="cache";var eI=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new va(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=va.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==XE.Cache}};var Gf=class{constructor(e){this.key=e}},Wf=class{constructor(e){this.key=e}},tI=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=he(),this.mutatedKeys=he(),this.Xa=iN(e),this.eu=new qf(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new zf,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=op(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),M=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?S!==M&&(r.track({type:3,doc:y}),R=!0):this.iu(m,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=M?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,S){let M=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W(20277,{At:R})}};return M(y)-M(S)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new va(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new zf,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=he(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Wf(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new Gf(r))}),t}uu(e){this.Ha=e.qs,this.Za=he();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return va.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},OI="SyncEngine",nI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},rI=class{constructor(e){this.key=e,this.lu=!1}},iI=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Cr(a=>rN(a),ip),this.Tu=new Map,this.Iu=new Set,this.du=new Oe(G.comparator),this.Eu=new Map,this.Au=new Bu,this.Ru={},this.Vu=new Map,this.mu=Uu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function Q$(n,e,t=!0){return T(this,null,function*(){let r=LN(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield PN(r,e,t,!0),i})}function Y$(n,e){return T(this,null,function*(){let t=LN(n);yield PN(t,e,!0,!1)})}function PN(n,e,t,r){return T(this,null,function*(){let i=yield M$(n.localStore,Kn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Z$(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&CN(n.remoteStore,i),a})}function Z$(n,e,t,r,i){return T(this,null,function*(){n.gu=(p,m,y)=>(function(M,R,V,Q){return T(this,null,function*(){let Y=R.view.nu(V);Y.Ds&&(Y=yield lR(M.localStore,R.query,!1).then(({documents:w})=>R.view.nu(w,Y)));let Te=Q&&Q.targetChanges.get(R.targetId),wt=Q&&Q.targetMismatches.get(R.targetId)!=null,we=R.view.applyChanges(Y,M.isPrimaryClient,Te,wt);return yR(M,R.targetId,we._u),we.snapshot})})(n,p,m,y);let o=yield lR(n.localStore,e,!0),s=new tI(e,o.qs),a=s.nu(o.documents),u=Vu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);yR(n,t,l._u);let h=new nI(e,t,s);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function J$(n,e,t){return T(this,null,function*(){let r=ee(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!ip(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield LE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&RI(r.remoteStore,i.targetId),oI(r,i.targetId)}).catch(wa))):(oI(r,i.targetId),yield LE(r.localStore,i.targetId,!0))})}function X$(n,e){return T(this,null,function*(){let t=ee(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),RI(t.remoteStore,r.targetId))})}function eH(n,e,t){return T(this,null,function*(){let r=aH(n);try{let i=yield(function(s,a){let u=ee(s),l=Qe.now(),h=a.reduce((y,S)=>y.add(S.key),he()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=Sr(),M=he();return u.Os.getEntries(y,h).next(R=>{S=R,S.forEach((V,Q)=>{Q.isValidDocument()||(M=M.add(V))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(R=>{p=R;let V=[];for(let Q of a){let Y=r$(Q,p.get(Q.key).overlayedDocument);Y!=null&&V.push(new Jn(Q.key,Y,ZR(Y.value.mapValue),wr.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,V,a)}).next(R=>{m=R;let V=R.applyToLocalDocumentSet(p,M);return u.documentOverlayCache.saveOverlays(y,R.batchId,V)})}).then(()=>({batchId:m.batchId,changes:sN(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Oe(ce)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,t),yield zu(r,i.changes),yield cp(r.remoteStore)}catch(i){let o=xI(i,"Failed to persist write");t.reject(o)}})}function xN(n,e){return T(this,null,function*(){let t=ee(n);try{let r=yield A$(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(Ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Ie(s.lu,14607):i.removedDocuments.size>0&&(Ie(s.lu,42227),s.lu=!1))}),yield zu(t,r,e)}catch(r){yield wa(r)}})}function mR(n,e,t){let r=ee(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=ee(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.wa)m.va(a)&&(l=!0)}),l&&kI(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function tH(n,e,t){return T(this,null,function*(){let r=ee(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Oe(G.comparator);s=s.insert(o,Tn.newNoDocument(o,ne.min()));let a=he().add(o),u=new Mf(ne.min(),new Map,new Oe(ce),s,a);yield xN(r,u),r.du=r.du.remove(o),r.Eu.delete(e),FI(r)}else yield LE(r.localStore,e,!1).then(()=>oI(r,e,t)).catch(wa)})}function nH(n,e){return T(this,null,function*(){let t=ee(n),r=e.batch.batchId;try{let i=yield S$(t.localStore,e);ON(t,r,null),kN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield zu(t,i)}catch(i){yield wa(i)}})}function rH(n,e,t){return T(this,null,function*(){let r=ee(n);try{let i=yield(function(s,a){let u=ee(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ie(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);ON(r,e,t),kN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield zu(r,i)}catch(i){yield wa(i)}})}function kN(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function ON(n,e,t){let r=ee(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function oI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||FN(n,r)})}function FN(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(RI(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),FI(n))}function yR(n,e,t){for(let r of t)r instanceof Gf?(n.Au.addReference(r.key,e),iH(n,r)):r instanceof Wf?(j(OI,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||FN(n,r.key)):W(19791,{yu:r})}function iH(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(j(OI,"New document in limbo: "+t),n.Iu.add(r),FI(n))}function FI(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new G(Me.fromString(e)),r=n.mu.next();n.Eu.set(r,new rI(t)),n.du=n.du.insert(t,r),CN(n.remoteStore,new ju(Kn(TI(t.path)),r,"TargetPurposeLimboResolution",yI.ue))}}function zu(n,e,t){return T(this,null,function*(){let r=ee(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=xE.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(u,l){return T(this,null,function*(){let h=ee(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,m=>x.forEach(m.Is,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>x.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Da(p))throw p;j(AI,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Fs.get(m),S=y.snapshotVersion,M=y.withLastLimboFreeSnapshotVersion(S);h.Fs=h.Fs.insert(m,M)}}})})(r.localStore,o))})}function oH(n,e){return T(this,null,function*(){let t=ee(n);if(!t.currentUser.isEqual(e)){j(OI,"User change. New user:",e.toKey());let r=yield bN(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new H(P.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield zu(t,r.Bs)}})}function sH(n,e){let t=ee(n),r=t.Eu.get(e);if(r&&r.lu)return he().add(r.key);{let i=he(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function LN(n){let e=ee(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tH.bind(null,e),e.hu.J_=W$.bind(null,e.eventManager),e.hu.pu=K$.bind(null,e.eventManager),e}function aH(n){let e=ee(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rH.bind(null,e),e}var VN=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return T(this,null,function*(){this.serializer=sp(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return C$(this.persistence,new OE,t.initialUser,this.serializer)}Du(t){return new Lf(PE.Vi,this.serializer)}bu(t){return new VE}terminate(){return T(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),sI=class extends VN{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ie(this.persistence.referenceDelegate instanceof Vf,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new _E(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new Lf(r=>Vf.Vi(r,t),this.serializer)}};var cH=(()=>{class n{initialize(t,r){return T(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>mR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=oH.bind(null,this.syncEngine),yield q$(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new JE})()}createDatastore(t){let r=sp(t.databaseInfo.databaseId),i=(function(s){return new HE(s)})(t.databaseInfo);return(function(s,a,u,l){return new WE(s,a,u,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,u){return new QE(i,o,s,a,u)})(this.localStore,this.datastore,t.asyncQueue,r=>mR(this.syncEngine,r,0),(function(){return Uf.C()?new Uf:new jE})())}createSyncEngine(t,r){return(function(o,s,a,u,l,h,p){let m=new iI(o,s,a,u,l,h);return p&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return T(this,null,function*(){var t,r;yield(function(o){return T(this,null,function*(){let s=ee(o);j(Oo,"RemoteStore shutting down."),s.Ia.add(5),yield qu(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var aI=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Dr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var bi="FirestoreClient",cI=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=et.UNAUTHENTICATED,this.clientId=Pu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>T(this,null,function*(){j(bi,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(j(bi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>T(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=xI(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function P_(n,e){return T(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),j(bi,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>T(null,null,function*(){r.isEqual(i)||(yield bN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Ii("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{j("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Ii("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function vR(n,e){return T(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield uH(n);j(bi,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>fR(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>fR(e.remoteStore,i)),n._onlineComponents=e})}function uH(n){return T(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){j(bi,"Using user provided OfflineComponentProvider");try{yield P_(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Ii("Error using user provided cache. Falling back to memory cache: "+t),yield P_(n,new VN)}}else j(bi,"Using default OfflineComponentProvider"),yield P_(n,new sI(void 0));return n._offlineComponents})}function jN(n){return T(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(j(bi,"Using user provided OnlineComponentProvider"),yield vR(n,n._uninitializedComponentsProvider._online)):(j(bi,"Using default OnlineComponentProvider"),yield vR(n,new cH))),n._onlineComponents})}function lH(n){return jN(n).then(e=>e.syncEngine)}function _R(n){return T(this,null,function*(){let e=yield jN(n),t=e.eventManager;return t.onListen=Q$.bind(null,e.syncEngine),t.onUnlisten=J$.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Y$.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=X$.bind(null,e.syncEngine),t})}function UN(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var ER=new Map;var BN="firestore.googleapis.com",IR=!0,Kf=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=BN,this.ssl=IR}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:IR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=DN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<D$)throw new H(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}EB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new H(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new H(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new H(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},_a=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new x_;switch(r.type){case"firstParty":return new L_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return T(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=ER.get(t);r&&(j("ComponentProvider","Removing Datastore"),ER.delete(t),r.terminate())})(this),Promise.resolve()}};function $N(n,e,t,r={}){var i;n=mi(n,_a);let o=mo(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(Vv(`https://${u}`),jv("Firestore",!0)),s.host!==BN&&s.host!==u&&Ii("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!yo(l,a)&&(n._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=et.MOCK_USER;else{h=P0(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new H(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new et(m)}n._authCredentials=new k_(new Df(h,p))}}var Qf=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Et=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Hu(t,n._jsonSchema))return new n(e,r||null,new G(Me.fromString(t.referencePath)))}};Et._jsonSchemaVersion="firestore/documentReference/1.0",Et._jsonSchema={type:Ke("string",Et._jsonSchemaVersion),referencePath:Ke("string")};var yi=class n extends Qf{constructor(e,t,r){super(e,t,TI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new G(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function HN(n,e,...t){if(n=vt(n),SR("collection","path",e),n instanceof _a){let r=Me.fromString(e,...t);return jA(r),new yi(n,null,r)}{if(!(n instanceof Et||n instanceof yi))throw new H(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Me.fromString(e,...t));return jA(r),new yi(n.firestore,null,r)}}function LI(n,e,...t){if(n=vt(n),arguments.length===1&&(e=Pu.newId()),SR("doc","path",e),n instanceof _a){let r=Me.fromString(e,...t);return VA(r),new Et(n,null,new G(r))}{if(!(n instanceof Et||n instanceof yi))throw new H(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Me.fromString(e,...t));return VA(r),new Et(n.firestore,n instanceof yi?n.converter:null,new G(r))}}var wR="AsyncQueue",Yf=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Bf(this,"async_queue_retry"),this.oc=()=>{let r=M_();r&&j(wR,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=M_();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=M_();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Ir;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return T(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Da(e))throw e;j(wR,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Dr("INTERNAL UNHANDLED ERROR: ",DR(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=YE.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&W(47125,{hc:DR(this.tc)})}verifyOperationInProgress(){}Pc(){return T(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function DR(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function bR(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var Ti=class extends _a{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Yf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return T(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Yf(e),this._firestoreClient=void 0,yield e}})}};function qN(n,e){let t=typeof n=="object"?n:Qs(),r=typeof n=="string"?n:e||Af,i=Yh(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=N0("firestore");o&&$N(i,...o)}return i}function zN(n){if(n._terminated)throw new H(P.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||dH(n),n._firestoreClient}function dH(n){var e,t,r;let i=n._freezeSettings(),o=(function(a,u,l,h){return new $_(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,UN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new cI(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(n._componentsProvider))}var vi=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(It.fromBase64String(e))}catch(t){throw new H(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Hu(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};vi._jsonSchemaVersion="firestore/bytes/1.0",vi._jsonSchema={type:Ke("string",vi._jsonSchemaVersion),bytes:Ke("string")};var Ea=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new H(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var $u=class{constructor(e){this._methodName=e}};var _i=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new H(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new H(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Hu(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};_i._jsonSchemaVersion="firestore/geoPoint/1.0",_i._jsonSchema={type:Ke("string",_i._jsonSchemaVersion),latitude:Ke("number"),longitude:Ke("number")};var Ei=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Hu(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new H(P.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ei._jsonSchemaVersion="firestore/vectorValue/1.0",Ei._jsonSchema={type:Ke("string",Ei._jsonSchemaVersion),vectorValues:Ke("object")};var hH=/^__.*__$/,uI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Jn(e,this.data,this.fieldMask,t,this.fieldTransforms):new ko(e,this.data,t,this.fieldTransforms)}},Zf=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Jn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function GN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W(40011,{Ec:n})}}var lI=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Xf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(GN(this.Ec)&&hH.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},dI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||sp(e)}Dc(e,t,r,i=!1){return new lI({Ec:e,methodName:t,bc:r,path:Kt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function WN(n){let e=n._freezeSettings(),t=sp(n._databaseId);return new dI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function fH(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);VI("Data must be an object, but it was:",s,r);let a=KN(r,s),u,l;if(o.merge)u=new on(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=hI(e,p,t);if(!s.contains(m))throw new H(P.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);YN(h,m)||h.push(m)}u=new on(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new uI(new Wt(a),u,l)}var Jf=class n extends $u{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function pH(n,e,t,r){let i=n.Dc(1,e,t);VI("Data must be an object, but it was:",i,r);let o=[],s=Wt.empty();Ci(r,(u,l)=>{let h=jI(e,u,t);l=vt(l);let p=i.gc(h);if(l instanceof Jf)o.push(h);else{let m=up(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new on(o);return new Zf(s,a,i.fieldTransforms)}function gH(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[hI(e,r,t)],u=[i];if(o.length%2!=0)throw new H(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(hI(e,o[m])),u.push(o[m+1]);let l=[],h=Wt.empty();for(let m=a.length-1;m>=0;--m)if(!YN(l,a[m])){let y=a[m],S=u[m];S=vt(S);let M=s.gc(y);if(S instanceof Jf)l.push(y);else{let R=up(S,M);R!=null&&(l.push(y),h.set(y,R))}}let p=new on(l);return new Zf(h,p,s.fieldTransforms)}function up(n,e){if(QN(n=vt(n)))return VI("Unsupported field value:",e,n),KN(n,e);if(n instanceof $u)return(function(r,i){if(!GN(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=up(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Qe.fromDate(r);return{timestampValue:Of(i.serializer,o)}}if(r instanceof Qe){let o=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Of(i.serializer,o)}}if(r instanceof _i)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vi)return{bytesValue:mN(i.serializer,r._byteString)};if(r instanceof Et){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:SI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ei)return(function(s,a){return{mapValue:{fields:{[EI]:{stringValue:II},[ca]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return CI(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${mI(r)}`)})(n,e)}function KN(n,e){let t={};return HR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ci(n,(r,i)=>{let o=up(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function QN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Qe||n instanceof _i||n instanceof vi||n instanceof Et||n instanceof $u||n instanceof Ei)}function VI(n,e,t){if(!QN(t)||!AR(t)){let r=mI(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function hI(n,e,t){if((e=vt(e))instanceof Ea)return e._internalPath;if(typeof e=="string")return jI(n,e);throw Xf("Field path arguments must be of type string or ",n,!1,void 0,t)}var mH=new RegExp("[~\\*/\\[\\]]");function jI(n,e,t){if(e.search(mH)>=0)throw Xf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ea(...e.split("."))._internalPath}catch{throw Xf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xf(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new H(P.INVALID_ARGUMENT,a+n+u)}function YN(n,e){return n.some(t=>t.isEqual(e))}var ep=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new fI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(ZN("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},fI=class extends ep{data(){return super.data()}};function ZN(n,e){return typeof e=="string"?jI(n,e):e instanceof Ea?e._internalPath:e._delegate._internalPath}function yH(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new H(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var pI=class{convertValue(e,t="none"){switch(wi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Re(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Tr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw W(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ci(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[ca].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Re(s.doubleValue));return new Ei(o)}convertGeoPoint(e){return new _i(Re(e.latitude),Re(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=rp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ou(e));default:return null}}convertTimestamp(e){let t=br(e);return new Qe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Me.fromString(e);Ie(wN(r),9688,{name:e});let i=new Rf(r.get(1),r.get(3)),o=new G(r.popFirst(5));return i.isEqual(t)||Dr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function vH(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Ao=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ro=class n extends ep{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new oa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(ZN("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new H(P.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Ro._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ro._jsonSchema={type:Ke("string",Ro._jsonSchemaVersion),bundleSource:Ke("string","DocumentSnapshot"),bundleName:Ke("string"),bundle:Ke("string")};var oa=class extends Ro{data(e={}){return super.data(e)}},sa=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ao(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new oa(this._firestore,this._userDataWriter,r.key,r,new Ao(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new H(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new oa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ao(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new oa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ao(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:_H(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new H(P.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Pu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function _H(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W(61501,{type:n})}}sa._jsonSchemaVersion="firestore/querySnapshot/1.0",sa._jsonSchema={type:Ke("string",sa._jsonSchemaVersion),bundleSource:Ke("string","QuerySnapshot"),bundleName:Ke("string"),bundle:Ke("string")};var tp=class extends pI{constructor(e){super(),this.firestore=e}convertBytes(e){return new vi(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,t)}};function JN(n,e,t,...r){n=mi(n,Et);let i=mi(n.firestore,Ti),o=WN(i),s;return s=typeof(e=vt(e))=="string"||e instanceof Ea?gH(o,"updateDoc",n._key,e,t,r):pH(o,"updateDoc",n._key,e),BI(i,[s.toMutation(n._key,wr.exists(!0))])}function XN(n){return BI(mi(n.firestore,Ti),[new Lu(n._key,wr.none())])}function eM(n,e){let t=mi(n.firestore,Ti),r=LI(n),i=vH(n.converter,e);return BI(t,[fH(WN(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,wr.exists(!1))]).then(()=>r)}function UI(n,...e){var t,r,i;n=vt(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||bR(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(bR(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Et)l=mi(n.firestore,Ti),h=TI(n._key.path),u={next:p=>{e[s]&&e[s](EH(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=mi(n,Qf);l=mi(p.firestore,Ti),h=p._query;let m=new tp(l);u={next:y=>{e[s]&&e[s](new sa(l,m,p,y))},error:e[s+1],complete:e[s+2]},yH(n._query)}return(function(m,y,S,M){let R=new aI(M),V=new eI(y,R,S);return m.asyncQueue.enqueueAndForget(()=>T(null,null,function*(){return z$(yield _R(m),V)})),()=>{R.Ou(),m.asyncQueue.enqueueAndForget(()=>T(null,null,function*(){return G$(yield _R(m),V)}))}})(zN(l),h,a,u)}function BI(n,e){return(function(r,i){let o=new Ir;return r.asyncQueue.enqueueAndForget(()=>T(null,null,function*(){return eH(yield lH(r),i,o)})),o.promise})(zN(n),e)}function EH(n,e,t){let r=t.docs.get(e._key),i=new tp(n);return new Ro(n,i,e._key,r,new Ao(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Ia=i})(Ks),Dn(new Nt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ti(new O_(r.getProvider("auth-internal")),new V_(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new H(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rf(l.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ue(kA,OA,e),Ue(kA,OA,"esm2017")})();var lp=function(){return lp=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},lp.apply(this,arguments)};var DH={includeMetadataChanges:!1};function tM(n,e){return e===void 0&&(e=DH),new re(function(t){var r=UI(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function nM(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:lp(lp({},r),(t={},t[e.idField]=n.id,t))}function rM(n){return tM(n,{includeMetadataChanges:!0}).pipe(ae(function(e){return e.docs}))}function iM(n,e){return e===void 0&&(e={}),rM(n).pipe(ae(function(t){return t.map(function(r){return nM(r,e)})}))}var Cn=class{constructor(e){return e}},oM="firestore",$I=class{constructor(){return Zs(oM)}};var HI=new $("angularfire2.firestore-instances");function bH(n,e){let t=Xh(oM,n,e);return t&&new Cn(t)}function TH(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Cn(r)}}var CH={provide:$I,deps:[[new fr,HI]]},SH={provide:Cn,useFactory:bH,deps:[[new fr,HI],wo]};function sM(n,...e){return Ue("angularfire",Eo.full,"fst"),lr([SH,CH,{provide:HI,useFactory:TH(n),multi:!0,deps:[be,$e,Io,_u,[new fr,pf],[new fr,tf],...e]}])}var Ta=nn(iM,!0);var Ca=nn(eM,!0,2);var Ar=nn(HN,!0,2);var Sa=nn(XN,!0,2);var Rr=nn(LI,!0,2);var aM=nn(qN,!0);var Aa=nn(JN,!0,2);function AH(n,e){if(n&1){let t=ro();O(0,"tr")(1,"td"),B(2),L(),O(3,"td"),B(4),L(),O(5,"td"),B(6),L(),O(7,"td"),B(8),L(),O(9,"td",19)(10,"button",21),Ne("click",function(){let i=fn(t).$implicit,o=Vn();return pn(o.edit(i))}),B(11,"Edit"),L(),O(12,"button",22),Ne("click",function(){let i=fn(t).$implicit,o=Vn();return pn(o.remove(i.id))}),B(13,"Delete"),L()()()}if(n&2){let t=e.$implicit;pe(2),st(t.date),pe(2),st(t.employeeName),pe(2),st(t.serviceType),pe(2),st(t.notes)}}var dp=class n{constructor(e){this.firestore=e;let t=Ar(this.firestore,this.collectionName);Ta(t,{idField:"id"}).subscribe(r=>{this.records=r})}collectionName="daily_service_records";form={date:"",employeeName:"",serviceType:"",notes:""};records=[];editId=null;save(){return T(this,null,function*(){let e=Ar(this.firestore,this.collectionName);if(this.editId){let t=Rr(this.firestore,`${this.collectionName}/${this.editId}`);yield Aa(t,this.form)}else yield Ca(e,this.form);this.reset()})}edit(e){this.editId=e.id,this.form=k({},e)}remove(e){return T(this,null,function*(){let t=Rr(this.firestore,`${this.collectionName}/${e}`);yield Sa(t)})}reset(){this.form={date:"",employeeName:"",serviceType:"",notes:""},this.editId=null}static \u0275fac=function(t){return new(t||n)(ie(Cn))};static \u0275cmp=mn({type:n,selectors:[["app-daily-service-record"]],decls:42,vars:6,consts:[[1,"container","mt-4"],[1,"mb-4","text-center"],[1,"mb-5","dark-card","p-4","rounded-3","shadow",3,"ngSubmit"],[1,"row","g-3"],[1,"col-md-3"],["for","date",1,"form-label"],["type","date","id","date","name","date","required","",1,"form-control","dark-input",3,"ngModelChange","ngModel"],["for","employeeName",1,"form-label"],["type","text","id","employeeName","name","employeeName","required","",1,"form-control","dark-input",3,"ngModelChange","ngModel"],["for","serviceType",1,"form-label"],["type","text","id","serviceType","name","serviceType","required","",1,"form-control","dark-input",3,"ngModelChange","ngModel"],["for","notes",1,"form-label"],["type","text","id","notes","name","notes",1,"form-control","dark-input",3,"ngModelChange","ngModel"],[1,"mt-3","text-end"],["type","submit",1,"btn","btn-primary","me-2"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"table-responsive"],[1,"table","table-dark","table-hover","align-middle","mb-0"],[1,"table-header-dark"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-info","me-1",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"]],template:function(t,r){t&1&&(O(0,"div",0)(1,"h2",1),B(2,"Daily Service Record"),L(),O(3,"form",2),Ne("ngSubmit",function(){return r.save()}),O(4,"div",3)(5,"div",4)(6,"label",5),B(7,"Date"),L(),O(8,"input",6),ct("ngModelChange",function(o){return yt(r.form.date,o)||(r.form.date=o),o}),L()(),O(9,"div",4)(10,"label",7),B(11,"Employee Name"),L(),O(12,"input",8),ct("ngModelChange",function(o){return yt(r.form.employeeName,o)||(r.form.employeeName=o),o}),L()(),O(13,"div",4)(14,"label",9),B(15,"Service Type"),L(),O(16,"input",10),ct("ngModelChange",function(o){return yt(r.form.serviceType,o)||(r.form.serviceType=o),o}),L()(),O(17,"div",4)(18,"label",11),B(19,"Notes"),L(),O(20,"input",12),ct("ngModelChange",function(o){return yt(r.form.notes,o)||(r.form.notes=o),o}),L()()(),O(21,"div",13)(22,"button",14),B(23),L(),O(24,"button",15),Ne("click",function(){return r.reset()}),B(25,"Reset"),L()()(),O(26,"div",16)(27,"table",17)(28,"thead",18)(29,"tr")(30,"th"),B(31,"Date"),L(),O(32,"th"),B(33,"Employee Name"),L(),O(34,"th"),B(35,"Service Type"),L(),O(36,"th"),B(37,"Notes"),L(),O(38,"th",19),B(39,"Actions"),L()()(),O(40,"tbody"),Xr(41,AH,14,4,"tr",20),L()()()()),t&2&&(pe(8),at("ngModel",r.form.date),pe(4),at("ngModel",r.form.employeeName),pe(4),at("ngModel",r.form.serviceType),pe(4),at("ngModel",r.form.notes),pe(3),gr("",r.editId?"Update":"Add"," Record"),pe(18),ti("ngForOf",r.records))},dependencies:[jn,oi,Ws,Gs,hi,qs,zs,po,fo,ho],styles:[".dark-card[_ngcontent-%COMP%]{background:#1f1f1f;border:1px solid #2c2c2c;border-radius:12px;padding:20px;box-shadow:0 0 15px #00000080}.dark-input[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]{background-color:#2a2a2a!important;color:#e6e6e6!important;border:1px solid #3a3a3a!important;border-radius:8px!important;padding:10px!important}.dark-input[_ngcontent-%COMP%]:focus, .form-control[_ngcontent-%COMP%]:focus{border-color:#0d6efd!important;background-color:#323232!important;box-shadow:0 0 0 .25rem #0d6efd40}.daily-table[_ngcontent-%COMP%]{border-radius:12px;overflow:hidden;box-shadow:0 0 15px #00000080;margin-top:20px}.table-header-dark[_ngcontent-%COMP%]{background-color:#111!important;color:#fff!important;font-weight:600;letter-spacing:.5px;text-transform:uppercase}.table-dark[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-dark[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 20px;vertical-align:middle}.table-dark[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]{background-color:#0dcaf0}.table-dark[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]:hover{background-color:#0bb8d8}.table-dark[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{background-color:#dc3545}.table-dark[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]:hover{background-color:#c82333}"]})};function RH(n,e){if(n&1){let t=ro();O(0,"tr")(1,"td"),B(2),L(),O(3,"td"),B(4),L(),O(5,"td"),B(6),L(),O(7,"td"),B(8),L(),O(9,"td"),B(10),L(),O(11,"td",22)(12,"button",24),Ne("click",function(){let i=fn(t).$implicit,o=Vn();return pn(o.edit(i))}),B(13,"Edit"),L(),O(14,"button",25),Ne("click",function(){let i=fn(t).$implicit,o=Vn();return pn(o.remove(i.id))}),B(15,"Delete"),L()()()}if(n&2){let t=e.$implicit;pe(2),st(t.patientName),pe(2),st(t.age),pe(2),st(t.dateOfBite),pe(2),st(t.biteLocation),pe(2),st(t.vaccinationStatus)}}var hp=class n{constructor(e){this.firestore=e;let t=Ar(this.firestore,this.collectionName);Ta(t,{idField:"id"}).subscribe(r=>{this.records=r})}collectionName="rabies_cases";form={patientName:"",age:"",dateOfBite:"",biteLocation:"",vaccinationStatus:""};records=[];editId=null;save(){return T(this,null,function*(){let e=Ar(this.firestore,this.collectionName);if(this.editId){let t=Rr(this.firestore,this.collectionName,this.editId);yield Aa(t,this.form)}else yield Ca(e,this.form);this.reset()})}edit(e){this.editId=e.id,this.form=k({},e)}remove(e){return T(this,null,function*(){let t=Rr(this.firestore,this.collectionName,e);yield Sa(t)})}reset(){this.form={patientName:"",age:"",dateOfBite:"",biteLocation:"",vaccinationStatus:""},this.editId=null}static \u0275fac=function(t){return new(t||n)(ie(Cn))};static \u0275cmp=mn({type:n,selectors:[["app-rabies-case"]],decls:48,vars:7,consts:[[1,"container","mt-4","rabies-dark"],[1,"mb-4","text-center","fw-bold","text-light"],[1,"mb-5","dark-card","p-4","rounded-3","shadow",3,"ngSubmit"],[1,"row","g-3"],[1,"col-md-3"],["for","patientName",1,"form-label"],["type","text","id","patientName","name","patientName","required","",1,"form-control","dark-input",3,"ngModelChange","ngModel"],[1,"col-md-2"],["for","age",1,"form-label"],["type","number","id","age","name","age","required","",1,"form-control","dark-input",3,"ngModelChange","ngModel"],["for","dateOfBite",1,"form-label"],["type","date","id","dateOfBite","name","dateOfBite","required","",1,"form-control","dark-input",3,"ngModelChange","ngModel"],["for","biteLocation",1,"form-label"],["type","text","id","biteLocation","name","biteLocation","required","",1,"form-control","dark-input",3,"ngModelChange","ngModel"],["for","vaccinationStatus",1,"form-label"],["type","text","id","vaccinationStatus","name","vaccinationStatus",1,"form-control","dark-input",3,"ngModelChange","ngModel"],[1,"mt-3","text-end"],["type","submit",1,"btn","btn-primary","me-2"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"table-responsive","dark-card","p-3","rounded-3","shadow"],[1,"table","table-dark","table-hover","align-middle"],[1,"table-header-dark"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-info","me-1",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"]],template:function(t,r){t&1&&(O(0,"div",0)(1,"h2",1),B(2,"Rabies Case Records"),L(),O(3,"form",2),Ne("ngSubmit",function(){return r.save()}),O(4,"div",3)(5,"div",4)(6,"label",5),B(7,"Patient Name"),L(),O(8,"input",6),ct("ngModelChange",function(o){return yt(r.form.patientName,o)||(r.form.patientName=o),o}),L()(),O(9,"div",7)(10,"label",8),B(11,"Age"),L(),O(12,"input",9),ct("ngModelChange",function(o){return yt(r.form.age,o)||(r.form.age=o),o}),L()(),O(13,"div",4)(14,"label",10),B(15,"Date of Bite"),L(),O(16,"input",11),ct("ngModelChange",function(o){return yt(r.form.dateOfBite,o)||(r.form.dateOfBite=o),o}),L()(),O(17,"div",7)(18,"label",12),B(19,"Bite Location"),L(),O(20,"input",13),ct("ngModelChange",function(o){return yt(r.form.biteLocation,o)||(r.form.biteLocation=o),o}),L()(),O(21,"div",7)(22,"label",14),B(23,"Vaccination Status"),L(),O(24,"input",15),ct("ngModelChange",function(o){return yt(r.form.vaccinationStatus,o)||(r.form.vaccinationStatus=o),o}),L()()(),O(25,"div",16)(26,"button",17),B(27),L(),O(28,"button",18),Ne("click",function(){return r.reset()}),B(29,"Reset"),L()()(),O(30,"div",19)(31,"table",20)(32,"thead",21)(33,"tr")(34,"th"),B(35,"Patient Name"),L(),O(36,"th"),B(37,"Age"),L(),O(38,"th"),B(39,"Date of Bite"),L(),O(40,"th"),B(41,"Bite Location"),L(),O(42,"th"),B(43,"Vaccination Status"),L(),O(44,"th",22),B(45,"Actions"),L()()(),O(46,"tbody"),Xr(47,RH,16,5,"tr",23),L()()()()),t&2&&(pe(8),at("ngModel",r.form.patientName),pe(4),at("ngModel",r.form.age),pe(4),at("ngModel",r.form.dateOfBite),pe(4),at("ngModel",r.form.biteLocation),pe(4),at("ngModel",r.form.vaccinationStatus),pe(3),gr("",r.editId?"Update":"Add"," Case"),pe(20),ti("ngForOf",r.records))},dependencies:[jn,oi,Ws,Gs,hi,Mv,qs,zs,po,fo,ho],styles:[".table-responsive[_ngcontent-%COMP%]{border-radius:12px;overflow:hidden;box-shadow:0 0 15px #00000080;margin-top:20px}.table-header-dark[_ngcontent-%COMP%]{background-color:#111!important;color:#fff!important;font-weight:600;letter-spacing:.5px;text-transform:uppercase}.table-dark[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-dark[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 20px;vertical-align:middle}.table-dark[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1), .table-dark[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(1){width:20%}.table-dark[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2), .table-dark[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:8%}.table-dark[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3), .table-dark[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:15%}.table-dark[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4), .table-dark[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:20%}.table-dark[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5), .table-dark[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5){width:20%}.table-dark[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6), .table-dark[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6){width:17%}.table-dark[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #2e2e2e;transition:background-color .3s}.table-dark[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#222}.table-dark[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:13px;padding:5px 10px;border-radius:6px;transition:all .2s}.table-dark[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]{background-color:#0dcaf0;border-color:#0dcaf0}.table-dark[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]:hover{background-color:#0bb8d8}.table-dark[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;border-color:#dc3545}.table-dark[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]:hover{background-color:#c82333}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#444;border-radius:10px}"]})};function NH(n,e){if(n&1){let t=ro();O(0,"tr")(1,"td"),B(2),L(),O(3,"td"),B(4),L(),O(5,"td"),B(6),L(),O(7,"td",17)(8,"button",19),Ne("click",function(){let i=fn(t).$implicit,o=Vn();return pn(o.edit(i))}),B(9,"Edit"),L(),O(10,"button",20),Ne("click",function(){let i=fn(t).$implicit,o=Vn();return pn(o.remove(i.id))}),B(11,"Delete"),L()()()}if(n&2){let t=e.$implicit;pe(2),st(t.date),pe(2),st(t.sourceAddress),pe(2),st(t.waterStatus)}}var fp=class n{constructor(e){this.firestore=e;let t=Ar(this.firestore,this.collectionName);Ta(t,{idField:"id"}).subscribe(r=>{this.records=r})}collectionName="water_analysis";form={date:"",sourceAddress:"",waterStatus:""};records=[];editId=null;save(){return T(this,null,function*(){let e=Ar(this.firestore,this.collectionName);if(this.editId){let t=Rr(this.firestore,`${this.collectionName}/${this.editId}`);yield Aa(t,this.form)}else yield Ca(e,this.form);this.reset()})}edit(e){this.editId=e.id,this.form=k({},e)}remove(e){return T(this,null,function*(){let t=Rr(this.firestore,`${this.collectionName}/${e}`);yield Sa(t)})}reset(){this.form={date:"",sourceAddress:"",waterStatus:""},this.editId=null}static \u0275fac=function(t){return new(t||n)(ie(Cn))};static \u0275cmp=mn({type:n,selectors:[["app-water-analysis"]],decls:36,vars:5,consts:[[1,"container","mt-4"],[1,"mb-4","text-center"],[1,"mb-5",3,"ngSubmit"],[1,"row","g-3"],[1,"col-md-4"],["for","date",1,"form-label"],["type","date","id","date","name","date","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","sourceAddress",1,"form-label"],["type","text","id","sourceAddress","name","sourceAddress","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","waterStatus",1,"form-label"],["type","text","id","waterStatus","name","waterStatus","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"mt-3","text-end"],["type","submit",1,"btn","btn-primary","me-2"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"table-responsive"],[1,"table","table-striped","table-hover","align-middle"],[1,"table-dark"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-info","me-1",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"]],template:function(t,r){t&1&&(O(0,"div",0)(1,"h2",1),B(2,"Water Analysis Records"),L(),O(3,"form",2),Ne("ngSubmit",function(){return r.save()}),O(4,"div",3)(5,"div",4)(6,"label",5),B(7,"Date"),L(),O(8,"input",6),ct("ngModelChange",function(o){return yt(r.form.date,o)||(r.form.date=o),o}),L()(),O(9,"div",4)(10,"label",7),B(11,"Source Address"),L(),O(12,"input",8),ct("ngModelChange",function(o){return yt(r.form.sourceAddress,o)||(r.form.sourceAddress=o),o}),L()(),O(13,"div",4)(14,"label",9),B(15,"Water Status"),L(),O(16,"input",10),ct("ngModelChange",function(o){return yt(r.form.waterStatus,o)||(r.form.waterStatus=o),o}),L()()(),O(17,"div",11)(18,"button",12),B(19),L(),O(20,"button",13),Ne("click",function(){return r.reset()}),B(21,"Reset"),L()()(),O(22,"div",14)(23,"table",15)(24,"thead",16)(25,"tr")(26,"th"),B(27,"Date"),L(),O(28,"th"),B(29,"Source Address"),L(),O(30,"th"),B(31,"Water Status"),L(),O(32,"th",17),B(33,"Actions"),L()()(),O(34,"tbody"),Xr(35,NH,12,3,"tr",18),L()()()()),t&2&&(pe(8),at("ngModel",r.form.date),pe(4),at("ngModel",r.form.sourceAddress),pe(4),at("ngModel",r.form.waterStatus),pe(3),gr("",r.editId?"Update":"Add"," Record"),pe(16),ti("ngForOf",r.records))},dependencies:[jn,oi,Ws,Gs,hi,qs,zs,po,fo,ho],styles:[".dark-card[_ngcontent-%COMP%]{background:#1f1f1f;border:1px solid #2c2c2c;border-radius:12px;padding:20px;box-shadow:0 0 15px #00000080}.dark-input[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]{background-color:#2a2a2a!important;color:#e6e6e6!important;border:1px solid #3a3a3a!important;border-radius:8px!important;padding:10px!important}.dark-input[_ngcontent-%COMP%]:focus, .form-control[_ngcontent-%COMP%]:focus{border-color:#0d6efd!important;background-color:#323232!important;box-shadow:0 0 0 .25rem #0d6efd40}.form-label[_ngcontent-%COMP%]{font-weight:600;color:#e6e6e6}.table-responsive.daily-table[_ngcontent-%COMP%]{border-radius:12px;overflow:hidden;box-shadow:0 0 15px #00000080;margin-top:20px}.table-header-dark[_ngcontent-%COMP%]{background-color:#111!important;color:#fff!important;font-weight:600;letter-spacing:.5px;text-transform:uppercase}.table-dark[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-dark[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 20px;vertical-align:middle}.table-dark[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1), .table-dark[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(1){width:25%}.table-dark[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2), .table-dark[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:35%}.table-dark[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3), .table-dark[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){width:20%}.table-dark[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4), .table-dark[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:20%}.table-dark[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #2e2e2e;transition:background-color .3s}.table-dark[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#222}.table-dark[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:13px;padding:5px 10px;border-radius:6px;transition:all .2s}.table-dark[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]{background-color:#0dcaf0;border-color:#0dcaf0}.table-dark[_ngcontent-%COMP%]   .btn-info[_ngcontent-%COMP%]:hover{background-color:#0bb8d8}.table-dark[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;border-color:#dc3545}.table-dark[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]:hover{background-color:#c82333}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#444;border-radius:10px}"]})};var cM=[{path:"DailyServiceRecord",component:dp},{path:"RabiesCase",component:hp},{path:"water-analysis",component:fp}];var uM={production:!1,firebase:{apiKey:"AIzaSyAm9Oc6ZM4q7E9FM78qPJ0JaxQ4bVhtlxA",authDomain:"calulo-clinicmanagement-app.firebaseapp.com",projectId:"calulo-clinicmanagement-app",storageBucket:"calulo-clinicmanagement-app.firebasestorage.app",messagingSenderId:"267492710874",appId:"1:267492710874:web:0e25e9f35bdfa4776988e3"}};zy(Oh,{providers:[Ev(cM),rA(()=>iA(uM.firebase)),sM(()=>aM())]});
